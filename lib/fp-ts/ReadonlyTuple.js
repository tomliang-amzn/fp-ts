"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.foldMap = exports.flap = exports.extract = exports.extend = exports.duplicate = exports.compose = exports.bimap = exports.URI = exports.Traversable = exports.Semigroupoid = exports.Functor = exports.Foldable = exports.Comonad = exports.Bifunctor = void 0;
exports.fst = fst;
exports.getApplicative = getApplicative;
exports.getApply = getApply;
exports.getChain = getChain;
exports.getChainRec = getChainRec;
exports.getMonad = getMonad;
exports.sequence = exports.reduceRight = exports.reduce = exports.readonlyTuple = exports.mapSnd = exports.mapLeft = exports.mapFst = exports.map = void 0;
exports.snd = snd;
exports.traverse = exports.swap = void 0;

var _function = require("./function");

var _Functor = require("./Functor");

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

// -------------------------------------------------------------------------------------
// model
// -------------------------------------------------------------------------------------

/**
 * @category destructors
 * @since 2.5.0
 */
function fst(ea) {
  return ea[0];
}
/**
 * @category destructors
 * @since 2.5.0
 */


function snd(ea) {
  return ea[1];
}
/**
 * @category combinators
 * @since 2.5.0
 */


var swap = function swap(ea) {
  return [snd(ea), fst(ea)];
};
/**
 * @category instances
 * @since 2.5.0
 */


exports.swap = swap;

function getApply(S) {
  return {
    URI: URI,
    _E: undefined,
    map: _map,
    ap: function ap(fab, fa) {
      return [fst(fab)(fst(fa)), S.concat(snd(fab), snd(fa))];
    }
  };
}

var of = function of(M) {
  return function (a) {
    return [a, M.empty];
  };
};
/**
 * @category instances
 * @since 2.5.0
 */


function getApplicative(M) {
  var A = getApply(M);
  return {
    URI: URI,
    _E: undefined,
    map: A.map,
    ap: A.ap,
    of: of(M)
  };
}
/**
 * @category instances
 * @since 2.5.0
 */


function getChain(S) {
  var A = getApply(S);
  return {
    URI: URI,
    _E: undefined,
    map: A.map,
    ap: A.ap,
    chain: function chain(ma, f) {
      var _f = f(fst(ma)),
          _f2 = _slicedToArray(_f, 2),
          b = _f2[0],
          s = _f2[1];

      return [b, S.concat(snd(ma), s)];
    }
  };
}
/**
 * @category instances
 * @since 2.5.0
 */


function getMonad(M) {
  var C = getChain(M);
  return {
    URI: URI,
    _E: undefined,
    map: C.map,
    ap: C.ap,
    chain: C.chain,
    of: of(M)
  };
}
/**
 * @category instances
 * @since 2.5.0
 */


function getChainRec(M) {
  var chainRec = function chainRec(a, f) {
    var result = f(a);
    var acc = M.empty;
    var s = fst(result);

    while (s._tag === 'Left') {
      acc = M.concat(acc, snd(result));
      result = f(s.left);
      s = fst(result);
    }

    return [s.right, M.concat(acc, snd(result))];
  };

  var C = getChain(M);
  return {
    URI: URI,
    _E: undefined,
    map: C.map,
    ap: C.ap,
    chain: C.chain,
    chainRec: chainRec
  };
} // -------------------------------------------------------------------------------------
// non-pipeables
// -------------------------------------------------------------------------------------

/* istanbul ignore next */


var _compose = function _compose(bc, ab) {
  return (0, _function.pipe)(bc, compose(ab));
};
/* istanbul ignore next */


var _map = function _map(fa, f) {
  return (0, _function.pipe)(fa, mapFst(f));
};
/* istanbul ignore next */


var _bimap = function _bimap(fa, f, g) {
  return (0, _function.pipe)(fa, bimap(f, g));
};
/* istanbul ignore next */


var _mapLeft = function _mapLeft(fa, f) {
  return (0, _function.pipe)(fa, mapSnd(f));
};
/* istanbul ignore next */


var _extend = function _extend(wa, f) {
  return (0, _function.pipe)(wa, extend(f));
};
/* istanbul ignore next */


var _reduce = function _reduce(fa, b, f) {
  return (0, _function.pipe)(fa, reduce(b, f));
};
/* istanbul ignore next */


var _foldMap = function _foldMap(M) {
  var foldMapM = foldMap(M);
  return function (fa, f) {
    return (0, _function.pipe)(fa, foldMapM(f));
  };
};
/* istanbul ignore next */


var _reduceRight = function _reduceRight(fa, b, f) {
  return (0, _function.pipe)(fa, reduceRight(b, f));
};
/* istanbul ignore next */


var _traverse = function _traverse(F) {
  var traverseF = traverse(F);
  return function (ta, f) {
    return (0, _function.pipe)(ta, traverseF(f));
  };
}; // -------------------------------------------------------------------------------------
// type class members
// -------------------------------------------------------------------------------------

/**
 * Map a pair of functions over the two type arguments of the bifunctor.
 *
 * @category Bifunctor
 * @since 2.5.0
 */


var bimap = function bimap(f, g) {
  return function (fa) {
    return [g(fst(fa)), f(snd(fa))];
  };
};
/**
 * Map a function over the first component of a `ReadonlyTuple`.
 *
 * This is the `map` operation of the `Functor` instance.
 *
 * @category Functor
 * @since 2.10.0
 */


exports.bimap = bimap;

var mapFst = function mapFst(f) {
  return function (fa) {
    return [f(fst(fa)), snd(fa)];
  };
};
/**
 * Map a function over the second component of a `ReadonlyTuple`.
 *
 * This is the `mapLeft` operation of the `Bifunctor` instance.
 *
 * @category Bifunctor
 * @since 2.10.0
 */


exports.mapFst = mapFst;

var mapSnd = function mapSnd(f) {
  return function (fa) {
    return [fst(fa), f(snd(fa))];
  };
};
/**
 * @category Semigroupoid
 * @since 2.5.0
 */


exports.mapSnd = mapSnd;

var compose = function compose(ab) {
  return function (bc) {
    return [fst(bc), snd(ab)];
  };
};
/**
 * @category Extend
 * @since 2.5.0
 */


exports.compose = compose;

var extend = function extend(f) {
  return function (wa) {
    return [f(wa), snd(wa)];
  };
};
/**
 * @category Extract
 * @since 2.6.2
 */


exports.extend = extend;
var extract = fst;
/**
 * Derivable from `Extend`.
 *
 * @category combinators
 * @since 2.5.0
 */

exports.extract = extract;
var duplicate = /*#__PURE__*/extend(_function.identity);
/**
 * @category Foldable
 * @since 2.5.0
 */

exports.duplicate = duplicate;

var reduce = function reduce(b, f) {
  return function (fa) {
    return f(b, fst(fa));
  };
};
/**
 * @category Foldable
 * @since 2.5.0
 */


exports.reduce = reduce;

var foldMap = function foldMap() {
  return function (f) {
    return function (fa) {
      return f(fst(fa));
    };
  };
};
/**
 * @category Foldable
 * @since 2.5.0
 */


exports.foldMap = foldMap;

var reduceRight = function reduceRight(b, f) {
  return function (fa) {
    return f(fst(fa), b);
  };
};
/**
 * @since 2.6.3
 */


exports.reduceRight = reduceRight;

var traverse = function traverse(F) {
  return function (f) {
    return function (ta) {
      return F.map(f(fst(ta)), function (b) {
        return [b, snd(ta)];
      });
    };
  };
};
/**
 * @since 2.6.3
 */


exports.traverse = traverse;

var sequence = function sequence(F) {
  return function (fas) {
    return F.map(fst(fas), function (a) {
      return [a, snd(fas)];
    });
  };
}; // -------------------------------------------------------------------------------------
// instances
// -------------------------------------------------------------------------------------

/**
 * @category instances
 * @since 2.5.0
 */


exports.sequence = sequence;
var URI = 'ReadonlyTuple';
/**
 * @category instances
 * @since 2.5.0
 */

exports.URI = URI;

/**
 * @category instances
 * @since 2.7.0
 */
var Functor = {
  URI: URI,
  map: _map
};
/**
 * Derivable from `Functor`.
 *
 * @category combinators
 * @since 2.10.0
 */

exports.Functor = Functor;
var flap = /*#__PURE__*/(0, _Functor.flap)(Functor);
/**
 * @category instances
 * @since 2.7.0
 */

exports.flap = flap;
var Bifunctor = {
  URI: URI,
  bimap: _bimap,
  mapLeft: _mapLeft
};
/**
 * @category instances
 * @since 2.7.0
 */

exports.Bifunctor = Bifunctor;
var Semigroupoid = {
  URI: URI,
  compose: _compose
};
/**
 * @category instances
 * @since 2.7.0
 */

exports.Semigroupoid = Semigroupoid;
var Comonad = {
  URI: URI,
  map: _map,
  extend: _extend,
  extract: extract
};
/**
 * @category instances
 * @since 2.7.0
 */

exports.Comonad = Comonad;
var Foldable = {
  URI: URI,
  reduce: _reduce,
  foldMap: _foldMap,
  reduceRight: _reduceRight
};
/**
 * @category instances
 * @since 2.7.0
 */

exports.Foldable = Foldable;
var Traversable = {
  URI: URI,
  map: _map,
  reduce: _reduce,
  foldMap: _foldMap,
  reduceRight: _reduceRight,
  traverse: _traverse,
  sequence: sequence
}; // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------

/**
 * Use [`mapFst`](#mapfst) instead.
 *
 * @since 2.5.0
 * @deprecated
 */

exports.Traversable = Traversable;
var map = mapFst;
/**
 * Use [`mapSnd`](#mapsnd) instead.
 *
 * @since 2.5.0
 * @deprecated
 */

exports.map = map;
var mapLeft = mapSnd;
/**
 * Use small, specific instances instead.
 *
 * @category instances
 * @since 2.5.0
 * @deprecated
 */

exports.mapLeft = mapLeft;
var readonlyTuple = {
  URI: URI,
  compose: _compose,
  map: _map,
  bimap: _bimap,
  mapLeft: _mapLeft,
  extract: extract,
  extend: _extend,
  reduce: _reduce,
  foldMap: _foldMap,
  reduceRight: _reduceRight,
  traverse: _traverse,
  sequence: sequence
};
exports.readonlyTuple = readonlyTuple;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9SZWFkb25seVR1cGxlLnRzIl0sIm5hbWVzIjpbImZzdCIsImVhIiwic25kIiwic3dhcCIsImdldEFwcGx5IiwiUyIsIlVSSSIsIl9FIiwidW5kZWZpbmVkIiwibWFwIiwiX21hcCIsImFwIiwiZmFiIiwiZmEiLCJjb25jYXQiLCJvZiIsIk0iLCJhIiwiZW1wdHkiLCJnZXRBcHBsaWNhdGl2ZSIsIkEiLCJnZXRDaGFpbiIsImNoYWluIiwibWEiLCJmIiwiYiIsInMiLCJnZXRNb25hZCIsIkMiLCJnZXRDaGFpblJlYyIsImNoYWluUmVjIiwicmVzdWx0IiwiYWNjIiwiX3RhZyIsImxlZnQiLCJyaWdodCIsIl9jb21wb3NlIiwiYmMiLCJhYiIsImNvbXBvc2UiLCJtYXBGc3QiLCJfYmltYXAiLCJnIiwiYmltYXAiLCJfbWFwTGVmdCIsIm1hcFNuZCIsIl9leHRlbmQiLCJ3YSIsImV4dGVuZCIsIl9yZWR1Y2UiLCJyZWR1Y2UiLCJfZm9sZE1hcCIsImZvbGRNYXBNIiwiZm9sZE1hcCIsIl9yZWR1Y2VSaWdodCIsInJlZHVjZVJpZ2h0IiwiX3RyYXZlcnNlIiwiRiIsInRyYXZlcnNlRiIsInRyYXZlcnNlIiwidGEiLCJleHRyYWN0IiwiZHVwbGljYXRlIiwiaWRlbnRpdHkiLCJzZXF1ZW5jZSIsImZhcyIsIkZ1bmN0b3IiLCJmbGFwIiwiQmlmdW5jdG9yIiwibWFwTGVmdCIsIlNlbWlncm91cG9pZCIsIkNvbW9uYWQiLCJGb2xkYWJsZSIsIlRyYXZlcnNhYmxlIiwicmVhZG9ubHlUdXBsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQVdBOztBQUNBOzs7Ozs7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLEdBQVQsQ0FBbUJDLEVBQW5CLEVBQTJDO0FBQ2hELFNBQU9BLEVBQUUsQ0FBQyxDQUFELENBQVQ7QUFDRDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFDTyxTQUFT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LE9BUFk7QUFRcEJJLEVBQUFBLE1BQU0sRUFBRUQsT0FSWTtBQVNwQkksRUFBQUEsT0FBTyxFQUFFRixRQVRXO0FBVXBCSSxFQUFBQSxXQUFXLEVBQUVELFlBVk87QUFXcEJLLEVBQUFBLFFBQVEsRUFBRUgsU0FYVTtBQVlwQlEsRUFBQUEsUUFBUSxFQUFSQTtBQVpvQixDQUpmIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuaW1wb3J0IHsgQXBwbGljYXRpdmUsIEFwcGxpY2F0aXZlMkMgfSBmcm9tICcuL0FwcGxpY2F0aXZlJ1xuaW1wb3J0IHsgQXBwbHkyQyB9IGZyb20gJy4vQXBwbHknXG5pbXBvcnQgeyBCaWZ1bmN0b3IyIH0gZnJvbSAnLi9CaWZ1bmN0b3InXG5pbXBvcnQgeyBDaGFpbjJDIH0gZnJvbSAnLi9DaGFpbidcbmltcG9ydCB7IENoYWluUmVjMkMgfSBmcm9tICcuL0NoYWluUmVjJ1xuaW1wb3J0IHsgQ29tb25hZDIgfSBmcm9tICcuL0NvbW9uYWQnXG5pbXBvcnQgeyBFaXRoZXIgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IEZvbGRhYmxlMiB9IGZyb20gJy4vRm9sZGFibGUnXG5pbXBvcnQgeyBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nXG5pbXBvcnQgeyBmbGFwIGFzIGZsYXBfLCBGdW5jdG9yMiB9IGZyb20gJy4vRnVuY3RvcidcbmltcG9ydCB7IEhLVCB9IGZyb20gJy4vSEtUJ1xuaW1wb3J0IHsgTW9uYWQyQyB9IGZyb20gJy4vTW9uYWQnXG5pbXBvcnQgeyBNb25vaWQgfSBmcm9tICcuL01vbm9pZCdcbmltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gJy4vU2VtaWdyb3VwJ1xuaW1wb3J0IHsgU2VtaWdyb3Vwb2lkMiB9IGZyb20gJy4vU2VtaWdyb3Vwb2lkJ1xuaW1wb3J0IHsgUGlwZWFibGVUcmF2ZXJzZTIsIFRyYXZlcnNhYmxlMiB9IGZyb20gJy4vVHJhdmVyc2FibGUnXG5pbXBvcnQgeyBFeHRlbmQyIH0gZnJvbSAnLi9FeHRlbmQnXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIG1vZGVsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQGNhdGVnb3J5IGRlc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZzdDxBLCBFPihlYTogcmVhZG9ubHkgW0EsIEVdKTogQSB7XG4gIHJldHVybiBlYVswXVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBkZXN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbmQ8QSwgRT4oZWE6IHJlYWRvbmx5IFtBLCBFXSk6IEUge1xuICByZXR1cm4gZWFbMV1cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgY29uc3Qgc3dhcCA9IDxBLCBFPihlYTogcmVhZG9ubHkgW0EsIEVdKTogcmVhZG9ubHkgW0UsIEFdID0+IFtzbmQoZWEpLCBmc3QoZWEpXVxuXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwbHk8Uz4oUzogU2VtaWdyb3VwPFM+KTogQXBwbHkyQzxVUkksIFM+IHtcbiAgcmV0dXJuIHtcbiAgICBVUkksXG4gICAgX0U6IHVuZGVmaW5lZCBhcyBhbnksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiAoZmFiLCBmYSkgPT4gW2ZzdChmYWIpKGZzdChmYSkpLCBTLmNvbmNhdChzbmQoZmFiKSwgc25kKGZhKSldXG4gIH1cbn1cblxuY29uc3Qgb2YgPSA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oYTogQSk6IHJlYWRvbmx5IFtBLCBNXSA9PiB7XG4gIHJldHVybiBbYSwgTS5lbXB0eV1cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcGxpY2F0aXZlPE0+KE06IE1vbm9pZDxNPik6IEFwcGxpY2F0aXZlMkM8VVJJLCBNPiB7XG4gIGNvbnN0IEEgPSBnZXRBcHBseShNKVxuICByZXR1cm4ge1xuICAgIFVSSSxcbiAgICBfRTogdW5kZWZpbmVkIGFzIGFueSxcbiAgICBtYXA6IEEubWFwLFxuICAgIGFwOiBBLmFwLFxuICAgIG9mOiBvZihNKVxuICB9XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFpbjxTPihTOiBTZW1pZ3JvdXA8Uz4pOiBDaGFpbjJDPFVSSSwgUz4ge1xuICBjb25zdCBBID0gZ2V0QXBwbHkoUylcbiAgcmV0dXJuIHtcbiAgICBVUkksXG4gICAgX0U6IHVuZGVmaW5lZCBhcyBhbnksXG4gICAgbWFwOiBBLm1hcCxcbiAgICBhcDogQS5hcCxcbiAgICBjaGFpbjogKG1hLCBmKSA9PiB7XG4gICAgICBjb25zdCBbYiwgc10gPSBmKGZzdChtYSkpXG4gICAgICByZXR1cm4gW2IsIFMuY29uY2F0KHNuZChtYSksIHMpXVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9uYWQ8TT4oTTogTW9ub2lkPE0+KTogTW9uYWQyQzxVUkksIE0+IHtcbiAgY29uc3QgQyA9IGdldENoYWluKE0pXG4gIHJldHVybiB7XG4gICAgVVJJLFxuICAgIF9FOiB1bmRlZmluZWQgYXMgYW55LFxuICAgIG1hcDogQy5tYXAsXG4gICAgYXA6IEMuYXAsXG4gICAgY2hhaW46IEMuY2hhaW4sXG4gICAgb2Y6IG9mKE0pXG4gIH1cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENoYWluUmVjPE0+KE06IE1vbm9pZDxNPik6IENoYWluUmVjMkM8VVJJLCBNPiB7XG4gIGNvbnN0IGNoYWluUmVjID0gPEEsIEI+KGE6IEEsIGY6IChhOiBBKSA9PiByZWFkb25seSBbRWl0aGVyPEEsIEI+LCBNXSk6IHJlYWRvbmx5IFtCLCBNXSA9PiB7XG4gICAgbGV0IHJlc3VsdDogcmVhZG9ubHkgW0VpdGhlcjxBLCBCPiwgTV0gPSBmKGEpXG4gICAgbGV0IGFjYzogTSA9IE0uZW1wdHlcbiAgICBsZXQgczogRWl0aGVyPEEsIEI+ID0gZnN0KHJlc3VsdClcbiAgICB3aGlsZSAocy5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgIGFjYyA9IE0uY29uY2F0KGFjYywgc25kKHJlc3VsdCkpXG4gICAgICByZXN1bHQgPSBmKHMubGVmdClcbiAgICAgIHMgPSBmc3QocmVzdWx0KVxuICAgIH1cbiAgICByZXR1cm4gW3MucmlnaHQsIE0uY29uY2F0KGFjYywgc25kKHJlc3VsdCkpXVxuICB9XG5cbiAgY29uc3QgQyA9IGdldENoYWluKE0pXG4gIHJldHVybiB7XG4gICAgVVJJLFxuICAgIF9FOiB1bmRlZmluZWQgYXMgYW55LFxuICAgIG1hcDogQy5tYXAsXG4gICAgYXA6IEMuYXAsXG4gICAgY2hhaW46IEMuY2hhaW4sXG4gICAgY2hhaW5SZWNcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBub24tcGlwZWFibGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5jb25zdCBfY29tcG9zZTogU2VtaWdyb3Vwb2lkMjxVUkk+Wydjb21wb3NlJ10gPSAoYmMsIGFiKSA9PiBwaXBlKGJjLCBjb21wb3NlKGFiKSlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5jb25zdCBfbWFwOiBGdW5jdG9yMjxVUkk+WydtYXAnXSA9IChmYSwgZikgPT4gcGlwZShmYSwgbWFwRnN0KGYpKVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmNvbnN0IF9iaW1hcDogQmlmdW5jdG9yMjxVUkk+WydiaW1hcCddID0gKGZhLCBmLCBnKSA9PiBwaXBlKGZhLCBiaW1hcChmLCBnKSlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5jb25zdCBfbWFwTGVmdDogQmlmdW5jdG9yMjxVUkk+WydtYXBMZWZ0J10gPSAoZmEsIGYpID0+IHBpcGUoZmEsIG1hcFNuZChmKSlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5jb25zdCBfZXh0ZW5kOiBFeHRlbmQyPFVSST5bJ2V4dGVuZCddID0gKHdhLCBmKSA9PiBwaXBlKHdhLCBleHRlbmQoZikpXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuY29uc3QgX3JlZHVjZTogRm9sZGFibGUyPFVSST5bJ3JlZHVjZSddID0gKGZhLCBiLCBmKSA9PiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuY29uc3QgX2ZvbGRNYXA6IEZvbGRhYmxlMjxVUkk+Wydmb2xkTWFwJ10gPSAoTSkgPT4ge1xuICBjb25zdCBmb2xkTWFwTSA9IGZvbGRNYXAoTSlcbiAgcmV0dXJuIChmYSwgZikgPT4gcGlwZShmYSwgZm9sZE1hcE0oZikpXG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuY29uc3QgX3JlZHVjZVJpZ2h0OiBGb2xkYWJsZTI8VVJJPlsncmVkdWNlUmlnaHQnXSA9IChmYSwgYiwgZikgPT4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuY29uc3QgX3RyYXZlcnNlID0gPEY+KFxuICBGOiBBcHBsaWNhdGl2ZTxGPlxuKTogKDxBLCBTLCBCPih0YTogcmVhZG9ubHkgW0EsIFNdLCBmOiAoYTogQSkgPT4gSEtUPEYsIEI+KSA9PiBIS1Q8RiwgcmVhZG9ubHkgW0IsIFNdPikgPT4ge1xuICBjb25zdCB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKVxuICByZXR1cm4gKHRhLCBmKSA9PiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpXG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHR5cGUgY2xhc3MgbWVtYmVyc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIE1hcCBhIHBhaXIgb2YgZnVuY3Rpb25zIG92ZXIgdGhlIHR3byB0eXBlIGFyZ3VtZW50cyBvZiB0aGUgYmlmdW5jdG9yLlxuICpcbiAqIEBjYXRlZ29yeSBCaWZ1bmN0b3JcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgY29uc3QgYmltYXA6IDxFLCBHLCBBLCBCPihcbiAgbWFwU25kOiAoZTogRSkgPT4gRyxcbiAgbWFwRnN0OiAoYTogQSkgPT4gQlxuKSA9PiAoZmE6IHJlYWRvbmx5IFtBLCBFXSkgPT4gcmVhZG9ubHkgW0IsIEddID0gKGYsIGcpID0+IChmYSkgPT4gW2coZnN0KGZhKSksIGYoc25kKGZhKSldXG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gb3ZlciB0aGUgZmlyc3QgY29tcG9uZW50IG9mIGEgYFJlYWRvbmx5VHVwbGVgLlxuICpcbiAqIFRoaXMgaXMgdGhlIGBtYXBgIG9wZXJhdGlvbiBvZiB0aGUgYEZ1bmN0b3JgIGluc3RhbmNlLlxuICpcbiAqIEBjYXRlZ29yeSBGdW5jdG9yXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBjb25zdCBtYXBGc3Q6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gPEU+KGZhOiByZWFkb25seSBbQSwgRV0pID0+IHJlYWRvbmx5IFtCLCBFXSA9IChmKSA9PiAoZmEpID0+IFtcbiAgZihmc3QoZmEpKSxcbiAgc25kKGZhKVxuXVxuXG4vKipcbiAqIE1hcCBhIGZ1bmN0aW9uIG92ZXIgdGhlIHNlY29uZCBjb21wb25lbnQgb2YgYSBgUmVhZG9ubHlUdXBsZWAuXG4gKlxuICogVGhpcyBpcyB0aGUgYG1hcExlZnRgIG9wZXJhdGlvbiBvZiB0aGUgYEJpZnVuY3RvcmAgaW5zdGFuY2UuXG4gKlxuICogQGNhdGVnb3J5IEJpZnVuY3RvclxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgY29uc3QgbWFwU25kOiA8RSwgRz4oZjogKGU6IEUpID0+IEcpID0+IDxBPihmYTogcmVhZG9ubHkgW0EsIEVdKSA9PiByZWFkb25seSBbQSwgR10gPSAoZikgPT4gKGZhKSA9PiBbXG4gIGZzdChmYSksXG4gIGYoc25kKGZhKSlcbl1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgU2VtaWdyb3Vwb2lkXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbXBvc2U6IDxBLCBCPihhYjogcmVhZG9ubHkgW0IsIEFdKSA9PiA8Qz4oYmM6IHJlYWRvbmx5IFtDLCBCXSkgPT4gcmVhZG9ubHkgW0MsIEFdID0gKGFiKSA9PiAoYmMpID0+IFtcbiAgZnN0KGJjKSxcbiAgc25kKGFiKVxuXVxuXG4vKipcbiAqIEBjYXRlZ29yeSBFeHRlbmRcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgY29uc3QgZXh0ZW5kOiA8RSwgQSwgQj4oZjogKHdhOiByZWFkb25seSBbQSwgRV0pID0+IEIpID0+ICh3YTogcmVhZG9ubHkgW0EsIEVdKSA9PiByZWFkb25seSBbQiwgRV0gPSAoZikgPT4gKFxuICB3YVxuKSA9PiBbZih3YSksIHNuZCh3YSldXG5cbi8qKlxuICogQGNhdGVnb3J5IEV4dHJhY3RcbiAqIEBzaW5jZSAyLjYuMlxuICovXG5leHBvcnQgY29uc3QgZXh0cmFjdDogPEUsIEE+KHdhOiByZWFkb25seSBbQSwgRV0pID0+IEEgPSBmc3RcblxuLyoqXG4gKiBEZXJpdmFibGUgZnJvbSBgRXh0ZW5kYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgY29uc3QgZHVwbGljYXRlOiA8RSwgQT4od2E6IHJlYWRvbmx5IFtBLCBFXSkgPT4gcmVhZG9ubHkgW3JlYWRvbmx5IFtBLCBFXSwgRV0gPVxuICAvKiNfX1BVUkVfXyovXG4gIGV4dGVuZChpZGVudGl0eSlcblxuLyoqXG4gKiBAY2F0ZWdvcnkgRm9sZGFibGVcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgY29uc3QgcmVkdWNlOiA8QSwgQj4oYjogQiwgZjogKGI6IEIsIGE6IEEpID0+IEIpID0+IDxFPihmYTogcmVhZG9ubHkgW0EsIEVdKSA9PiBCID0gKGIsIGYpID0+IChmYSkgPT5cbiAgZihiLCBmc3QoZmEpKVxuXG4vKipcbiAqIEBjYXRlZ29yeSBGb2xkYWJsZVxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBjb25zdCBmb2xkTWFwOiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZjogKGE6IEEpID0+IE0pID0+IDxFPihmYTogcmVhZG9ubHkgW0EsIEVdKSA9PiBNID0gKCkgPT4ge1xuICByZXR1cm4gKGYpID0+IChmYSkgPT4gZihmc3QoZmEpKVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBGb2xkYWJsZVxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBjb25zdCByZWR1Y2VSaWdodDogPEEsIEI+KGI6IEIsIGY6IChhOiBBLCBiOiBCKSA9PiBCKSA9PiA8RT4oZmE6IHJlYWRvbmx5IFtBLCBFXSkgPT4gQiA9IChiLCBmKSA9PiAoZmEpID0+XG4gIGYoZnN0KGZhKSwgYilcblxuLyoqXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IGNvbnN0IHRyYXZlcnNlOiBQaXBlYWJsZVRyYXZlcnNlMjxVUkk+ID0gPEY+KFxuICBGOiBBcHBsaWNhdGl2ZTxGPlxuKTogKDxBLCBCPihmOiAoYTogQSkgPT4gSEtUPEYsIEI+KSA9PiA8RT4oYXM6IHJlYWRvbmx5IFtBLCBFXSkgPT4gSEtUPEYsIHJlYWRvbmx5IFtCLCBFXT4pID0+IHtcbiAgcmV0dXJuIChmKSA9PiAodGEpID0+IEYubWFwKGYoZnN0KHRhKSksIChiKSA9PiBbYiwgc25kKHRhKV0pXG59XG5cbi8qKlxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCBjb25zdCBzZXF1ZW5jZTogVHJhdmVyc2FibGUyPFVSST5bJ3NlcXVlbmNlJ10gPSA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pID0+IDxBLCBFPihcbiAgZmFzOiByZWFkb25seSBbSEtUPEYsIEE+LCBFXVxuKTogSEtUPEYsIHJlYWRvbmx5IFtBLCBFXT4gPT4ge1xuICByZXR1cm4gRi5tYXAoZnN0KGZhcyksIChhKSA9PiBbYSwgc25kKGZhcyldKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGNvbnN0IFVSSSA9ICdSZWFkb25seVR1cGxlJ1xuXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdHlwZSBVUkkgPSB0eXBlb2YgVVJJXG5cbmRlY2xhcmUgbW9kdWxlICcuL0hLVCcge1xuICBpbnRlcmZhY2UgVVJJdG9LaW5kMjxFLCBBPiB7XG4gICAgcmVhZG9ubHkgW1VSSV06IHJlYWRvbmx5IFtBLCBFXVxuICB9XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCBjb25zdCBGdW5jdG9yOiBGdW5jdG9yMjxVUkk+ID0ge1xuICBVUkksXG4gIG1hcDogX21hcFxufVxuXG4vKipcbiAqIERlcml2YWJsZSBmcm9tIGBGdW5jdG9yYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGNvbnN0IGZsYXAgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZsYXBfKEZ1bmN0b3IpXG5cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCBjb25zdCBCaWZ1bmN0b3I6IEJpZnVuY3RvcjI8VVJJPiA9IHtcbiAgVVJJLFxuICBiaW1hcDogX2JpbWFwLFxuICBtYXBMZWZ0OiBfbWFwTGVmdFxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgY29uc3QgU2VtaWdyb3Vwb2lkOiBTZW1pZ3JvdXBvaWQyPFVSST4gPSB7XG4gIFVSSSxcbiAgY29tcG9zZTogX2NvbXBvc2Vcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IGNvbnN0IENvbW9uYWQ6IENvbW9uYWQyPFVSST4gPSB7XG4gIFVSSSxcbiAgbWFwOiBfbWFwLFxuICBleHRlbmQ6IF9leHRlbmQsXG4gIGV4dHJhY3Rcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IGNvbnN0IEZvbGRhYmxlOiBGb2xkYWJsZTI8VVJJPiA9IHtcbiAgVVJJLFxuICByZWR1Y2U6IF9yZWR1Y2UsXG4gIGZvbGRNYXA6IF9mb2xkTWFwLFxuICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCBjb25zdCBUcmF2ZXJzYWJsZTogVHJhdmVyc2FibGUyPFVSST4gPSB7XG4gIFVSSSxcbiAgbWFwOiBfbWFwLFxuICByZWR1Y2U6IF9yZWR1Y2UsXG4gIGZvbGRNYXA6IF9mb2xkTWFwLFxuICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICBzZXF1ZW5jZVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVXNlIFtgbWFwRnN0YF0oI21hcGZzdCkgaW5zdGVhZC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBjb25zdCBtYXA6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gPEU+KGZhOiByZWFkb25seSBbQSwgRV0pID0+IHJlYWRvbmx5IFtCLCBFXSA9IG1hcEZzdFxuXG4vKipcbiAqIFVzZSBbYG1hcFNuZGBdKCNtYXBzbmQpIGluc3RlYWQuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgY29uc3QgbWFwTGVmdDogPEUsIEc+KGY6IChlOiBFKSA9PiBHKSA9PiA8QT4oZmE6IHJlYWRvbmx5IFtBLCBFXSkgPT4gcmVhZG9ubHkgW0EsIEddID0gbWFwU25kXG5cbi8qKlxuICogVXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBjb25zdCByZWFkb25seVR1cGxlOiBTZW1pZ3JvdXBvaWQyPFVSST4gJlxuICBCaWZ1bmN0b3IyPFVSST4gJlxuICBDb21vbmFkMjxVUkk+ICZcbiAgRm9sZGFibGUyPFVSST4gJlxuICBUcmF2ZXJzYWJsZTI8VVJJPiA9IHtcbiAgVVJJLFxuICBjb21wb3NlOiBfY29tcG9zZSxcbiAgbWFwOiBfbWFwLFxuICBiaW1hcDogX2JpbWFwLFxuICBtYXBMZWZ0OiBfbWFwTGVmdCxcbiAgZXh0cmFjdCxcbiAgZXh0ZW5kOiBfZXh0ZW5kLFxuICByZWR1Y2U6IF9yZWR1Y2UsXG4gIGZvbGRNYXA6IF9mb2xkTWFwLFxuICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICBzZXF1ZW5jZVxufVxuIl19