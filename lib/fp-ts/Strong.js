"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fanOut = fanOut;
exports.fanout = fanout;
exports.split = split;
exports.splitStrong = splitStrong;

var _function = require("./function");

/**
 * The `Strong` class extends `Profunctor` with combinators for working with product types.
 *
 * `first` and `second` lift values in a `Profunctor` to act on the first and second components of a tuple,
 * respectively.
 *
 * Another way to think about Strong is to piggyback on the intuition of
 * inputs and outputs.  Rewriting the type signature in this light then yields:
 *
 * ```purescript
 * first ::  forall input output a. p input output -> p (Tuple input a) (Tuple output a)
 * second :: forall input output a. p input output -> p (Tuple a input) (Tuple a output)
 * ```
 *
 * If we specialize the profunctor p to the function arrow, we get the following type
 * signatures, which may look a bit more familiar:
 *
 * ```purescript
 * first ::  forall input output a. (input -> output) -> (Tuple input a) -> (Tuple output a)
 * second :: forall input output a. (input -> output) -> (Tuple a input) -> (Tuple a output)
 * ```
 *
 * So, when the `profunctor` is `Function` application, `first` essentially applies your function
 * to the first element of a tuple, and `second` applies it to the second element (same as `map` would do).
 *
 * Adapted from https://github.com/purescript/purescript-profunctor/blob/master/src/Data/Profunctor/Strong.purs
 *
 * @since 2.0.0
 */
function split(S, C) {
  return function (pab, pcd) {
    return C.compose(S.second(pcd), S.first(pab));
  };
}
/**
 * Compose a value which introduces a tuple from two values, each introducing one side of the tuple.
 *
 * This combinator is useful when assembling values from smaller components, because it provides a way to support two
 * different types of output.
 *
 * Specializing `fanOut` to function application would look like this:
 *
 * ```purescript
 * fanOut :: forall a b c. (a -> b) -> (a -> c) -> (a -> (Tuple b c))
 * ```
 *
 * We take two functions, `f` and `g`, with the same parameter type and we transform them into a single function which
 * takes one parameter and returns a tuple of the results of running `f` and `g` on the parameter, respectively.  This
 * allows us to run two parallel computations on the same input and return both results in a tuple.
 *
 * @since 2.10.0
 */


function fanOut(S, C) {
  var splitSC = split(S, C);
  return function (pab, pac) {
    return C.compose(splitSC(pab, pac), S.promap(C.id(), _function.identity, function (a) {
      return [a, a];
    }));
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------

/**
 * Use [`split`](#split) instead.
 *
 * @since 2.0.0
 * @deprecated
 */


function splitStrong(F) {
  return split(F, F);
}
/**
 * Use [`fanOut`](#fanout) instead.
 *
 * @since 2.0.0
 * @deprecated
 */


function fanout(F) {
  return fanOut(F, F);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9TdHJvbmcudHMiXSwibmFtZXMiOlsic3BsaXQiLCJTIiwiQyIsInBhYiIsInBjZCIsImNvbXBvc2UiLCJzZWNvbmQiLCJmaXJzdCIsImZhbk91dCIsInNwbGl0U0MiLCJwYWMiLCJwcm9tYXAiLCJpZCIsImlkZW50aXR5IiwiYSIsInNwbGl0U3Ryb25nIiwiRiIsImZhbm91dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQThCQTs7QUE5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTRFTyxTQUFTQSxLQUFULENBQ0xDLENBREssRUFFTEMsQ0FGSyxFQUc0RTtBQUNqRixTQUFPLFVBQWFDLEdBQWIsRUFBaUNDLEdBQWpDO0FBQUEsV0FDTEYsQ0FBQyxDQUFDRyxPQUFGLENBQVVKLENBQUMsQ0FBQ0ssTUFBRixDQUFrQkYsR0FBbEIsQ0FBVixFQUFrQ0gsQ0FBQyxDQUFDTSxLQUFGLENBQWlCSixHQUFqQixDQUFsQyxDQURLO0FBQUEsR0FBUDtBQUVEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFpQk8sU0FBU0ssTUFBVCxDQUNMUCxDQURLLEVBRUxDLENBRkssRUFHb0U7QUFDekUsTUFBTU8sT0FBTyxHQUFHVCxLQUFLLENBQUNDLENBQUQsRUFBSUMsQ0FBSixDQUFyQjtBQUNBLFNBQU8sVUFBVUMsR0FBVixFQUE4Qk8sR0FBOUI7QUFBQSxXQUNMUixDQUFDLENBQUNHLE9BQUYsQ0FDRUksT0FBTyxDQUFDTixHQUFELEVBQU1PLEdBQU4sQ0FEVCxFQUVFVCxDQUFDLENBQUNVLE1BQUYsQ0FBMEJULENBQUMsQ0FBQ1UsRUFBRixFQUExQixFQUFxQ0Msa0JBQXJDLEVBQStDLFVBQUNDLENBQUQ7QUFBQSxhQUFPLENBQUNBLENBQUQsRUFBSUEsQ0FBSixDQUFQO0FBQUEsS0FBL0MsQ0FGRixDQURLO0FBQUEsR0FBUDtBQUtELEMsQ0FFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFnQk8sU0FBU0MsV0FBVCxDQUNMQyxDQURLLEVBRTRFO0FBQ2pGLFNBQU9oQixLQUFLLENBQUNnQixDQUFELEVBQUlBLENBQUosQ0FBWjtBQUNEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFnQk8sU0FBU0MsTUFBVCxDQUNMRCxDQURLLEVBRW9FO0FBQ3pFLFNBQU9SLE1BQU0sQ0FBQ1EsQ0FBRCxFQUFJQSxDQUFKLENBQWI7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlIGBTdHJvbmdgIGNsYXNzIGV4dGVuZHMgYFByb2Z1bmN0b3JgIHdpdGggY29tYmluYXRvcnMgZm9yIHdvcmtpbmcgd2l0aCBwcm9kdWN0IHR5cGVzLlxuICpcbiAqIGBmaXJzdGAgYW5kIGBzZWNvbmRgIGxpZnQgdmFsdWVzIGluIGEgYFByb2Z1bmN0b3JgIHRvIGFjdCBvbiB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb21wb25lbnRzIG9mIGEgdHVwbGUsXG4gKiByZXNwZWN0aXZlbHkuXG4gKlxuICogQW5vdGhlciB3YXkgdG8gdGhpbmsgYWJvdXQgU3Ryb25nIGlzIHRvIHBpZ2d5YmFjayBvbiB0aGUgaW50dWl0aW9uIG9mXG4gKiBpbnB1dHMgYW5kIG91dHB1dHMuICBSZXdyaXRpbmcgdGhlIHR5cGUgc2lnbmF0dXJlIGluIHRoaXMgbGlnaHQgdGhlbiB5aWVsZHM6XG4gKlxuICogYGBgcHVyZXNjcmlwdFxuICogZmlyc3QgOjogIGZvcmFsbCBpbnB1dCBvdXRwdXQgYS4gcCBpbnB1dCBvdXRwdXQgLT4gcCAoVHVwbGUgaW5wdXQgYSkgKFR1cGxlIG91dHB1dCBhKVxuICogc2Vjb25kIDo6IGZvcmFsbCBpbnB1dCBvdXRwdXQgYS4gcCBpbnB1dCBvdXRwdXQgLT4gcCAoVHVwbGUgYSBpbnB1dCkgKFR1cGxlIGEgb3V0cHV0KVxuICogYGBgXG4gKlxuICogSWYgd2Ugc3BlY2lhbGl6ZSB0aGUgcHJvZnVuY3RvciBwIHRvIHRoZSBmdW5jdGlvbiBhcnJvdywgd2UgZ2V0IHRoZSBmb2xsb3dpbmcgdHlwZVxuICogc2lnbmF0dXJlcywgd2hpY2ggbWF5IGxvb2sgYSBiaXQgbW9yZSBmYW1pbGlhcjpcbiAqXG4gKiBgYGBwdXJlc2NyaXB0XG4gKiBmaXJzdCA6OiAgZm9yYWxsIGlucHV0IG91dHB1dCBhLiAoaW5wdXQgLT4gb3V0cHV0KSAtPiAoVHVwbGUgaW5wdXQgYSkgLT4gKFR1cGxlIG91dHB1dCBhKVxuICogc2Vjb25kIDo6IGZvcmFsbCBpbnB1dCBvdXRwdXQgYS4gKGlucHV0IC0+IG91dHB1dCkgLT4gKFR1cGxlIGEgaW5wdXQpIC0+IChUdXBsZSBhIG91dHB1dClcbiAqIGBgYFxuICpcbiAqIFNvLCB3aGVuIHRoZSBgcHJvZnVuY3RvcmAgaXMgYEZ1bmN0aW9uYCBhcHBsaWNhdGlvbiwgYGZpcnN0YCBlc3NlbnRpYWxseSBhcHBsaWVzIHlvdXIgZnVuY3Rpb25cbiAqIHRvIHRoZSBmaXJzdCBlbGVtZW50IG9mIGEgdHVwbGUsIGFuZCBgc2Vjb25kYCBhcHBsaWVzIGl0IHRvIHRoZSBzZWNvbmQgZWxlbWVudCAoc2FtZSBhcyBgbWFwYCB3b3VsZCBkbykuXG4gKlxuICogQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9wdXJlc2NyaXB0L3B1cmVzY3JpcHQtcHJvZnVuY3Rvci9ibG9iL21hc3Rlci9zcmMvRGF0YS9Qcm9mdW5jdG9yL1N0cm9uZy5wdXJzXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmltcG9ydCB7IENhdGVnb3J5LCBDYXRlZ29yeTIsIENhdGVnb3J5MywgQ2F0ZWdvcnk0IH0gZnJvbSAnLi9DYXRlZ29yeSdcbmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi9mdW5jdGlvbidcbmltcG9ydCB7IEhLVDIsIEtpbmQyLCBLaW5kMywgVVJJUzIsIFVSSVMzLCBVUklTNCwgS2luZDQgfSBmcm9tICcuL0hLVCdcbmltcG9ydCB7IFByb2Z1bmN0b3IsIFByb2Z1bmN0b3IyLCBQcm9mdW5jdG9yMywgUHJvZnVuY3RvcjQgfSBmcm9tICcuL1Byb2Z1bmN0b3InXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIG1vZGVsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3Ryb25nPEY+IGV4dGVuZHMgUHJvZnVuY3RvcjxGPiB7XG4gIHJlYWRvbmx5IGZpcnN0OiA8QSwgQiwgQz4ocGFiOiBIS1QyPEYsIEEsIEI+KSA9PiBIS1QyPEYsIFtBLCBDXSwgW0IsIENdPlxuICByZWFkb25seSBzZWNvbmQ6IDxBLCBCLCBDPihwYWI6IEhLVDI8RiwgQiwgQz4pID0+IEhLVDI8RiwgW0EsIEJdLCBbQSwgQ10+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3Ryb25nMjxGIGV4dGVuZHMgVVJJUzI+IGV4dGVuZHMgUHJvZnVuY3RvcjI8Rj4ge1xuICByZWFkb25seSBmaXJzdDogPEEsIEIsIEM+KHBhYjogS2luZDI8RiwgQSwgQj4pID0+IEtpbmQyPEYsIFtBLCBDXSwgW0IsIENdPlxuICByZWFkb25seSBzZWNvbmQ6IDxBLCBCLCBDPihwYWI6IEtpbmQyPEYsIEIsIEM+KSA9PiBLaW5kMjxGLCBbQSwgQl0sIFtBLCBDXT5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJvbmczPEYgZXh0ZW5kcyBVUklTMz4gZXh0ZW5kcyBQcm9mdW5jdG9yMzxGPiB7XG4gIHJlYWRvbmx5IGZpcnN0OiA8UiwgQSwgQiwgQz4ocGFiOiBLaW5kMzxGLCBSLCBBLCBCPikgPT4gS2luZDM8RiwgUiwgW0EsIENdLCBbQiwgQ10+XG4gIHJlYWRvbmx5IHNlY29uZDogPFIsIEEsIEIsIEM+KHBhYjogS2luZDM8RiwgUiwgQiwgQz4pID0+IEtpbmQzPEYsIFIsIFtBLCBCXSwgW0EsIENdPlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cm9uZzQ8RiBleHRlbmRzIFVSSVM0PiBleHRlbmRzIFByb2Z1bmN0b3I0PEY+IHtcbiAgcmVhZG9ubHkgZmlyc3Q6IDxTLCBSLCBBLCBCLCBDPihwYWI6IEtpbmQ0PEYsIFMsIFIsIEEsIEI+KSA9PiBLaW5kNDxGLCBTLCBSLCBbQSwgQ10sIFtCLCBDXT5cbiAgcmVhZG9ubHkgc2Vjb25kOiA8UywgUiwgQSwgQiwgQz4ocGFiOiBLaW5kNDxGLCBTLCBSLCBCLCBDPikgPT4gS2luZDQ8RiwgUywgUiwgW0EsIEJdLCBbQSwgQ10+XG59XG5cbi8qKlxuICogQ29tcG9zZSBhIHZhbHVlIGFjdGluZyBvbiBhIHR1cGxlIGZyb20gdHdvIHZhbHVlcywgZWFjaCBhY3Rpbmcgb24gb25lIG9mIHRoZSBjb21wb25lbnRzIG9mIHRoZSB0dXBsZS5cbiAqXG4gKiBTcGVjaWFsaXppbmcgYHNwbGl0YCB0byBmdW5jdGlvbiBhcHBsaWNhdGlvbiB3b3VsZCBsb29rIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBwdXJlc2NyaXB0XG4gKiBzcGxpdCA6OiBmb3JhbGwgYSBiIGMgZC4gKGEgLT4gYikgLT4gKGMgLT4gZCkgLT4gKFR1cGxlIGEgYykgLT4gKFR1cGxlIGIgZClcbiAqIGBgYFxuICpcbiAqIFdlIHRha2UgdHdvIGZ1bmN0aW9ucywgYGZgIGFuZCBgZ2AsIGFuZCB3ZSB0cmFuc2Zvcm0gdGhlbSBpbnRvIGEgc2luZ2xlIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgdHVwbGUgYW5kIG1hcHMgYGZgXG4gKiBvdmVyIHRoZSBmaXJzdCBlbGVtZW50IGFuZCBgZ2Agb3ZlciB0aGUgc2Vjb25kLiAgSnVzdCBsaWtlIGBiaS1tYXBgIHdvdWxkIGRvIGZvciB0aGUgYGJpLWZ1bmN0b3JgIGluc3RhbmNlIG9mIHR1cGxlLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0PEYgZXh0ZW5kcyBVUklTND4oXG4gIFM6IFN0cm9uZzQ8Rj4sXG4gIEM6IENhdGVnb3J5NDxGPlxuKTogPFMsIFIsIEEsIEIsIEMsIEQ+KHBhYjogS2luZDQ8RiwgUywgUiwgQSwgQj4sIHBjZDogS2luZDQ8RiwgUywgUiwgQywgRD4pID0+IEtpbmQ0PEYsIFMsIFIsIFtBLCBDXSwgW0IsIERdPlxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0PEYgZXh0ZW5kcyBVUklTMz4oXG4gIFM6IFN0cm9uZzM8Rj4sXG4gIEM6IENhdGVnb3J5MzxGPlxuKTogPFIsIEEsIEIsIEMsIEQ+KHBhYjogS2luZDM8RiwgUiwgQSwgQj4sIHBjZDogS2luZDM8RiwgUiwgQywgRD4pID0+IEtpbmQzPEYsIFIsIFtBLCBDXSwgW0IsIERdPlxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0PEYgZXh0ZW5kcyBVUklTMj4oXG4gIFM6IFN0cm9uZzI8Rj4sXG4gIEM6IENhdGVnb3J5MjxGPlxuKTogPEEsIEIsIEMsIEQ+KHBhYjogS2luZDI8RiwgQSwgQj4sIHBjZDogS2luZDI8RiwgQywgRD4pID0+IEtpbmQyPEYsIFtBLCBDXSwgW0IsIERdPlxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0PEY+KFxuICBTOiBTdHJvbmc8Rj4sXG4gIEM6IENhdGVnb3J5PEY+XG4pOiA8QSwgQiwgQywgRD4ocGFiOiBIS1QyPEYsIEEsIEI+LCBwY2Q6IEhLVDI8RiwgQywgRD4pID0+IEhLVDI8RiwgW0EsIENdLCBbQiwgRF0+XG5leHBvcnQgZnVuY3Rpb24gc3BsaXQ8Rj4oXG4gIFM6IFN0cm9uZzxGPixcbiAgQzogQ2F0ZWdvcnk8Rj5cbik6IDxBLCBCLCBDLCBEPihwYWI6IEhLVDI8RiwgQSwgQj4sIHBjZDogSEtUMjxGLCBDLCBEPikgPT4gSEtUMjxGLCBbQSwgQ10sIFtCLCBEXT4ge1xuICByZXR1cm4gPEEsIEIsIEMsIEQ+KHBhYjogSEtUMjxGLCBBLCBCPiwgcGNkOiBIS1QyPEYsIEMsIEQ+KSA9PlxuICAgIEMuY29tcG9zZShTLnNlY29uZDxCLCBDLCBEPihwY2QpLCBTLmZpcnN0PEEsIEIsIEM+KHBhYikpXG59XG5cbi8qKlxuICogQ29tcG9zZSBhIHZhbHVlIHdoaWNoIGludHJvZHVjZXMgYSB0dXBsZSBmcm9tIHR3byB2YWx1ZXMsIGVhY2ggaW50cm9kdWNpbmcgb25lIHNpZGUgb2YgdGhlIHR1cGxlLlxuICpcbiAqIFRoaXMgY29tYmluYXRvciBpcyB1c2VmdWwgd2hlbiBhc3NlbWJsaW5nIHZhbHVlcyBmcm9tIHNtYWxsZXIgY29tcG9uZW50cywgYmVjYXVzZSBpdCBwcm92aWRlcyBhIHdheSB0byBzdXBwb3J0IHR3b1xuICogZGlmZmVyZW50IHR5cGVzIG9mIG91dHB1dC5cbiAqXG4gKiBTcGVjaWFsaXppbmcgYGZhbk91dGAgdG8gZnVuY3Rpb24gYXBwbGljYXRpb24gd291bGQgbG9vayBsaWtlIHRoaXM6XG4gKlxuICogYGBgcHVyZXNjcmlwdFxuICogZmFuT3V0IDo6IGZvcmFsbCBhIGIgYy4gKGEgLT4gYikgLT4gKGEgLT4gYykgLT4gKGEgLT4gKFR1cGxlIGIgYykpXG4gKiBgYGBcbiAqXG4gKiBXZSB0YWtlIHR3byBmdW5jdGlvbnMsIGBmYCBhbmQgYGdgLCB3aXRoIHRoZSBzYW1lIHBhcmFtZXRlciB0eXBlIGFuZCB3ZSB0cmFuc2Zvcm0gdGhlbSBpbnRvIGEgc2luZ2xlIGZ1bmN0aW9uIHdoaWNoXG4gKiB0YWtlcyBvbmUgcGFyYW1ldGVyIGFuZCByZXR1cm5zIGEgdHVwbGUgb2YgdGhlIHJlc3VsdHMgb2YgcnVubmluZyBgZmAgYW5kIGBnYCBvbiB0aGUgcGFyYW1ldGVyLCByZXNwZWN0aXZlbHkuICBUaGlzXG4gKiBhbGxvd3MgdXMgdG8gcnVuIHR3byBwYXJhbGxlbCBjb21wdXRhdGlvbnMgb24gdGhlIHNhbWUgaW5wdXQgYW5kIHJldHVybiBib3RoIHJlc3VsdHMgaW4gYSB0dXBsZS5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmYW5PdXQ8RiBleHRlbmRzIFVSSVM0PihcbiAgUzogU3Ryb25nNDxGPixcbiAgQzogQ2F0ZWdvcnk0PEY+XG4pOiA8UywgUiwgQSwgQiwgQz4ocGFiOiBLaW5kNDxGLCBTLCBSLCBBLCBCPiwgcGFjOiBLaW5kNDxGLCBTLCBSLCBBLCBDPikgPT4gS2luZDQ8RiwgUywgUiwgQSwgW0IsIENdPlxuZXhwb3J0IGZ1bmN0aW9uIGZhbk91dDxGIGV4dGVuZHMgVVJJUzM+KFxuICBTOiBTdHJvbmczPEY+LFxuICBDOiBDYXRlZ29yeTM8Rj5cbik6IDxSLCBBLCBCLCBDPihwYWI6IEtpbmQzPEYsIFIsIEEsIEI+LCBwYWM6IEtpbmQzPEYsIFIsIEEsIEM+KSA9PiBLaW5kMzxGLCBSLCBBLCBbQiwgQ10+XG5leHBvcnQgZnVuY3Rpb24gZmFuT3V0PEYgZXh0ZW5kcyBVUklTMj4oXG4gIFM6IFN0cm9uZzI8Rj4sXG4gIEM6IENhdGVnb3J5MjxGPlxuKTogPEEsIEIsIEM+KHBhYjogS2luZDI8RiwgQSwgQj4sIHBhYzogS2luZDI8RiwgQSwgQz4pID0+IEtpbmQyPEYsIEEsIFtCLCBDXT5cbmV4cG9ydCBmdW5jdGlvbiBmYW5PdXQ8Rj4oXG4gIFM6IFN0cm9uZzxGPixcbiAgQzogQ2F0ZWdvcnk8Rj5cbik6IDxBLCBCLCBDPihwYWI6IEhLVDI8RiwgQSwgQj4sIHBhYzogSEtUMjxGLCBBLCBDPikgPT4gSEtUMjxGLCBBLCBbQiwgQ10+XG5leHBvcnQgZnVuY3Rpb24gZmFuT3V0PEY+KFxuICBTOiBTdHJvbmc8Rj4sXG4gIEM6IENhdGVnb3J5PEY+XG4pOiA8QSwgQiwgQz4ocGFiOiBIS1QyPEYsIEEsIEI+LCBwYWM6IEhLVDI8RiwgQSwgQz4pID0+IEhLVDI8RiwgQSwgW0IsIENdPiB7XG4gIGNvbnN0IHNwbGl0U0MgPSBzcGxpdChTLCBDKVxuICByZXR1cm4gPEEsIEIsIEM+KHBhYjogSEtUMjxGLCBBLCBCPiwgcGFjOiBIS1QyPEYsIEEsIEM+KTogSEtUMjxGLCBBLCBbQiwgQ10+ID0+XG4gICAgQy5jb21wb3NlKFxuICAgICAgc3BsaXRTQyhwYWIsIHBhYyksXG4gICAgICBTLnByb21hcDxBLCBBLCBBLCBbQSwgQV0+KEMuaWQ8QT4oKSwgaWRlbnRpdHksIChhKSA9PiBbYSwgYV0pXG4gICAgKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVXNlIFtgc3BsaXRgXSgjc3BsaXQpIGluc3RlYWQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTdHJvbmc8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogQ2F0ZWdvcnk0PEY+ICYgU3Ryb25nNDxGPlxuKTogPFMsIFIsIEEsIEIsIEMsIEQ+KHBhYjogS2luZDQ8RiwgUywgUiwgQSwgQj4sIHBjZDogS2luZDQ8RiwgUywgUiwgQywgRD4pID0+IEtpbmQ0PEYsIFMsIFIsIFtBLCBDXSwgW0IsIERdPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTdHJvbmc8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogQ2F0ZWdvcnkzPEY+ICYgU3Ryb25nMzxGPlxuKTogPFIsIEEsIEIsIEMsIEQ+KHBhYjogS2luZDM8RiwgUiwgQSwgQj4sIHBjZDogS2luZDM8RiwgUiwgQywgRD4pID0+IEtpbmQzPEYsIFIsIFtBLCBDXSwgW0IsIERdPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTdHJvbmc8RiBleHRlbmRzIFVSSVMyPihcbiAgRjogQ2F0ZWdvcnkyPEY+ICYgU3Ryb25nMjxGPlxuKTogPEEsIEIsIEMsIEQ+KHBhYjogS2luZDI8RiwgQSwgQj4sIHBjZDogS2luZDI8RiwgQywgRD4pID0+IEtpbmQyPEYsIFtBLCBDXSwgW0IsIERdPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTdHJvbmc8Rj4oXG4gIEY6IENhdGVnb3J5PEY+ICYgU3Ryb25nPEY+XG4pOiA8QSwgQiwgQywgRD4ocGFiOiBIS1QyPEYsIEEsIEI+LCBwY2Q6IEhLVDI8RiwgQywgRD4pID0+IEhLVDI8RiwgW0EsIENdLCBbQiwgRF0+XG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTdHJvbmc8Rj4oXG4gIEY6IENhdGVnb3J5PEY+ICYgU3Ryb25nPEY+XG4pOiA8QSwgQiwgQywgRD4ocGFiOiBIS1QyPEYsIEEsIEI+LCBwY2Q6IEhLVDI8RiwgQywgRD4pID0+IEhLVDI8RiwgW0EsIENdLCBbQiwgRF0+IHtcbiAgcmV0dXJuIHNwbGl0KEYsIEYpXG59XG5cbi8qKlxuICogVXNlIFtgZmFuT3V0YF0oI2Zhbm91dCkgaW5zdGVhZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmYW5vdXQ8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogQ2F0ZWdvcnk0PEY+ICYgU3Ryb25nNDxGPlxuKTogPFMsIFIsIEEsIEIsIEM+KHBhYjogS2luZDQ8RiwgUywgUiwgQSwgQj4sIHBhYzogS2luZDQ8RiwgUywgUiwgQSwgQz4pID0+IEtpbmQ0PEYsIFMsIFIsIEEsIFtCLCBDXT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhbm91dDxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBDYXRlZ29yeTM8Rj4gJiBTdHJvbmczPEY+XG4pOiA8UiwgQSwgQiwgQz4ocGFiOiBLaW5kMzxGLCBSLCBBLCBCPiwgcGFjOiBLaW5kMzxGLCBSLCBBLCBDPikgPT4gS2luZDM8RiwgUiwgQSwgW0IsIENdPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZmFub3V0PEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IENhdGVnb3J5MjxGPiAmIFN0cm9uZzI8Rj5cbik6IDxBLCBCLCBDPihwYWI6IEtpbmQyPEYsIEEsIEI+LCBwYWM6IEtpbmQyPEYsIEEsIEM+KSA9PiBLaW5kMjxGLCBBLCBbQiwgQ10+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBmYW5vdXQ8Rj4oXG4gIEY6IENhdGVnb3J5PEY+ICYgU3Ryb25nPEY+XG4pOiA8QSwgQiwgQz4ocGFiOiBIS1QyPEYsIEEsIEI+LCBwYWM6IEhLVDI8RiwgQSwgQz4pID0+IEhLVDI8RiwgQSwgW0IsIENdPlxuZXhwb3J0IGZ1bmN0aW9uIGZhbm91dDxGPihcbiAgRjogQ2F0ZWdvcnk8Rj4gJiBTdHJvbmc8Rj5cbik6IDxBLCBCLCBDPihwYWI6IEhLVDI8RiwgQSwgQj4sIHBhYzogSEtUMjxGLCBBLCBDPikgPT4gSEtUMjxGLCBBLCBbQiwgQ10+IHtcbiAgcmV0dXJuIGZhbk91dChGLCBGKVxufVxuIl19