"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ap = ap;
exports.bimap = bimap;
exports.both = both;
exports.chain = chain;
exports.getTheseM = getTheseM;
exports.left = left;
exports.leftF = leftF;
exports.map = map;
exports.mapLeft = mapLeft;
exports.match = match;
exports.matchE = matchE;
exports.right = right;
exports.rightF = rightF;
exports.swap = swap;
exports.toTuple2 = toTuple2;

var _Apply = require("./Apply");

var _function = require("./function");

var _Functor = require("./Functor");

var T = _interopRequireWildcard(require("./These"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * @since 2.4.0
 */
var These = T.These;
/**
 * @since 2.10.0
 */

function right(F) {
  return (0, _function.flow)(T.right, F.of);
}
/**
 * @since 2.10.0
 */


function left(F) {
  return (0, _function.flow)(T.left, F.of);
}
/**
 * @since 2.10.0
 */


function both(F) {
  return (0, _function.flow)(T.both, F.of);
}
/**
 * @since 2.10.0
 */


function rightF(F) {
  return function (fa) {
    return F.map(fa, T.right);
  };
}
/**
 * @since 2.10.0
 */


function leftF(F) {
  return function (fe) {
    return F.map(fe, T.left);
  };
}
/**
 * @since 2.10.0
 */


function map(F) {
  return (0, _Functor.map)(F, T.Functor);
}
/**
 * @since 2.10.0
 */


function ap(F, S) {
  return (0, _Apply.ap)(F, T.getApply(S));
}
/**
 * @since 2.10.0
 */


function chain(M, S) {
  var _left = left(M);

  return function (f) {
    return function (ma) {
      return M.chain(ma, T.match(_left, f, function (e1, a) {
        return M.map(f(a), T.match(function (e2) {
          return T.left(S.concat(e1, e2));
        }, function (b) {
          return T.both(e1, b);
        }, function (e2, b) {
          return T.both(S.concat(e1, e2), b);
        }));
      }));
    };
  };
}
/**
 * @since 2.10.0
 */


function bimap(F) {
  return function (f, g) {
    return function (fea) {
      return F.map(fea, T.bimap(f, g));
    };
  };
}
/**
 * @since 2.10.0
 */


function mapLeft(F) {
  return function (f) {
    return function (fea) {
      return F.map(fea, T.mapLeft(f));
    };
  };
}
/**
 * @since 2.10.0
 */


function match(F) {
  return function (onLeft, onRight, onBoth) {
    return function (ma) {
      return F.map(ma, T.match(onLeft, onRight, onBoth));
    };
  };
}
/**
 * @since 2.10.0
 */


function matchE(M) {
  return function (onLeft, onRight, onBoth) {
    return function (ma) {
      return M.chain(ma, T.match(onLeft, onRight, onBoth));
    };
  };
}
/**
 * @since 2.10.0
 */


function swap(F) {
  return function (ma) {
    return F.map(ma, T.swap);
  };
}
/**
 * @since 2.10.0
 */


function toTuple2(F) {
  return function (e, a) {
    return function (fa) {
      return F.map(fa, T.toTuple2(e, a));
    };
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @category model
 * @since 2.4.0
 * @deprecated
 */


/** @deprecated */

/* istanbul ignore next */
function getTheseM(M) {
  var _map = map(M);

  var _bimap = bimap(M);

  var _mapLeft = mapLeft(M);

  var _fold = matchE(M);

  var _toTuple2 = toTuple2(M);

  var of = right(M);

  var mapT = function mapT(fa, f) {
    return (0, _function.pipe)(fa, _map(f));
  };

  return {
    map: mapT,
    bimap: function bimap(fea, f, g) {
      return (0, _function.pipe)(fea, _bimap(f, g));
    },
    mapLeft: function mapLeft(fea, f) {
      return (0, _function.pipe)(fea, _mapLeft(f));
    },
    fold: function fold(fa, onLeft, onRight, onBoth) {
      return (0, _function.pipe)(fa, _fold(onLeft, onRight, onBoth));
    },
    swap: swap(M),
    rightM: rightF(M),
    leftM: leftF(M),
    left: left(M),
    right: right(M),
    both: both(M),
    toTuple: function toTuple(fa, e, a) {
      return (0, _function.pipe)(fa, _toTuple2(function () {
        return e;
      }, function () {
        return a;
      }));
    },
    getMonad: function getMonad(S) {
      var _ap = ap(M, S);

      var _chain = chain(M, S);

      return {
        _E: undefined,
        map: mapT,
        of: of,
        ap: function ap(fab, fa) {
          return (0, _function.pipe)(fab, _ap(fa));
        },
        chain: function chain(ma, f) {
          return (0, _function.pipe)(ma, _chain(f));
        }
      };
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9UaGVzZVQudHMiXSwibmFtZXMiOlsiVGhlc2UiLCJUIiwicmlnaHQiLCJGIiwib2YiLCJsZWZ0IiwiYm90aCIsInJpZ2h0RiIsImZhIiwibWFwIiwibGVmdEYiLCJmZSIsIkZ1bmN0b3IiLCJhcCIsIlMiLCJnZXRBcHBseSIsImNoYWluIiwiTSIsIl9sZWZ0IiwiZiIsIm1hIiwibWF0Y2giLCJlMSIsImEiLCJlMiIsImNvbmNhdCIsImIiLCJiaW1hcCIsImciLCJmZWEiLCJtYXBMZWZ0Iiwib25MZWZ0Iiwib25SaWdodCIsIm9uQm90aCIsIm1hdGNoRSIsInN3YXAiLCJ0b1R1cGxlMiIsImUiLCJnZXRUaGVzZU0iLCJfbWFwIiwiX2JpbWFwIiwiX21hcExlZnQiLCJfZm9sZCIsIl90b1R1cGxlMiIsIm1hcFQiLCJmb2xkIiwicmlnaHRNIiwibGVmdE0iLCJ0b1R1cGxlIiwiZ2V0TW9uYWQiLCJfYXAiLCJfY2hhaW4iLCJfRSIsInVuZGVmaW5lZCIsImZhYiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7QUFFQTs7QUFDQTs7QUFLQTs7Ozs7O0FBWEE7QUFDQTtBQUNBO0lBV09BLEssR0FBUUMsQyxDQUFFRCxLO0FBRWpCO0FBQ0E7QUFDQTs7QUFPTyxTQUFTRSxLQUFULENBQWtCQyxDQUFsQixFQUE4RTtBQUNuRixTQUFPLG9CQUFLRixDQUFDLENBQUNDLEtBQVAsRUFBY0MsQ0FBQyxDQUFDQyxFQUFoQixDQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7OztBQU9PLFNBQVNDLElBQVQsQ0FBaUJGLENBQWpCLEVBQTZFO0FBQ2xGLFNBQU8sb0JBQUtGLENBQUMsQ0FBQ0ksSUFBUCxFQUFhRixDQUFDLENBQUNDLEVBQWYsQ0FBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBOzs7QUFPTyxTQUFTRSxJQUFULENBQWlCSCxDQUFqQixFQUFtRjtBQUN4RixTQUFPLG9CQUFLRixDQUFDLENBQUNLLElBQVAsRUFBYUgs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LE9BQVA7QUFPRDtBQTdCSSxHQUFQO0FBK0JEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAc2luY2UgMi40LjBcbiAqL1xuaW1wb3J0IHsgYXAgYXMgYXBfLCBBcHBseSwgQXBwbHkxLCBBcHBseTIsIEFwcGx5MkMsIEFwcGx5MywgQXBwbHkzQyB9IGZyb20gJy4vQXBwbHknXG5pbXBvcnQgeyBDaGFpbiwgQ2hhaW4xLCBDaGFpbjIsIENoYWluMkMsIENoYWluMywgQ2hhaW4zQyB9IGZyb20gJy4vQ2hhaW4nXG5pbXBvcnQgeyBmbG93LCBMYXp5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbidcbmltcG9ydCB7IEZ1bmN0b3IsIEZ1bmN0b3IxLCBGdW5jdG9yMiwgRnVuY3RvcjJDLCBGdW5jdG9yMywgRnVuY3RvcjNDLCBtYXAgYXMgbWFwXyB9IGZyb20gJy4vRnVuY3RvcidcbmltcG9ydCB7IEhLVCwgS2luZCwgS2luZDIsIEtpbmQzLCBVUklTLCBVUklTMiwgVVJJUzMgfSBmcm9tICcuL0hLVCdcbmltcG9ydCB7IE1vbmFkLCBNb25hZDEsIE1vbmFkMiwgTW9uYWQyQywgTW9uYWQzLCBNb25hZDNDIH0gZnJvbSAnLi9Nb25hZCdcbmltcG9ydCB7IFBvaW50ZWQsIFBvaW50ZWQxLCBQb2ludGVkMiwgUG9pbnRlZDJDLCBQb2ludGVkMywgUG9pbnRlZDNDIH0gZnJvbSAnLi9Qb2ludGVkJ1xuaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSAnLi9TZW1pZ3JvdXAnXG5pbXBvcnQgKiBhcyBUIGZyb20gJy4vVGhlc2UnXG5cbmltcG9ydCBUaGVzZSA9IFQuVGhlc2VcblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByaWdodDxGIGV4dGVuZHMgVVJJUzM+KEY6IFBvaW50ZWQzPEY+KTogPEEsIFIsIEZFLCBFID0gbmV2ZXI+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiByaWdodDxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBQb2ludGVkM0M8RiwgRkU+KTogPEEsIFIsIEUgPSBuZXZlcj4oYTogQSkgPT4gS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0PEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8QSwgRkUsIEUgPSBuZXZlcj4oYTogQSkgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0PEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IFBvaW50ZWQyQzxGLCBGRT4pOiA8QSwgRSA9IG5ldmVyPihhOiBBKSA9PiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gcmlnaHQ8RiBleHRlbmRzIFVSSVM+KEY6IFBvaW50ZWQxPEY+KTogPEEsIEUgPSBuZXZlcj4oYTogQSkgPT4gS2luZDxGLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiByaWdodDxGPihGOiBQb2ludGVkPEY+KTogPEEsIEUgPSBuZXZlcj4oYTogQSkgPT4gSEtUPEYsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0PEY+KEY6IFBvaW50ZWQ8Rj4pOiA8QSwgRSA9IG5ldmVyPihhOiBBKSA9PiBIS1Q8RiwgVGhlc2U8RSwgQT4+IHtcbiAgcmV0dXJuIGZsb3coVC5yaWdodCwgRi5vZilcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0PEYgZXh0ZW5kcyBVUklTMz4oRjogUG9pbnRlZDM8Rj4pOiA8RSwgUiwgRkUsIEEgPSBuZXZlcj4oZTogRSkgPT4gS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGxlZnQ8RiBleHRlbmRzIFVSSVMzLCBGRT4oRjogUG9pbnRlZDNDPEYsIEZFPik6IDxFLCBSLCBBID0gbmV2ZXI+KGU6IEUpID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0PEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8RSwgRkUsIEEgPSBuZXZlcj4oZTogRSkgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGxlZnQ8RiBleHRlbmRzIFVSSVMyLCBGRT4oRjogUG9pbnRlZDJDPEYsIEZFPik6IDxFLCBBID0gbmV2ZXI+KGU6IEUpID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0PEYgZXh0ZW5kcyBVUklTPihGOiBQb2ludGVkMTxGPik6IDxFLCBBID0gbmV2ZXI+KGU6IEUpID0+IEtpbmQ8RiwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gbGVmdDxGPihGOiBQb2ludGVkPEY+KTogPEUsIEEgPSBuZXZlcj4oZTogRSkgPT4gSEtUPEYsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGxlZnQ8Rj4oRjogUG9pbnRlZDxGPik6IDxFLCBBID0gbmV2ZXI+KGU6IEUpID0+IEhLVDxGLCBUaGVzZTxFLCBBPj4ge1xuICByZXR1cm4gZmxvdyhULmxlZnQsIEYub2YpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gYm90aDxGIGV4dGVuZHMgVVJJUzM+KEY6IFBvaW50ZWQzPEY+KTogPEUsIEEsIFIsIEZFPihlOiBFLCBhOiBBKSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gYm90aDxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBQb2ludGVkM0M8RiwgRkU+KTogPEUsIEEsIFI+KGU6IEUsIGE6IEEpID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBib3RoPEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8RSwgQSwgRkU+KGU6IEUsIGE6IEEpID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBib3RoPEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IFBvaW50ZWQyQzxGLCBGRT4pOiA8RSwgQT4oZTogRSwgYTogQSkgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGJvdGg8RiBleHRlbmRzIFVSSVM+KEY6IFBvaW50ZWQxPEY+KTogPEUsIEE+KGU6IEUsIGE6IEEpID0+IEtpbmQ8RiwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gYm90aDxGPihGOiBQb2ludGVkPEY+KTogPEUsIEEgPSBuZXZlcj4oZTogRSwgYTogQSkgPT4gSEtUPEYsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGJvdGg8Rj4oRjogUG9pbnRlZDxGPik6IDxFLCBBID0gbmV2ZXI+KGU6IEUsIGE6IEEpID0+IEhLVDxGLCBUaGVzZTxFLCBBPj4ge1xuICByZXR1cm4gZmxvdyhULmJvdGgsIEYub2YpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmlnaHRGPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IEZ1bmN0b3IzPEY+XG4pOiA8UiwgRkUsIEEsIEUgPSBuZXZlcj4oZmE6IEtpbmQzPEYsIFIsIEZFLCBBPikgPT4gS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0RjxGIGV4dGVuZHMgVVJJUzMsIEZFPihcbiAgRjogRnVuY3RvcjNDPEYsIEZFPlxuKTogPFIsIEEsIEUgPSBuZXZlcj4oZmE6IEtpbmQzPEYsIFIsIEZFLCBBPikgPT4gS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0RjxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEZFLCBBLCBFID0gbmV2ZXI+KGZhOiBLaW5kMjxGLCBGRSwgQT4pID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiByaWdodEY8RiBleHRlbmRzIFVSSVMyLCBGRT4oXG4gIEY6IEZ1bmN0b3IyQzxGLCBGRT5cbik6IDxBLCBFID0gbmV2ZXI+KGZhOiBLaW5kMjxGLCBGRSwgQT4pID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiByaWdodEY8RiBleHRlbmRzIFVSSVM+KEY6IEZ1bmN0b3IxPEY+KTogPEEsIEUgPSBuZXZlcj4oZmE6IEtpbmQ8RiwgQT4pID0+IEtpbmQ8RiwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gcmlnaHRGPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QSwgRSA9IG5ldmVyPihmYTogSEtUPEYsIEE+KSA9PiBIS1Q8RiwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gcmlnaHRGPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QSwgRSA9IG5ldmVyPihmYTogSEtUPEYsIEE+KSA9PiBIS1Q8RiwgVGhlc2U8RSwgQT4+IHtcbiAgcmV0dXJuIChmYSkgPT4gRi5tYXAoZmEsIFQucmlnaHQpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVmdEY8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnVuY3RvcjM8Rj5cbik6IDxSLCBGRSwgRSwgQSA9IG5ldmVyPihmZTogS2luZDM8RiwgUiwgRkUsIEU+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gbGVmdEY8RiBleHRlbmRzIFVSSVMzLCBGRT4oXG4gIEY6IEZ1bmN0b3IzQzxGLCBGRT5cbik6IDxSLCBFLCBBID0gbmV2ZXI+KGZlOiBLaW5kMzxGLCBSLCBGRSwgRT4pID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0RjxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEZFLCBFLCBBID0gbmV2ZXI+KGZlOiBLaW5kMjxGLCBGRSwgRT4pID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0RjxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogRnVuY3RvcjJDPEYsIEZFPlxuKTogPEUsIEEgPSBuZXZlcj4oZmU6IEtpbmQyPEYsIEZFLCBFPikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGxlZnRGPEYgZXh0ZW5kcyBVUklTPihGOiBGdW5jdG9yMTxGPik6IDxFLCBBID0gbmV2ZXI+KGZlOiBLaW5kPEYsIEU+KSA9PiBLaW5kPEYsIFRoZXNlPEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGxlZnRGPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8RSwgQSA9IG5ldmVyPihmZTogSEtUPEYsIEU+KSA9PiBIS1Q8RiwgVGhlc2U8RSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gbGVmdEY8Rj4oRjogRnVuY3RvcjxGPik6IDxFLCBBID0gbmV2ZXI+KGZlOiBIS1Q8RiwgRT4pID0+IEhLVDxGLCBUaGVzZTxFLCBBPj4ge1xuICByZXR1cm4gKGZlKSA9PiBGLm1hcChmZSwgVC5sZWZ0KVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGdW5jdG9yMzxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8UiwgRkUsIEU+KGZhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEYgZXh0ZW5kcyBVUklTMywgRkU+KFxuICBGOiBGdW5jdG9yM0M8RiwgRkU+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxSLCBFPihmYTogS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8RkUsIEU+KGZhOiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEYgZXh0ZW5kcyBVUklTMiwgRkU+KFxuICBGOiBGdW5jdG9yMkM8RiwgRkU+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxFPihmYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxFPihmYTogS2luZDxGLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQ8RiwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxFPihmYTogSEtUPEYsIFRoZXNlPEUsIEE+PikgPT4gSEtUPEYsIFRoZXNlPEUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGPihGOiBGdW5jdG9yPEY+KTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8RT4oZmE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCBUaGVzZTxFLCBCPj4ge1xuICByZXR1cm4gbWFwXyhGLCBULkZ1bmN0b3IpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogQXBwbHkzPEY+LFxuICBTOiBTZW1pZ3JvdXA8RT5cbik6IDxSLCBGRSwgQT4oXG4gIGZhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+XG4pID0+IDxCPihmYWI6IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCAoYTogQSkgPT4gQj4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVMzLCBGRSwgRT4oXG4gIEY6IEFwcGx5M0M8RiwgRkU+LFxuICBTOiBTZW1pZ3JvdXA8RT5cbik6IDxSLCBBPihcbiAgZmE6IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj5cbikgPT4gPEI+KGZhYjogS2luZDM8RiwgUiwgRkUsIFRoZXNlPEUsIChhOiBBKSA9PiBCPj4pID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBBcHBseTI8Rj4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEZFLCBBPihmYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gPEI+KGZhYjogS2luZDI8RiwgRkUsIFRoZXNlPEUsIChhOiBBKSA9PiBCPj4pID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUzIsIEZFLCBFPihcbiAgRjogQXBwbHkyQzxGLCBGRT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEE+KGZhOiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiA8Qj4oZmFiOiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgKGE6IEEpID0+IEI+PikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYgZXh0ZW5kcyBVUklTLCBFPihcbiAgRjogQXBwbHkxPEY+LFxuICBTOiBTZW1pZ3JvdXA8RT5cbik6IDxBPihmYTogS2luZDxGLCBUaGVzZTxFLCBBPj4pID0+IDxCPihmYWI6IEtpbmQ8RiwgVGhlc2U8RSwgKGE6IEEpID0+IEI+PikgPT4gS2luZDxGLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGLCBFPihcbiAgRjogQXBwbHk8Rj4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEE+KGZhOiBIS1Q8RiwgVGhlc2U8RSwgQT4+KSA9PiA8Qj4oZmFiOiBIS1Q8RiwgVGhlc2U8RSwgKGE6IEEpID0+IEI+PikgPT4gSEtUPEYsIFRoZXNlPEUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYsIEU+KFxuICBGOiBBcHBseTxGPixcbiAgUzogU2VtaWdyb3VwPEU+XG4pOiA8QT4oZmE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IDxCPihmYWI6IEhLVDxGLCBUaGVzZTxFLCAoYTogQSkgPT4gQj4+KSA9PiBIS1Q8RiwgVGhlc2U8RSwgQj4+IHtcbiAgcmV0dXJuIGFwXyhGLCBULmdldEFwcGx5KFMpKVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoYWluPE0gZXh0ZW5kcyBVUklTMywgRT4oXG4gIE06IE1vbmFkMzxNPixcbiAgUzogU2VtaWdyb3VwPEU+XG4pOiA8QSwgUiwgTUUsIEI+KFxuICBmOiAoYTogQSkgPT4gS2luZDM8TSwgUiwgTUUsIFRoZXNlPEUsIEI+PlxuKSA9PiAobWE6IEtpbmQzPE0sIFIsIE1FLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPE0sIFIsIE1FLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNIGV4dGVuZHMgVVJJUzMsIE1FLCBFPihcbiAgTTogTW9uYWQzQzxNLCBNRT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEEsIFIsIEI+KFxuICBmOiAoYTogQSkgPT4gS2luZDM8TSwgUiwgTUUsIFRoZXNlPEUsIEI+PlxuKSA9PiAobWE6IEtpbmQzPE0sIFIsIE1FLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPE0sIFIsIE1FLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBNOiBNb25hZDI8TT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEEsIE1FLCBCPihmOiAoYTogQSkgPT4gS2luZDI8TSwgTUUsIFRoZXNlPEUsIEI+PikgPT4gKG1hOiBLaW5kMjxNLCBNRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMjxNLCBNRSwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMyLCBNRSwgRT4oXG4gIE06IE1vbmFkMkM8TSwgTUU+LFxuICBTOiBTZW1pZ3JvdXA8RT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gS2luZDI8TSwgTUUsIFRoZXNlPEUsIEI+PikgPT4gKG1hOiBLaW5kMjxNLCBNRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMjxNLCBNRSwgVGhlc2U8RSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMsIEU+KFxuICBNOiBNb25hZDE8TT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBLaW5kPE0sIFRoZXNlPEUsIEI+PikgPT4gKG1hOiBLaW5kPE0sIFRoZXNlPEUsIEE+PikgPT4gS2luZDxNLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNLCBFPihcbiAgTTogTW9uYWQ8TT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBIS1Q8TSwgVGhlc2U8RSwgQj4+KSA9PiAobWE6IEhLVDxNLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxNLCBUaGVzZTxFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNLCBFPihcbiAgTTogTW9uYWQ8TT4sXG4gIFM6IFNlbWlncm91cDxFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBIS1Q8TSwgVGhlc2U8RSwgQj4+KSA9PiAobWE6IEhLVDxNLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxNLCBUaGVzZTxFLCBCPj4ge1xuICBjb25zdCBfbGVmdCA9IGxlZnQoTSlcbiAgcmV0dXJuIChmKSA9PiAobWEpID0+XG4gICAgTS5jaGFpbihcbiAgICAgIG1hLFxuICAgICAgVC5tYXRjaChfbGVmdCwgZiwgKGUxLCBhKSA9PlxuICAgICAgICBNLm1hcChcbiAgICAgICAgICBmKGEpLFxuICAgICAgICAgIFQubWF0Y2goXG4gICAgICAgICAgICAoZTIpID0+IFQubGVmdChTLmNvbmNhdChlMSwgZTIpKSxcbiAgICAgICAgICAgIChiKSA9PiBULmJvdGgoZTEsIGIpLFxuICAgICAgICAgICAgKGUyLCBiKSA9PiBULmJvdGgoUy5jb25jYXQoZTEsIGUyKSwgYilcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gYmltYXA8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnVuY3RvcjM8Rj5cbik6IDxFLCBHLCBBLCBCPihcbiAgZjogKGU6IEUpID0+IEcsXG4gIGc6IChhOiBBKSA9PiBCXG4pID0+IDxSLCBGRT4oZmVhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RywgQj4+XG5leHBvcnQgZnVuY3Rpb24gYmltYXA8RiBleHRlbmRzIFVSSVMzLCBGRT4oXG4gIEY6IEZ1bmN0b3IzQzxGLCBGRT5cbik6IDxFLCBHLCBBLCBCPihcbiAgZjogKGU6IEUpID0+IEcsXG4gIGc6IChhOiBBKSA9PiBCXG4pID0+IDxSPihmZWE6IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxHLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBiaW1hcDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEUsIEcsIEEsIEI+KGY6IChlOiBFKSA9PiBHLCBnOiAoYTogQSkgPT4gQikgPT4gPEZFPihmZWE6IEtpbmQyPEYsIEZFLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQyPEYsIEZFLCBUaGVzZTxHLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBiaW1hcDxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogRnVuY3RvcjJDPEYsIEZFPlxuKTogPEUsIEcsIEEsIEI+KGY6IChlOiBFKSA9PiBHLCBnOiAoYTogQSkgPT4gQikgPT4gKGZlYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEcsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGJpbWFwPEYgZXh0ZW5kcyBVUklTPihcbiAgRjogRnVuY3RvcjE8Rj5cbik6IDxFLCBHLCBBLCBCPihmOiAoZTogRSkgPT4gRywgZzogKGE6IEEpID0+IEIpID0+IChmZWE6IEtpbmQ8RiwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kPEYsIFRoZXNlPEcsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGJpbWFwPEY+KFxuICBGOiBGdW5jdG9yPEY+XG4pOiA8RSwgRywgQSwgQj4oZjogKGU6IEUpID0+IEcsIGc6IChhOiBBKSA9PiBCKSA9PiAoZmVhOiBIS1Q8RiwgVGhlc2U8RSwgQT4+KSA9PiBIS1Q8RiwgVGhlc2U8RywgQj4+XG5leHBvcnQgZnVuY3Rpb24gYmltYXA8Rj4oXG4gIEY6IEZ1bmN0b3I8Rj5cbik6IDxFLCBHLCBBLCBCPihmOiAoZTogRSkgPT4gRywgZzogKGE6IEEpID0+IEIpID0+IChmZWE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCBUaGVzZTxHLCBCPj4ge1xuICByZXR1cm4gKGYsIGcpID0+IChmZWEpID0+IEYubWFwKGZlYSwgVC5iaW1hcChmLCBnKSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBMZWZ0PEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IEZ1bmN0b3IzPEY+XG4pOiA8RSwgRz4oZjogKGU6IEUpID0+IEcpID0+IDxSLCBGRSwgQT4oZmVhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RywgQT4+XG5leHBvcnQgZnVuY3Rpb24gbWFwTGVmdDxGIGV4dGVuZHMgVVJJUzMsIEZFPihcbiAgRjogRnVuY3RvcjNDPEYsIEZFPlxuKTogPEUsIEc+KGY6IChlOiBFKSA9PiBHKSA9PiA8UiwgQT4oZmVhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RywgQT4+XG5leHBvcnQgZnVuY3Rpb24gbWFwTGVmdDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEUsIEc+KGY6IChlOiBFKSA9PiBHKSA9PiA8RkUsIEE+KGZlYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEcsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcExlZnQ8RiBleHRlbmRzIFVSSVMyLCBGRT4oXG4gIEY6IEZ1bmN0b3IyQzxGLCBGRT5cbik6IDxFLCBHPihmOiAoZTogRSkgPT4gRykgPT4gPEE+KGZlYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIFRoZXNlPEcsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcExlZnQ8RiBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPlxuKTogPEUsIEc+KGY6IChlOiBFKSA9PiBHKSA9PiA8QT4oZmVhOiBLaW5kPEYsIFRoZXNlPEUsIEE+PikgPT4gS2luZDxGLCBUaGVzZTxHLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXBMZWZ0PEY+KFxuICBGOiBGdW5jdG9yPEY+XG4pOiA8RSwgRz4oZjogKGU6IEUpID0+IEcpID0+IDxBPihmZWE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCBUaGVzZTxHLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXBMZWZ0PEY+KFxuICBGOiBGdW5jdG9yPEY+XG4pOiA8RSwgRz4oZjogKGU6IEUpID0+IEcpID0+IDxBPihmZWE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCBUaGVzZTxHLCBBPj4ge1xuICByZXR1cm4gKGYpID0+IChmZWEpID0+IEYubWFwKGZlYSwgVC5tYXBMZWZ0KGYpKVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IEZ1bmN0b3IzPEY+XG4pOiA8RSwgQiwgQT4oXG4gIG9uTGVmdDogKGU6IEUpID0+IEIsXG4gIG9uUmlnaHQ6IChhOiBBKSA9PiBCLFxuICBvbkJvdGg6IChlOiBFLCBhOiBBKSA9PiBCXG4pID0+IDxTLCBSPihtYTogS2luZDM8RiwgUywgUiwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBTLCBSLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoPEYgZXh0ZW5kcyBVUklTMywgUj4oXG4gIEY6IEZ1bmN0b3IzQzxGLCBSPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBCLFxuICBvblJpZ2h0OiAoYTogQSkgPT4gQixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gQlxuKSA9PiA8Uz4obWE6IEtpbmQzPEYsIFMsIFIsIFRoZXNlPEUsIEE+PikgPT4gS2luZDM8RiwgUywgUiwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBCLFxuICBvblJpZ2h0OiAoYTogQSkgPT4gQixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gQlxuKSA9PiA8Uj4obWE6IEtpbmQyPEYsIFIsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgUiwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxNIGV4dGVuZHMgVVJJUzIsIFI+KFxuICBGOiBGdW5jdG9yMkM8TSwgUj5cbik6IDxFLCBCLCBBPihcbiAgb25MZWZ0OiAoZTogRSkgPT4gQixcbiAgb25SaWdodDogKGE6IEEpID0+IEIsXG4gIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEJcbikgPT4gKG1hOiBLaW5kMjxNLCBSLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQyPE0sIFIsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8RiBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBCLFxuICBvblJpZ2h0OiAoYTogQSkgPT4gQixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gQlxuKSA9PiAobWE6IEtpbmQ8RiwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kPEYsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8Rj4oXG4gIEY6IEZ1bmN0b3I8Rj5cbik6IDxFLCBCLCBBPihcbiAgb25MZWZ0OiAoZTogRSkgPT4gQixcbiAgb25SaWdodDogKGE6IEEpID0+IEIsXG4gIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEJcbikgPT4gKG1hOiBIS1Q8RiwgVGhlc2U8RSwgQT4+KSA9PiBIS1Q8RiwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxGPihcbiAgRjogRnVuY3RvcjxGPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBCLFxuICBvblJpZ2h0OiAoYTogQSkgPT4gQixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gQlxuKSA9PiAobWE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCBCPiB7XG4gIHJldHVybiAob25MZWZ0LCBvblJpZ2h0LCBvbkJvdGgpID0+IChtYSkgPT4gRi5tYXAobWEsIFQubWF0Y2gob25MZWZ0LCBvblJpZ2h0LCBvbkJvdGgpKVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUzM+KFxuICBNOiBDaGFpbjM8TT5cbik6IDxFLCBSLCBNRSwgQiwgQT4oXG4gIG9uTGVmdDogKGU6IEUpID0+IEtpbmQzPE0sIFIsIE1FLCBCPixcbiAgb25SaWdodDogKGE6IEEpID0+IEtpbmQzPE0sIFIsIE1FLCBCPixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gS2luZDM8TSwgUiwgTUUsIEI+XG4pID0+IChtYTogS2luZDM8TSwgUiwgTUUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDM8TSwgUiwgTUUsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hFPE0gZXh0ZW5kcyBVUklTMywgTUU+KFxuICBNOiBDaGFpbjNDPE0sIE1FPlxuKTogPEUsIFIsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBLaW5kMzxNLCBSLCBNRSwgQj4sXG4gIG9uUmlnaHQ6IChhOiBBKSA9PiBLaW5kMzxNLCBSLCBNRSwgQj4sXG4gIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEtpbmQzPE0sIFIsIE1FLCBCPlxuKSA9PiAobWE6IEtpbmQzPE0sIFIsIE1FLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPE0sIFIsIE1FLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUzI+KFxuICBNOiBDaGFpbjI8TT5cbik6IDxFLCBNRSwgQiwgQT4oXG4gIG9uTGVmdDogKGU6IEUpID0+IEtpbmQyPE0sIE1FLCBCPixcbiAgb25SaWdodDogKGE6IEEpID0+IEtpbmQyPE0sIE1FLCBCPixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gS2luZDI8TSwgTUUsIEI+XG4pID0+IChtYTogS2luZDI8TSwgTUUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8TSwgTUUsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hFPE0gZXh0ZW5kcyBVUklTMiwgTUU+KFxuICBNOiBDaGFpbjJDPE0sIE1FPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBLaW5kMjxNLCBNRSwgQj4sXG4gIG9uUmlnaHQ6IChhOiBBKSA9PiBLaW5kMjxNLCBNRSwgQj4sXG4gIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEtpbmQyPE0sIE1FLCBCPlxuKSA9PiAobWE6IEtpbmQyPE0sIE1FLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQyPE0sIE1FLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUz4oXG4gIE06IENoYWluMTxNPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBLaW5kPE0sIEI+LFxuICBvblJpZ2h0OiAoYTogQSkgPT4gS2luZDxNLCBCPixcbiAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gS2luZDxNLCBCPlxuKSA9PiAobWE6IEtpbmQ8TSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kPE0sIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hFPE0+KFxuICBNOiBDaGFpbjxNPlxuKTogPEUsIEIsIEE+KFxuICBvbkxlZnQ6IChlOiBFKSA9PiBIS1Q8TSwgQj4sXG4gIG9uUmlnaHQ6IChhOiBBKSA9PiBIS1Q8TSwgQj4sXG4gIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEhLVDxNLCBCPlxuKSA9PiAobWE6IEhLVDxNLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxNLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNPihcbiAgTTogQ2hhaW48TT5cbik6IDxFLCBCLCBBPihcbiAgb25MZWZ0OiAoZTogRSkgPT4gSEtUPE0sIEI+LFxuICBvblJpZ2h0OiAoYTogQSkgPT4gSEtUPE0sIEI+LFxuICBvbkJvdGg6IChlOiBFLCBhOiBBKSA9PiBIS1Q8TSwgQj5cbikgPT4gKG1hOiBIS1Q8TSwgVGhlc2U8RSwgQT4+KSA9PiBIS1Q8TSwgQj4ge1xuICByZXR1cm4gKG9uTGVmdCwgb25SaWdodCwgb25Cb3RoKSA9PiAobWEpID0+IE0uY2hhaW4obWEsIFQubWF0Y2gob25MZWZ0LCBvblJpZ2h0LCBvbkJvdGgpKVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN3YXA8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnVuY3RvcjM8Rj5cbik6IDxSLCBGRSwgRSwgQT4obWE6IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxBLCBFPj5cbmV4cG9ydCBmdW5jdGlvbiBzd2FwPEYgZXh0ZW5kcyBVUklTMywgRkU+KFxuICBGOiBGdW5jdG9yM0M8RiwgRkU+XG4pOiA8UiwgRSwgQT4obWE6IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxFLCBBPj4pID0+IEtpbmQzPEYsIFIsIEZFLCBUaGVzZTxBLCBFPj5cbmV4cG9ydCBmdW5jdGlvbiBzd2FwPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IyPEY+XG4pOiA8RkUsIEUsIEE+KG1hOiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMjxGLCBGRSwgVGhlc2U8QSwgRT4+XG5leHBvcnQgZnVuY3Rpb24gc3dhcDxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogRnVuY3RvcjJDPEYsIEZFPlxuKTogPEUsIEE+KG1hOiBLaW5kMjxGLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMjxGLCBGRSwgVGhlc2U8QSwgRT4+XG5leHBvcnQgZnVuY3Rpb24gc3dhcDxGIGV4dGVuZHMgVVJJUz4oRjogRnVuY3RvcjE8Rj4pOiA8RSwgQT4obWE6IEtpbmQ8RiwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kPEYsIFRoZXNlPEEsIEU+PlxuZXhwb3J0IGZ1bmN0aW9uIHN3YXA8Rj4oRjogRnVuY3RvcjxGPik6IDxFLCBBPihtYTogSEtUPEYsIFRoZXNlPEUsIEE+PikgPT4gSEtUPEYsIFRoZXNlPEEsIEU+PlxuZXhwb3J0IGZ1bmN0aW9uIHN3YXA8Rj4oRjogRnVuY3RvcjxGPik6IDxFLCBBPihtYTogSEtUPEYsIFRoZXNlPEUsIEE+PikgPT4gSEtUPEYsIFRoZXNlPEEsIEU+PiB7XG4gIHJldHVybiAobWEpID0+IEYubWFwKG1hLCBULnN3YXApXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9UdXBsZTI8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnVuY3RvcjM8Rj5cbik6IDxFLCBBPihlOiBMYXp5PEU+LCBhOiBMYXp5PEE+KSA9PiA8UiwgRkU+KGZhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgcmVhZG9ubHkgW0UsIEFdPlxuZXhwb3J0IGZ1bmN0aW9uIHRvVHVwbGUyPEYgZXh0ZW5kcyBVUklTMywgRkU+KFxuICBGOiBGdW5jdG9yM0M8RiwgRkU+XG4pOiA8RSwgQT4oZTogTGF6eTxFPiwgYTogTGF6eTxBPikgPT4gPFI+KGZhOiBLaW5kMzxGLCBSLCBGRSwgVGhlc2U8RSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBGRSwgcmVhZG9ubHkgW0UsIEFdPlxuZXhwb3J0IGZ1bmN0aW9uIHRvVHVwbGUyPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IyPEY+XG4pOiA8RSwgQT4oZTogTGF6eTxFPiwgYTogTGF6eTxBPikgPT4gPEZFPihmYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIHJlYWRvbmx5IFtFLCBBXT5cbmV4cG9ydCBmdW5jdGlvbiB0b1R1cGxlMjxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogRnVuY3RvcjJDPEYsIEZFPlxuKTogPEUsIEE+KGU6IExhenk8RT4sIGE6IExhenk8QT4pID0+IChmYTogS2luZDI8RiwgRkUsIFRoZXNlPEUsIEE+PikgPT4gS2luZDI8RiwgRkUsIHJlYWRvbmx5IFtFLCBBXT5cbmV4cG9ydCBmdW5jdGlvbiB0b1R1cGxlMjxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+XG4pOiA8RSwgQT4oZTogTGF6eTxFPiwgYTogTGF6eTxBPikgPT4gKGZhOiBLaW5kPEYsIFRoZXNlPEUsIEE+PikgPT4gS2luZDxGLCByZWFkb25seSBbRSwgQV0+XG5leHBvcnQgZnVuY3Rpb24gdG9UdXBsZTI8Rj4oXG4gIEY6IEZ1bmN0b3I8Rj5cbik6IDxFLCBBPihlOiBMYXp5PEU+LCBhOiBMYXp5PEE+KSA9PiAoZmE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCByZWFkb25seSBbRSwgQV0+XG5leHBvcnQgZnVuY3Rpb24gdG9UdXBsZTI8Rj4oXG4gIEY6IEZ1bmN0b3I8Rj5cbik6IDxFLCBBPihlOiBMYXp5PEU+LCBhOiBMYXp5PEE+KSA9PiAoZmE6IEhLVDxGLCBUaGVzZTxFLCBBPj4pID0+IEhLVDxGLCByZWFkb25seSBbRSwgQV0+IHtcbiAgcmV0dXJuIChlLCBhKSA9PiAoZmEpID0+IEYubWFwKGZhLCBULnRvVHVwbGUyKGUsIGEpKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIHRzbGludDpkaXNhYmxlOiBkZXByZWNhdGlvblxuXG4vKipcbiAqIEBjYXRlZ29yeSBtb2RlbFxuICogQHNpbmNlIDIuNC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRoZXNlVDxNLCBFLCBBPiBleHRlbmRzIEhLVDxNLCBUaGVzZTxFLCBBPj4ge31cblxuLyoqXG4gKiBAc2luY2UgMi40LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGhlc2VNPE0+IHtcbiAgcmVhZG9ubHkgbWFwOiA8RSwgQSwgQj4oZmE6IFRoZXNlVDxNLCBFLCBBPiwgZjogKGE6IEEpID0+IEIpID0+IFRoZXNlVDxNLCBFLCBCPlxuICByZWFkb25seSBiaW1hcDogPEUsIEEsIE4sIEI+KGZhOiBUaGVzZVQ8TSwgRSwgQT4sIGY6IChlOiBFKSA9PiBOLCBnOiAoYTogQSkgPT4gQikgPT4gVGhlc2VUPE0sIE4sIEI+XG4gIHJlYWRvbmx5IG1hcExlZnQ6IDxFLCBBLCBOPihmYTogVGhlc2VUPE0sIEUsIEE+LCBmOiAoZTogRSkgPT4gTikgPT4gVGhlc2VUPE0sIE4sIEE+XG4gIHJlYWRvbmx5IGZvbGQ6IDxFLCBBLCBSPihcbiAgICBmYTogVGhlc2VUPE0sIEUsIEE+LFxuICAgIG9uTGVmdDogKGU6IEUpID0+IEhLVDxNLCBSPixcbiAgICBvblJpZ2h0OiAoYTogQSkgPT4gSEtUPE0sIFI+LFxuICAgIG9uQm90aDogKGU6IEUsIGE6IEEpID0+IEhLVDxNLCBSPlxuICApID0+IEhLVDxNLCBSPlxuICByZWFkb25seSBzd2FwOiA8RSwgQT4oZmE6IFRoZXNlVDxNLCBFLCBBPikgPT4gVGhlc2VUPE0sIEEsIEU+XG4gIHJlYWRvbmx5IHJpZ2h0TTogPEUsIEE+KG1hOiBIS1Q8TSwgQT4pID0+IFRoZXNlVDxNLCBFLCBBPlxuICByZWFkb25seSBsZWZ0TTogPEUsIEE+KG1lOiBIS1Q8TSwgRT4pID0+IFRoZXNlVDxNLCBFLCBBPlxuICByZWFkb25seSBsZWZ0OiA8RSwgQT4oZTogRSkgPT4gVGhlc2VUPE0sIEUsIEE+XG4gIHJlYWRvbmx5IHJpZ2h0OiA8RSwgQT4oYTogQSkgPT4gVGhlc2VUPE0sIEUsIEE+XG4gIHJlYWRvbmx5IGJvdGg6IDxFLCBBPihlOiBFLCBhOiBBKSA9PiBUaGVzZVQ8TSwgRSwgQT5cbiAgcmVhZG9ubHkgdG9UdXBsZTogPEUsIEE+KGZhOiBUaGVzZVQ8TSwgRSwgQT4sIGU6IEUsIGE6IEEpID0+IEhLVDxNLCBbRSwgQV0+XG4gIHJlYWRvbmx5IGdldE1vbmFkOiA8RT4oXG4gICAgUzogU2VtaWdyb3VwPEU+XG4gICkgPT4ge1xuICAgIHJlYWRvbmx5IF9FOiBFXG4gICAgcmVhZG9ubHkgbWFwOiA8QSwgQj4obWE6IFRoZXNlVDxNLCBFLCBBPiwgZjogKGE6IEEpID0+IEIpID0+IFRoZXNlVDxNLCBFLCBCPlxuICAgIHJlYWRvbmx5IG9mOiA8QT4oYTogQSkgPT4gVGhlc2VUPE0sIEUsIEE+XG4gICAgcmVhZG9ubHkgYXA6IDxBLCBCPihtYWI6IFRoZXNlVDxNLCBFLCAoYTogQSkgPT4gQj4sIG1hOiBUaGVzZVQ8TSwgRSwgQT4pID0+IFRoZXNlVDxNLCBFLCBCPlxuICAgIHJlYWRvbmx5IGNoYWluOiA8QSwgQj4obWE6IFRoZXNlVDxNLCBFLCBBPiwgZjogKGE6IEEpID0+IFRoZXNlVDxNLCBFLCBCPikgPT4gVGhlc2VUPE0sIEUsIEI+XG4gIH1cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgbW9kZWxcbiAqIEBzaW5jZSAyLjQuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHR5cGUgVGhlc2VUMTxNIGV4dGVuZHMgVVJJUywgRSwgQT4gPSBLaW5kPE0sIFRoZXNlPEUsIEE+PlxuXG4vKipcbiAqIEBzaW5jZSAyLjQuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUaGVzZU0xPE0gZXh0ZW5kcyBVUklTPiB7XG4gIHJlYWRvbmx5IG1hcDogPEUsIEEsIEI+KGZhOiBUaGVzZVQxPE0sIEUsIEE+LCBmOiAoYTogQSkgPT4gQikgPT4gVGhlc2VUMTxNLCBFLCBCPlxuICByZWFkb25seSBiaW1hcDogPEUsIEEsIE4sIEI+KGZhOiBUaGVzZVQxPE0sIEUsIEE+LCBmOiAoZTogRSkgPT4gTiwgZzogKGE6IEEpID0+IEIpID0+IFRoZXNlVDE8TSwgTiwgQj5cbiAgcmVhZG9ubHkgbWFwTGVmdDogPEUsIEEsIE4+KGZhOiBUaGVzZVQxPE0sIEUsIEE+LCBmOiAoZTogRSkgPT4gTikgPT4gVGhlc2VUMTxNLCBOLCBBPlxuICByZWFkb25seSBmb2xkOiA8RSwgQSwgUj4oXG4gICAgZmE6IFRoZXNlVDE8TSwgRSwgQT4sXG4gICAgb25MZWZ0OiAoZTogRSkgPT4gS2luZDxNLCBSPixcbiAgICBvblJpZ2h0OiAoYTogQSkgPT4gS2luZDxNLCBSPixcbiAgICBvbkJvdGg6IChlOiBFLCBhOiBBKSA9PiBLaW5kPE0sIFI+XG4gICkgPT4gS2luZDxNLCBSPlxuICByZWFkb25seSBzd2FwOiA8RSwgQT4oZmE6IFRoZXNlVDE8TSwgRSwgQT4pID0+IFRoZXNlVDE8TSwgQSwgRT5cbiAgcmVhZG9ubHkgcmlnaHRNOiA8RSwgQT4obWE6IEtpbmQ8TSwgQT4pID0+IFRoZXNlVDE8TSwgRSwgQT5cbiAgcmVhZG9ubHkgbGVmdE06IDxFLCBBPihtZTogS2luZDxNLCBFPikgPT4gVGhlc2VUMTxNLCBFLCBBPlxuICByZWFkb25seSBsZWZ0OiA8RSwgQT4oZTogRSkgPT4gVGhlc2VUMTxNLCBFLCBBPlxuICByZWFkb25seSByaWdodDogPEUsIEE+KGE6IEEpID0+IFRoZXNlVDE8TSwgRSwgQT5cbiAgcmVhZG9ubHkgYm90aDogPEUsIEE+KGU6IEUsIGE6IEEpID0+IFRoZXNlVDE8TSwgRSwgQT5cbiAgcmVhZG9ubHkgdG9UdXBsZTogPEUsIEE+KGZhOiBUaGVzZVQxPE0sIEUsIEE+LCBlOiBFLCBhOiBBKSA9PiBLaW5kPE0sIFtFLCBBXT5cbiAgcmVhZG9ubHkgZ2V0TW9uYWQ6IDxFPihcbiAgICBTOiBTZW1pZ3JvdXA8RT5cbiAgKSA9PiB7XG4gICAgcmVhZG9ubHkgX0U6IEVcbiAgICByZWFkb25seSBtYXA6IDxBLCBCPihtYTogVGhlc2VUMTxNLCBFLCBBPiwgZjogKGE6IEEpID0+IEIpID0+IFRoZXNlVDE8TSwgRSwgQj5cbiAgICByZWFkb25seSBvZjogPEE+KGE6IEEpID0+IFRoZXNlVDE8TSwgRSwgQT5cbiAgICByZWFkb25seSBhcDogPEEsIEI+KG1hYjogVGhlc2VUMTxNLCBFLCAoYTogQSkgPT4gQj4sIG1hOiBUaGVzZVQxPE0sIEUsIEE+KSA9PiBUaGVzZVQxPE0sIEUsIEI+XG4gICAgcmVhZG9ubHkgY2hhaW46IDxBLCBCPihtYTogVGhlc2VUMTxNLCBFLCBBPiwgZjogKGE6IEEpID0+IFRoZXNlVDE8TSwgRSwgQj4pID0+IFRoZXNlVDE8TSwgRSwgQj5cbiAgfVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBtb2RlbFxuICogQHNpbmNlIDIuNC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdHlwZSBUaGVzZVQyPE0gZXh0ZW5kcyBVUklTMiwgUiwgRSwgQT4gPSBLaW5kMjxNLCBSLCBUaGVzZTxFLCBBPj5cblxuLyoqXG4gKiBAc2luY2UgMi40LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGhlc2VNMjxNIGV4dGVuZHMgVVJJUzI+IHtcbiAgcmVhZG9ubHkgbWFwOiA8UiwgRSwgQSwgQj4oZmE6IFRoZXNlVDI8TSwgUiwgRSwgQT4sIGY6IChhOiBBKSA9PiBCKSA9PiBUaGVzZVQyPE0sIFIsIEUsIEI+XG4gIHJlYWRvbmx5IGJpbWFwOiA8UiwgRSwgQSwgTiwgQj4oZmE6IFRoZXNlVDI8TSwgUiwgRSwgQT4sIGY6IChlOiBFKSA9PiBOLCBnOiAoYTogQSkgPT4gQikgPT4gVGhlc2VUMjxNLCBSLCBOLCBCPlxuICByZWFkb25seSBtYXBMZWZ0OiA8UiwgRSwgQSwgTj4oZmE6IFRoZXNlVDI8TSwgUiwgRSwgQT4sIGY6IChlOiBFKSA9PiBOKSA9PiBUaGVzZVQyPE0sIFIsIE4sIEE+XG4gIHJlYWRvbmx5IGZvbGQ6IDxSLCBFLCBBLCBCPihcbiAgICBmYTogVGhlc2VUMjxNLCBSLCBFLCBBPixcbiAgICBvbkxlZnQ6IChlOiBFKSA9PiBLaW5kMjxNLCBSLCBCPixcbiAgICBvblJpZ2h0OiAoYTogQSkgPT4gS2luZDI8TSwgUiwgQj4sXG4gICAgb25Cb3RoOiAoZTogRSwgYTogQSkgPT4gS2luZDI8TSwgUiwgQj5cbiAgKSA9PiBLaW5kMjxNLCBSLCBCPlxuICByZWFkb25seSBzd2FwOiA8UiwgRSwgQT4oZmE6IFRoZXNlVDI8TSwgUiwgRSwgQT4pID0+IFRoZXNlVDI8TSwgUiwgQSwgRT5cbiAgcmVhZG9ubHkgcmlnaHRNOiA8UiwgRSwgQT4obWE6IEtpbmQyPE0sIFIsIEE+KSA9PiBUaGVzZVQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IGxlZnRNOiA8UiwgRSwgQT4obWU6IEtpbmQyPE0sIFIsIEU+KSA9PiBUaGVzZVQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IGxlZnQ6IDxSLCBFLCBBPihlOiBFKSA9PiBUaGVzZVQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IHJpZ2h0OiA8UiwgRSwgQT4oYTogQSkgPT4gVGhlc2VUMjxNLCBSLCBFLCBBPlxuICByZWFkb25seSBib3RoOiA8UiwgRSwgQT4oZTogRSwgYTogQSkgPT4gVGhlc2VUMjxNLCBSLCBFLCBBPlxuICByZWFkb25seSB0b1R1cGxlOiA8UiwgRSwgQT4oZmE6IFRoZXNlVDI8TSwgUiwgRSwgQT4sIGU6IEUsIGE6IEEpID0+IEtpbmQyPE0sIFIsIFtFLCBBXT5cbiAgcmVhZG9ubHkgZ2V0TW9uYWQ6IDxFPihcbiAgICBTOiBTZW1pZ3JvdXA8RT5cbiAgKSA9PiB7XG4gICAgcmVhZG9ubHkgX0U6IEVcbiAgICByZWFkb25seSBtYXA6IDxSLCBBLCBCPihtYTogVGhlc2VUMjxNLCBSLCBFLCBBPiwgZjogKGE6IEEpID0+IEIpID0+IFRoZXNlVDI8TSwgUiwgRSwgQj5cbiAgICByZWFkb25seSBvZjogPFIsIEE+KGE6IEEpID0+IFRoZXNlVDI8TSwgUiwgRSwgQT5cbiAgICByZWFkb25seSBhcDogPFIsIEEsIEI+KG1hYjogVGhlc2VUMjxNLCBSLCBFLCAoYTogQSkgPT4gQj4sIG1hOiBUaGVzZVQyPE0sIFIsIEUsIEE+KSA9PiBUaGVzZVQyPE0sIFIsIEUsIEI+XG4gICAgcmVhZG9ubHkgY2hhaW46IDxSLCBBLCBCPihtYTogVGhlc2VUMjxNLCBSLCBFLCBBPiwgZjogKGE6IEEpID0+IFRoZXNlVDI8TSwgUiwgRSwgQj4pID0+IFRoZXNlVDI8TSwgUiwgRSwgQj5cbiAgfVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjQuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZXNlTTxNIGV4dGVuZHMgVVJJUzI+KE06IE1vbmFkMjxNPik6IFRoZXNlTTI8TT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZXNlTTxNIGV4dGVuZHMgVVJJUz4oTTogTW9uYWQxPE0+KTogVGhlc2VNMTxNPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlc2VNPE0+KE06IE1vbmFkPE0+KTogVGhlc2VNPE0+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlc2VNPE0+KE06IE1vbmFkPE0+KTogVGhlc2VNPE0+IHtcbiAgY29uc3QgX21hcCA9IG1hcChNKVxuICBjb25zdCBfYmltYXAgPSBiaW1hcChNKVxuICBjb25zdCBfbWFwTGVmdCA9IG1hcExlZnQoTSlcbiAgY29uc3QgX2ZvbGQgPSBtYXRjaEUoTSlcbiAgY29uc3QgX3RvVHVwbGUyOiA8RSwgQT4oZTogTGF6eTxFPiwgYTogTGF6eTxBPikgPT4gKGZhOiBIS1Q8TSwgVC5UaGVzZTxFLCBBPj4pID0+IEhLVDxNLCBbRSwgQV0+ID0gdG9UdXBsZTIoTSkgYXMgYW55XG4gIGNvbnN0IG9mID0gcmlnaHQoTSlcblxuICBjb25zdCBtYXBUID0gPEUsIEEsIEI+KGZhOiBUaGVzZVQ8TSwgRSwgQT4sIGY6IChhOiBBKSA9PiBCKTogVGhlc2VUPE0sIEUsIEI+ID0+IHBpcGUoZmEsIF9tYXAoZikpXG5cbiAgcmV0dXJuIHtcbiAgICBtYXA6IG1hcFQsXG4gICAgYmltYXA6IChmZWEsIGYsIGcpID0+IHBpcGUoZmVhLCBfYmltYXAoZiwgZykpLFxuICAgIG1hcExlZnQ6IChmZWEsIGYpID0+IHBpcGUoZmVhLCBfbWFwTGVmdChmKSksXG4gICAgZm9sZDogKGZhLCBvbkxlZnQsIG9uUmlnaHQsIG9uQm90aCkgPT4gcGlwZShmYSwgX2ZvbGQob25MZWZ0LCBvblJpZ2h0LCBvbkJvdGgpKSxcbiAgICBzd2FwOiBzd2FwKE0pLFxuICAgIHJpZ2h0TTogcmlnaHRGKE0pLFxuICAgIGxlZnRNOiBsZWZ0RihNKSxcbiAgICBsZWZ0OiBsZWZ0KE0pLFxuICAgIHJpZ2h0OiByaWdodChNKSxcbiAgICBib3RoOiBib3RoKE0pLFxuICAgIHRvVHVwbGU6IChmYSwgZSwgYSkgPT5cbiAgICAgIHBpcGUoXG4gICAgICAgIGZhLFxuICAgICAgICBfdG9UdXBsZTIoXG4gICAgICAgICAgKCkgPT4gZSxcbiAgICAgICAgICAoKSA9PiBhXG4gICAgICAgIClcbiAgICAgICksXG4gICAgZ2V0TW9uYWQ6IChTKSA9PiB7XG4gICAgICBjb25zdCBfYXAgPSBhcChNLCBTKVxuICAgICAgY29uc3QgX2NoYWluID0gY2hhaW4oTSwgUylcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF9FOiB1bmRlZmluZWQgYXMgYW55LFxuICAgICAgICBtYXA6IG1hcFQsXG4gICAgICAgIG9mLFxuICAgICAgICBhcDogKGZhYiwgZmEpID0+IHBpcGUoZmFiLCBfYXAoZmEpKSxcbiAgICAgICAgY2hhaW46IChtYSwgZikgPT4gcGlwZShtYSwgX2NoYWluKGYpKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19