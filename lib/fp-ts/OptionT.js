"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.alt = alt;
exports.ap = ap;
exports.chain = chain;
exports.chainNullableK = chainNullableK;
exports.chainOptionK = chainOptionK;
exports.fromEither = fromEither;
exports.fromF = fromF;
exports.fromNullable = fromNullable;
exports.fromNullableK = fromNullableK;
exports.fromOptionK = fromOptionK;
exports.fromPredicate = fromPredicate;
exports.getOptionM = getOptionM;
exports.getOrElse = getOrElse;
exports.map = map;
exports.match = match;
exports.matchE = matchE;
exports.some = some;
exports.zero = zero;

var _Apply = require("./Apply");

var _function = require("./function");

var _Functor = require("./Functor");

var O = _interopRequireWildcard(require("./Option"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * @since 2.0.0
 */
var Option = O.Option; // -------------------------------------------------------------------------------------
// constructors
// -------------------------------------------------------------------------------------

/**
 * @since 2.10.0
 */

function some(F) {
  return (0, _function.flow)(O.some, F.of);
}
/**
 * @since 2.10.0
 */


function zero(F) {
  return (0, _function.constant)(F.of(O.none));
}
/**
 * @since 2.10.0
 */


function fromF(F) {
  return function (ma) {
    return F.map(ma, O.some);
  };
}
/**
 * @since 2.10.0
 */


function fromNullable(F) {
  return (0, _function.flow)(O.fromNullable, F.of);
}
/**
 * @since 2.10.0
 */


function fromNullableK(F) {
  var fromNullableF = fromNullable(F);
  return function (f) {
    return (0, _function.flow)(f, fromNullableF);
  };
}
/**
 * @since 2.10.0
 */


function chainNullableK(M) {
  var chainM = chain(M);
  var fromNullableKM = fromNullableK(M);
  return function (f) {
    return chainM(fromNullableKM(f));
  };
}
/**
 * @since 2.10.0
 */


function fromOptionK(F) {
  return function (f) {
    return (0, _function.flow)(f, F.of);
  };
}
/**
 * @since 2.10.0
 */


function chainOptionK(M) {
  var chainM = chain(M);
  var fromOptionKM = fromOptionK(M);
  return function (f) {
    return chainM(fromOptionKM(f));
  };
}
/**
 * @since 2.10.0
 */


function fromPredicate(F) {
  return function (predicate) {
    return function (a) {
      return F.of(O.fromPredicate(predicate)(a));
    };
  };
}
/**
 * @since 2.10.0
 */


function fromEither(F) {
  return (0, _function.flow)(O.fromEither, F.of);
} // -------------------------------------------------------------------------------------
// destructors
// -------------------------------------------------------------------------------------

/**
 * @since 2.10.0
 */


function match(F) {
  return function (onNone, onSome) {
    return function (ma) {
      return F.map(ma, O.match(onNone, onSome));
    };
  };
}
/**
 * @since 2.10.0
 */


function matchE(M) {
  return function (onNone, onSome) {
    return function (ma) {
      return M.chain(ma, O.match(onNone, onSome));
    };
  };
}
/**
 * @since 2.10.0
 */


function getOrElse(M) {
  return function (onNone) {
    return function (fa) {
      return M.chain(fa, O.match(onNone, M.of));
    };
  };
} // -------------------------------------------------------------------------------------
// type class members
// -------------------------------------------------------------------------------------

/**
 * @since 2.10.0
 */


function map(F) {
  return (0, _Functor.map)(F, O.Functor);
}
/**
 * @since 2.10.0
 */


function ap(F) {
  return (0, _Apply.ap)(F, O.Apply);
}
/**
 * @since 2.10.0
 */


function chain(M) {
  var zeroM = zero(M);
  return function (f) {
    return function (ma) {
      return M.chain(ma, O.match(function () {
        return zeroM();
      }, f));
    };
  };
}
/**
 * @since 2.10.0
 */


function alt(M) {
  var _some = some(M);

  return function (second) {
    return function (first) {
      return M.chain(first, O.match(second, _some));
    };
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @category model
 * @since 2.0.0
 * @deprecated
 */


/** @deprecated */
function getOptionM(M) {
  var apM = ap(M);
  var mapM = map(M);
  var chainM = chain(M);
  var altM = alt(M);
  var foldM = matchE(M);
  var getOrElseM = getOrElse(M);
  var zeroM = zero(M);
  return {
    map: function map(fa, f) {
      return (0, _function.pipe)(fa, mapM(f));
    },
    ap: function ap(fab, fa) {
      return (0, _function.pipe)(fab, apM(fa));
    },
    of: some(M),
    chain: function chain(ma, f) {
      return (0, _function.pipe)(ma, chainM(f));
    },
    alt: function alt(fa, that) {
      return (0, _function.pipe)(fa, altM(that));
    },
    fold: function fold(fa, onNone, onSome) {
      return (0, _function.pipe)(fa, foldM(onNone, onSome));
    },
    getOrElse: function getOrElse(fa, onNone) {
      return (0, _function.pipe)(fa, getOrElseM(onNone));
    },
    fromM: fromF(M),
    none: function none() {
      return zeroM();
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9PcHRpb25ULnRzIl0sIm5hbWVzIjpbIk9wdGlvbiIsIk8iLCJzb21lIiwiRiIsIm9mIiwiemVybyIsIm5vbmUiLCJmcm9tRiIsIm1hIiwibWFwIiwiZnJvbU51bGxhYmxlIiwiZnJvbU51bGxhYmxlSyIsImZyb21OdWxsYWJsZUYiLCJmIiwiY2hhaW5OdWxsYWJsZUsiLCJNIiwiY2hhaW5NIiwiY2hhaW4iLCJmcm9tTnVsbGFibGVLTSIsImZyb21PcHRpb25LIiwiY2hhaW5PcHRpb25LIiwiZnJvbU9wdGlvbktNIiwiZnJvbVByZWRpY2F0ZSIsInByZWRpY2F0ZSIsImEiLCJmcm9tRWl0aGVyIiwibWF0Y2giLCJvbk5vbmUiLCJvblNvbWUiLCJtYXRjaEUiLCJnZXRPckVsc2UiLCJmYSIsIkZ1bmN0b3IiLCJhcCIsIkFwcGx5IiwiemVyb00iLCJhbHQiLCJfc29tZSIsInNlY29uZCIsImZpcnN0IiwiZ2V0T3B0aW9uTSIsImFwTSIsIm1hcE0iLCJhbHRNIiwiZm9sZE0iLCJnZXRPckVsc2VNIiwiZmFiIiwidGhhdCIsImZvbGQiLCJmcm9tTSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTQTs7QUFHQTs7QUFDQTs7QUFHQTs7Ozs7O0FBaEJBO0FBQ0E7QUFDQTtJQW1CT0EsTSxHQUFTQyxDLENBQUVELE0sRUFFbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFRTyxTQUFTRSxJQUFULENBQWlCQyxDQUFqQixFQUFnRTtBQUNyRSxTQUFPLG9CQUFLRixDQUFDLENBQUNDLElBQVAsRUFBYUMsQ0FBQyxDQUFDQyxFQUFmLENBQVA7QUFDRDtBQUVEO0FBQ0E7QUFDQTs7O0FBUU8sU0FBU0MsSUFBVCxDQUFpQkYsQ0FBakIsRUFBNEQ7QUFDakUsU0FBTyx3QkFBU0EsQ0FBQyxDQUFDQyxFQUFGLENBQUtILENBQUMsQ0FBQ0ssSUFBUCxDQUFULENBQVA7QUFDRDtBQUVEO0FBQ0E7QUFDQTs7O0FB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Q0FBQ0gsQ0FBRCxDQUFmLENBQVg7QUFBQSxLQUpGO0FBS0x1QixJQUFBQSxHQUFHLEVBQUUsYUFBQ0wsRUFBRCxFQUFLZ0IsSUFBTDtBQUFBLGFBQWMsb0JBQUtoQixFQUFMLEVBQVNZLElBQUksQ0FBQ0ksSUFBRCxDQUFiLENBQWQ7QUFBQSxLQUxBO0FBTUxDLElBQUFBLElBQUksRUFBRSxjQUFDakIsRUFBRCxFQUFLSixNQUFMLEVBQWFDLE1BQWI7QUFBQSxhQUF3QixvQkFBS0csRUFBTCxFQUFTYSxLQUFLLENBQUNqQixNQUFELEVBQVNDLE1BQVQsQ0FBZCxDQUF4QjtBQUFBLEtBTkQ7QUFPTEUsSUFBQUEsU0FBUyxFQUFFLG1CQUFDQyxFQUFELEVBQUtKLE1BQUw7QUFBQSxhQUFnQixvQkFBS0ksRUFBTCxFQUFTYyxVQUFVLENBQUNsQixNQUFELENBQW5CLENBQWhCO0FBQUEsS0FQTjtBQVFMc0IsSUFBQUEsS0FBSyxFQUFFMUMsS0FBSyxDQUFDUSxDQUFELENBUlA7QUFTTFQsSUFBQUEsSUFBSSxFQUFFO0FBQUEsYUFBTTZCLEtBQUssRUFBWDtBQUFBO0FBVEQsR0FBUDtBQVdEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHtcbiAgQXBwbGljYXRpdmVDb21wb3NpdGlvbjExLFxuICBBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uMjEsXG4gIEFwcGxpY2F0aXZlQ29tcG9zaXRpb24yQzEsXG4gIEFwcGxpY2F0aXZlQ29tcG9zaXRpb25IS1QxXG59IGZyb20gJy4vQXBwbGljYXRpdmUnXG5pbXBvcnQgeyBhcCBhcyBhcF8sIEFwcGx5LCBBcHBseTEsIEFwcGx5MiwgQXBwbHkyQywgQXBwbHkzLCBBcHBseTNDLCBBcHBseTQgfSBmcm9tICcuL0FwcGx5J1xuaW1wb3J0IHsgQ2hhaW4sIENoYWluMSwgQ2hhaW4yLCBDaGFpbjJDLCBDaGFpbjMsIENoYWluM0MsIENoYWluNCB9IGZyb20gJy4vQ2hhaW4nXG5pbXBvcnQgeyBFaXRoZXIgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IGNvbnN0YW50LCBmbG93LCBMYXp5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbidcbmltcG9ydCB7IEZ1bmN0b3IsIEZ1bmN0b3IxLCBGdW5jdG9yMiwgRnVuY3RvcjJDLCBGdW5jdG9yMywgRnVuY3RvcjNDLCBGdW5jdG9yNCwgbWFwIGFzIG1hcF8gfSBmcm9tICcuL0Z1bmN0b3InXG5pbXBvcnQgeyBIS1QsIEtpbmQsIEtpbmQyLCBLaW5kMywgS2luZDQsIFVSSVMsIFVSSVMyLCBVUklTMywgVVJJUzQgfSBmcm9tICcuL0hLVCdcbmltcG9ydCB7IE1vbmFkLCBNb25hZDEsIE1vbmFkMiwgTW9uYWQyQywgTW9uYWQzLCBNb25hZDNDLCBNb25hZDQgfSBmcm9tICcuL01vbmFkJ1xuaW1wb3J0ICogYXMgTyBmcm9tICcuL09wdGlvbidcbmltcG9ydCB7IFBvaW50ZWQsIFBvaW50ZWQxLCBQb2ludGVkMiwgUG9pbnRlZDJDLCBQb2ludGVkMywgUG9pbnRlZDNDLCBQb2ludGVkNCB9IGZyb20gJy4vUG9pbnRlZCdcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4vUHJlZGljYXRlJ1xuaW1wb3J0IHsgUmVmaW5lbWVudCB9IGZyb20gJy4vUmVmaW5lbWVudCdcblxuaW1wb3J0IE9wdGlvbiA9IE8uT3B0aW9uXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8RiBleHRlbmRzIFVSSVM0PihGOiBQb2ludGVkNDxGPik6IDxBLCBTLCBSLCBFPihhOiBBKSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gc29tZTxGIGV4dGVuZHMgVVJJUzM+KEY6IFBvaW50ZWQzPEY+KTogPEEsIFIsIEU+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBzb21lPEYgZXh0ZW5kcyBVUklTMywgRT4oRjogUG9pbnRlZDNDPEYsIEU+KTogPEEsIFI+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBzb21lPEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8QSwgRT4oYTogQSkgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8RiBleHRlbmRzIFVSSVMyLCBFPihGOiBQb2ludGVkMkM8RiwgRT4pOiA8QT4oYTogQSkgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8RiBleHRlbmRzIFVSSVM+KEY6IFBvaW50ZWQxPEY+KTogPEE+KGE6IEEpID0+IEtpbmQ8RiwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8Rj4oRjogUG9pbnRlZDxGPik6IDxBPihhOiBBKSA9PiBIS1Q8RiwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8Rj4oRjogUG9pbnRlZDxGPik6IDxBPihhOiBBKSA9PiBIS1Q8RiwgT3B0aW9uPEE+PiB7XG4gIHJldHVybiBmbG93KE8uc29tZSwgRi5vZilcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvPEYgZXh0ZW5kcyBVUklTND4oRjogUG9pbnRlZDQ8Rj4pOiA8UywgUiwgRSwgQT4oKSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gemVybzxGIGV4dGVuZHMgVVJJUzM+KEY6IFBvaW50ZWQzPEY+KTogPFIsIEUsIEE+KCkgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHplcm88RiBleHRlbmRzIFVSSVMzLCBFPihGOiBQb2ludGVkM0M8RiwgRT4pOiA8UiwgQT4oKSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gemVybzxGIGV4dGVuZHMgVVJJUzI+KEY6IFBvaW50ZWQyPEY+KTogPEUsIEE+KCkgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHplcm88RiBleHRlbmRzIFVSSVMyLCBFPihGOiBQb2ludGVkMkM8RiwgRT4pOiA8QT4oKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gemVybzxGIGV4dGVuZHMgVVJJUz4oRjogUG9pbnRlZDE8Rj4pOiA8QT4oKSA9PiBLaW5kPEYsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvPEY+KEY6IFBvaW50ZWQ8Rj4pOiA8QT4oKSA9PiBIS1Q8RiwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIHplcm88Rj4oRjogUG9pbnRlZDxGPik6IDxBPigpID0+IEhLVDxGLCBPcHRpb248QT4+IHtcbiAgcmV0dXJuIGNvbnN0YW50KEYub2YoTy5ub25lKSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRjxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBGdW5jdG9yNDxGPlxuKTogPFMsIFIsIEUsIEE+KG1hOiBLaW5kNDxGLCBTLCBSLCBFLCBBPikgPT4gS2luZDQ8RiwgUywgUiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21GPEYgZXh0ZW5kcyBVUklTMz4oRjogRnVuY3RvcjM8Rj4pOiA8UiwgRSwgQT4obWE6IEtpbmQzPEYsIFIsIEUsIEE+KSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUY8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnVuY3RvcjNDPEYsIEU+XG4pOiA8UiwgQT4obWE6IEtpbmQzPEYsIFIsIEUsIEE+KSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUY8RiBleHRlbmRzIFVSSVMyPihGOiBGdW5jdG9yMjxGPik6IDxFLCBBPihtYTogS2luZDI8RiwgRSwgQT4pID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRjxGIGV4dGVuZHMgVVJJUzIsIEU+KEY6IEZ1bmN0b3IyQzxGLCBFPik6IDxBPihtYTogS2luZDI8RiwgRSwgQT4pID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRjxGIGV4dGVuZHMgVVJJUz4oRjogRnVuY3RvcjE8Rj4pOiA8QT4obWE6IEtpbmQ8RiwgQT4pID0+IEtpbmQ8RiwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21GPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QT4obWE6IEhLVDxGLCBBPikgPT4gSEtUPEYsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRjxGPihGOiBGdW5jdG9yPEY+KTogPEE+KG1hOiBIS1Q8RiwgQT4pID0+IEhLVDxGLCBPcHRpb248QT4+IHtcbiAgcmV0dXJuIChtYSkgPT4gRi5tYXAobWEsIE8uc29tZSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGU8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogUG9pbnRlZDQ8Rj5cbik6IDxBLCBTLCBSLCBFPihhOiBBKSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248Tm9uTnVsbGFibGU8QT4+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OdWxsYWJsZTxGIGV4dGVuZHMgVVJJUzM+KEY6IFBvaW50ZWQzPEY+KTogPEEsIFIsIEU+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxBPj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bGxhYmxlPEYgZXh0ZW5kcyBVUklTMywgRT4oXG4gIEY6IFBvaW50ZWQzQzxGLCBFPlxuKTogPEEsIFI+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxBPj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bGxhYmxlPEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8QSwgRT4oYTogQSkgPT4gS2luZDI8RiwgRSwgT3B0aW9uPE5vbk51bGxhYmxlPEE+Pj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGU8RiBleHRlbmRzIFVSSVMyLCBFPihGOiBQb2ludGVkMkM8RiwgRT4pOiA8QT4oYTogQSkgPT4gS2luZDI8RiwgRSwgT3B0aW9uPE5vbk51bGxhYmxlPEE+Pj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGU8RiBleHRlbmRzIFVSSVM+KEY6IFBvaW50ZWQxPEY+KTogPEE+KGE6IEEpID0+IEtpbmQ8RiwgT3B0aW9uPE5vbk51bGxhYmxlPEE+Pj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGU8Rj4oRjogUG9pbnRlZDxGPik6IDxBPihhOiBBKSA9PiBIS1Q8RiwgT3B0aW9uPE5vbk51bGxhYmxlPEE+Pj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGU8Rj4oRjogUG9pbnRlZDxGPik6IDxBPihhOiBBKSA9PiBIS1Q8RiwgT3B0aW9uPE5vbk51bGxhYmxlPEE+Pj4ge1xuICByZXR1cm4gZmxvdyhPLmZyb21OdWxsYWJsZSwgRi5vZilcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGVLPEYgZXh0ZW5kcyBVUklTND4oXG4gIEY6IFBvaW50ZWQ0PEY+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KFxuICBmOiAoLi4uYTogQSkgPT4gQiB8IG51bGwgfCB1bmRlZmluZWRcbikgPT4gPFMsIFIsIEU+KC4uLmE6IEEpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bGxhYmxlSzxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBQb2ludGVkMzxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihcbiAgZjogKC4uLmE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkXG4pID0+IDxSLCBFPiguLi5hOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248Tm9uTnVsbGFibGU8Qj4+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OdWxsYWJsZUs8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogUG9pbnRlZDNDPEYsIEU+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KFxuICBmOiAoLi4uYTogQSkgPT4gQiB8IG51bGwgfCB1bmRlZmluZWRcbikgPT4gPFI+KC4uLmE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bGxhYmxlSzxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBQb2ludGVkMjxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihcbiAgZjogKC4uLmE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkXG4pID0+IDxFPiguLi5hOiBBKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248Tm9uTnVsbGFibGU8Qj4+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OdWxsYWJsZUs8RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogUG9pbnRlZDJDPEYsIEU+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KFxuICBmOiAoLi4uYTogQSkgPT4gQiB8IG51bGwgfCB1bmRlZmluZWRcbikgPT4gKC4uLmE6IEEpID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bGxhYmxlSzxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IFBvaW50ZWQxPEY+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KFxuICBmOiAoLi4uYTogQSkgPT4gQiB8IG51bGwgfCB1bmRlZmluZWRcbikgPT4gKC4uLmE6IEEpID0+IEtpbmQ8RiwgT3B0aW9uPE5vbk51bGxhYmxlPEI+Pj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTnVsbGFibGVLPEY+KFxuICBGOiBQb2ludGVkPEY+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KFxuICBmOiAoLi4uYTogQSkgPT4gQiB8IG51bGwgfCB1bmRlZmluZWRcbikgPT4gKC4uLmE6IEEpID0+IEhLVDxGLCBPcHRpb248Tm9uTnVsbGFibGU8Qj4+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OdWxsYWJsZUs8Rj4oXG4gIEY6IFBvaW50ZWQ8Rj5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oXG4gIGY6ICguLi5hOiBBKSA9PiBCIHwgbnVsbCB8IHVuZGVmaW5lZFxuKSA9PiAoLi4uYTogQSkgPT4gSEtUPEYsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+IHtcbiAgY29uc3QgZnJvbU51bGxhYmxlRiA9IGZyb21OdWxsYWJsZShGKVxuICByZXR1cm4gKGYpID0+IGZsb3coZiwgZnJvbU51bGxhYmxlRilcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk51bGxhYmxlSzxNIGV4dGVuZHMgVVJJUzQ+KFxuICBNOiBNb25hZDQ8TT5cbik6IDxBLCBCPihcbiAgZjogKGE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkXG4pID0+IDxTLCBSLCBFPihtYTogS2luZDQ8TSwgUywgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDQ8TSwgUywgUiwgRSwgT3B0aW9uPE5vbk51bGxhYmxlPEI+Pj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk51bGxhYmxlSzxNIGV4dGVuZHMgVVJJUzM+KFxuICBNOiBNb25hZDM8TT5cbik6IDxBLCBCPihcbiAgZjogKGE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkXG4pID0+IDxSLCBFPihtYTogS2luZDM8TSwgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDM8TSwgUiwgRSwgT3B0aW9uPE5vbk51bGxhYmxlPEI+Pj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk51bGxhYmxlSzxNIGV4dGVuZHMgVVJJUzMsIEU+KFxuICBNOiBNb25hZDNDPE0sIEU+XG4pOiA8QSwgQj4oXG4gIGY6IChhOiBBKSA9PiBCIHwgbnVsbCB8IHVuZGVmaW5lZFxuKSA9PiA8Uj4obWE6IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5OdWxsYWJsZUs8TSBleHRlbmRzIFVSSVMyPihcbiAgTTogTW9uYWQyPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiA8RT4obWE6IEtpbmQyPE0sIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPE0sIEUsIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5OdWxsYWJsZUs8TSBleHRlbmRzIFVSSVMyLCBFPihcbiAgTTogTW9uYWQyQzxNLCBFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCIHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4gKG1hOiBLaW5kMjxNLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMjxNLCBFLCBPcHRpb248Tm9uTnVsbGFibGU8Qj4+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluTnVsbGFibGVLPE0gZXh0ZW5kcyBVUklTPihcbiAgTTogTW9uYWQxPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiAobWE6IEtpbmQ8TSwgT3B0aW9uPEE+PikgPT4gS2luZDxNLCBPcHRpb248Tm9uTnVsbGFibGU8Qj4+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluTnVsbGFibGVLPE0+KFxuICBNOiBNb25hZDxNPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCIHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4gKG1hOiBIS1Q8TSwgT3B0aW9uPEE+PikgPT4gSEtUPE0sIE9wdGlvbjxOb25OdWxsYWJsZTxCPj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5OdWxsYWJsZUs8TT4oXG4gIE06IE1vbmFkPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiAobWE6IEhLVDxNLCBPcHRpb248QT4+KSA9PiBIS1Q8TSwgT3B0aW9uPE5vbk51bGxhYmxlPEI+Pj4ge1xuICBjb25zdCBjaGFpbk0gPSBjaGFpbihNKVxuICBjb25zdCBmcm9tTnVsbGFibGVLTSA9IGZyb21OdWxsYWJsZUsoTSlcbiAgcmV0dXJuIChmKSA9PiBjaGFpbk0oZnJvbU51bGxhYmxlS00oZikpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogUG9pbnRlZDQ8Rj5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oXG4gIGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj5cbikgPT4gPFMsIFIsIEU+KC4uLmE6IEEpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uSzxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBQb2ludGVkMzxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihmOiAoLi4uYTogQSkgPT4gT3B0aW9uPEI+KSA9PiA8UiwgRT4oLi4uYTogQSkgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb25LPEYgZXh0ZW5kcyBVUklTMywgRT4oXG4gIEY6IFBvaW50ZWQzQzxGLCBFPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihmOiAoLi4uYTogQSkgPT4gT3B0aW9uPEI+KSA9PiA8Uj4oLi4uYTogQSkgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb25LPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IFBvaW50ZWQyPEY+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj4pID0+IDxFPiguLi5hOiBBKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogUG9pbnRlZDJDPEYsIEU+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj4pID0+ICguLi5hOiBBKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVM+KFxuICBGOiBQb2ludGVkMTxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihmOiAoLi4uYTogQSkgPT4gT3B0aW9uPEI+KSA9PiAoLi4uYTogQSkgPT4gS2luZDxGLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8Rj4oXG4gIEY6IFBvaW50ZWQ8Rj5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IE9wdGlvbjxCPikgPT4gKC4uLmE6IEEpID0+IEhLVDxGLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8Rj4oXG4gIEY6IFBvaW50ZWQ8Rj5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IE9wdGlvbjxCPikgPT4gKC4uLmE6IEEpID0+IEhLVDxGLCBPcHRpb248Qj4+IHtcbiAgcmV0dXJuIChmKSA9PiBmbG93KGYsIEYub2YpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhaW5PcHRpb25LPE0gZXh0ZW5kcyBVUklTND4oXG4gIE06IE1vbmFkNDxNPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IDxTLCBSLCBFPihtYTogS2luZDQ8TSwgUywgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDQ8TSwgUywgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSzxNIGV4dGVuZHMgVVJJUzM+KFxuICBNOiBNb25hZDM8TT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiA8UiwgRT4obWE6IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8TSBleHRlbmRzIFVSSVMzLCBFPihcbiAgTTogTW9uYWQzQzxNLCBFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IDxSPihtYTogS2luZDM8TSwgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDM8TSwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSzxNIGV4dGVuZHMgVVJJUzI+KFxuICBNOiBNb25hZDI8TT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiA8RT4obWE6IEtpbmQyPE0sIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPE0sIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8TSBleHRlbmRzIFVSSVMyLCBFPihcbiAgTTogTW9uYWQyQzxNLCBFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChtYTogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSzxNIGV4dGVuZHMgVVJJUz4oXG4gIE06IE1vbmFkMTxNPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChtYTogS2luZDxNLCBPcHRpb248QT4+KSA9PiBLaW5kPE0sIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8TT4oXG4gIE06IE1vbmFkPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gKG1hOiBIS1Q8TSwgT3B0aW9uPEE+PikgPT4gSEtUPE0sIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8TT4oXG4gIE06IE1vbmFkPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gKG1hOiBIS1Q8TSwgT3B0aW9uPEE+PikgPT4gSEtUPE0sIE9wdGlvbjxCPj4ge1xuICBjb25zdCBjaGFpbk0gPSBjaGFpbihNKVxuICBjb25zdCBmcm9tT3B0aW9uS00gPSBmcm9tT3B0aW9uSyhNKVxuICByZXR1cm4gKGYpID0+IGNoYWluTShmcm9tT3B0aW9uS00oZikpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBQb2ludGVkNDxGPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEE+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4pOiA8UywgUiwgRT4oYTogQSkgPT4gS2luZDQ8RiwgUywgUiwgRSwgT3B0aW9uPEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8UywgUiwgRSwgQiBleHRlbmRzIEE+KGI6IEIpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPFMsIFIsIEU+KGE6IEEpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIE9wdGlvbjxBPj5cbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IFBvaW50ZWQzPEY+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IDxSLCBFPihhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248Qj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxSLCBFLCBCIGV4dGVuZHMgQT4oYjogQikgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8UiwgRT4oYTogQSkgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEE+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGU8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogUG9pbnRlZDNDPEYsIEU+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IDxSPihhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248Qj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxSLCBCIGV4dGVuZHMgQT4oYjogQikgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8Uj4oYTogQSkgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEE+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGU8RiBleHRlbmRzIFVSSVMyPihcbiAgRjogUG9pbnRlZDI8Rj5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogPEU+KGE6IEEpID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEUsIEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248Qj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxFPihhOiBBKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248QT4+XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBQb2ludGVkMkM8RiwgRT5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogKGE6IEEpID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248Qj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IChhOiBBKSA9PiBLaW5kMjxGLCBFLCBPcHRpb248QT4+XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IFBvaW50ZWQxPEY+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IChhOiBBKSA9PiBLaW5kPEYsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBLaW5kPEYsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogKGE6IEEpID0+IEtpbmQ8RiwgT3B0aW9uPEE+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGU8Rj4oXG4gIEY6IFBvaW50ZWQ8Rj5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogKGE6IEEpID0+IEhLVDxGLCBPcHRpb248Qj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxCIGV4dGVuZHMgQT4oYjogQikgPT4gSEtUPEYsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogKGE6IEEpID0+IEhLVDxGLCBPcHRpb248QT4+XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGPihcbiAgRjogUG9pbnRlZDxGPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEE+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4pOiAoYTogQSkgPT4gSEtUPEYsIE9wdGlvbjxCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBIS1Q8RiwgT3B0aW9uPEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiAoYTogQSkgPT4gSEtUPEYsIE9wdGlvbjxBPj5cbn0ge1xuICByZXR1cm4gPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KSA9PiAoYTogQSkgPT4gRi5vZihPLmZyb21QcmVkaWNhdGUocHJlZGljYXRlKShhKSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVyPEYgZXh0ZW5kcyBVUklTND4oXG4gIEY6IFBvaW50ZWQ0PEY+XG4pOiA8QSwgUywgUiwgRT4oZTogRWl0aGVyPHVua25vd24sIEE+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcjxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBQb2ludGVkMzxGPlxuKTogPEEsIFIsIEU+KGU6IEVpdGhlcjx1bmtub3duLCBBPikgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXI8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogUG9pbnRlZDNDPEYsIEU+XG4pOiA8QSwgUj4oZTogRWl0aGVyPHVua25vd24sIEE+KSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcjxGIGV4dGVuZHMgVVJJUzI+KEY6IFBvaW50ZWQyPEY+KTogPEEsIEU+KGU6IEVpdGhlcjx1bmtub3duLCBBPikgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXI8RiBleHRlbmRzIFVSSVMyLCBFPihGOiBQb2ludGVkMkM8RiwgRT4pOiA8QT4oZTogRWl0aGVyPHVua25vd24sIEE+KSA9PiBLaW5kMjxGLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcjxGIGV4dGVuZHMgVVJJUzIsIEU+KEY6IFBvaW50ZWQyQzxGLCBFPik6IDxBPihlOiBFaXRoZXI8dW5rbm93biwgQT4pID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVyPEYgZXh0ZW5kcyBVUklTPihGOiBQb2ludGVkMTxGPik6IDxBPihlOiBFaXRoZXI8dW5rbm93biwgQT4pID0+IEtpbmQ8RiwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXI8Rj4oRjogUG9pbnRlZDxGPik6IDxBPihlOiBFaXRoZXI8dW5rbm93biwgQT4pID0+IEhLVDxGLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcjxGPihGOiBQb2ludGVkPEY+KTogPEE+KGU6IEVpdGhlcjx1bmtub3duLCBBPikgPT4gSEtUPEYsIE9wdGlvbjxBPj4ge1xuICByZXR1cm4gZmxvdyhPLmZyb21FaXRoZXIsIEYub2YpXG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogRnVuY3RvcjQ8Rj5cbik6IDxCLCBBPihvbk5vbmU6ICgpID0+IEIsIG9uU29tZTogKGE6IEEpID0+IEIpID0+IDxTLCBSLCBFPihtYTogS2luZDQ8RiwgUywgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDQ8RiwgUywgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGdW5jdG9yMzxGPlxuKTogPEIsIEE+KG9uTm9uZTogKCkgPT4gQiwgb25Tb21lOiAoYTogQSkgPT4gQikgPT4gPFIsIEU+KG1hOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoPEYgZXh0ZW5kcyBVUklTMywgRT4oXG4gIEY6IEZ1bmN0b3IzQzxGLCBFPlxuKTogPEIsIEE+KG9uTm9uZTogKCkgPT4gQiwgb25Tb21lOiAoYTogQSkgPT4gQikgPT4gPFI+KG1hOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IyPEY+XG4pOiA8QiwgQT4ob25Ob25lOiAoKSA9PiBCLCBvblNvbWU6IChhOiBBKSA9PiBCKSA9PiA8RT4obWE6IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPEYsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjJDPEYsIEU+XG4pOiA8QiwgQT4ob25Ob25lOiAoKSA9PiBCLCBvblNvbWU6IChhOiBBKSA9PiBCKSA9PiAobWE6IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPEYsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8RiBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPlxuKTogPEIsIEE+KG9uTm9uZTogKCkgPT4gQiwgb25Tb21lOiAoYTogQSkgPT4gQikgPT4gKG1hOiBLaW5kPEYsIE9wdGlvbjxBPj4pID0+IEtpbmQ8RiwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxGPihcbiAgRjogRnVuY3RvcjxGPlxuKTogPEIsIEE+KG9uTm9uZTogKCkgPT4gQiwgb25Tb21lOiAoYTogQSkgPT4gQikgPT4gKG1hOiBIS1Q8RiwgT3B0aW9uPEE+PikgPT4gSEtUPEYsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8Rj4oXG4gIEY6IEZ1bmN0b3I8Rj5cbik6IDxCLCBBPihvbk5vbmU6ICgpID0+IEIsIG9uU29tZTogKGE6IEEpID0+IEIpID0+IChtYTogSEtUPEYsIE9wdGlvbjxBPj4pID0+IEhLVDxGLCBCPiB7XG4gIHJldHVybiAob25Ob25lLCBvblNvbWUpID0+IChtYSkgPT4gRi5tYXAobWEsIE8ubWF0Y2gob25Ob25lLCBvblNvbWUpKVxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUzQ+KFxuICBNOiBDaGFpbjQ8TT5cbik6IDxTLCBSLCBFLCBCLCBBPihcbiAgb25Ob25lOiAoKSA9PiBLaW5kNDxNLCBTLCBSLCBFLCBCPixcbiAgb25Tb21lOiAoYTogQSkgPT4gS2luZDQ8TSwgUywgUiwgRSwgQj5cbikgPT4gKG1hOiBLaW5kNDxNLCBTLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kNDxNLCBTLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUzM+KFxuICBNOiBDaGFpbjM8TT5cbik6IDxSLCBFLCBCLCBBPihcbiAgb25Ob25lOiAoKSA9PiBLaW5kMzxNLCBSLCBFLCBCPixcbiAgb25Tb21lOiAoYTogQSkgPT4gS2luZDM8TSwgUiwgRSwgQj5cbikgPT4gKG1hOiBLaW5kMzxNLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxNLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNIGV4dGVuZHMgVVJJUzMsIEU+KFxuICBNOiBDaGFpbjNDPE0sIEU+XG4pOiA8UiwgQiwgQT4oXG4gIG9uTm9uZTogKCkgPT4gS2luZDM8TSwgUiwgRSwgQj4sXG4gIG9uU29tZTogKGE6IEEpID0+IEtpbmQzPE0sIFIsIEUsIEI+XG4pID0+IChtYTogS2luZDM8TSwgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDM8TSwgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaEU8TSBleHRlbmRzIFVSSVMyPihcbiAgTTogQ2hhaW4yPE0+XG4pOiA8RSwgQiwgQT4oXG4gIG9uTm9uZTogKCkgPT4gS2luZDI8TSwgRSwgQj4sXG4gIG9uU29tZTogKGE6IEEpID0+IEtpbmQyPE0sIEUsIEI+XG4pID0+IChtYTogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaEU8TSBleHRlbmRzIFVSSVMyLCBFPihcbiAgTTogQ2hhaW4yQzxNLCBFPlxuKTogPEIsIEE+KFxuICBvbk5vbmU6ICgpID0+IEtpbmQyPE0sIEUsIEI+LFxuICBvblNvbWU6IChhOiBBKSA9PiBLaW5kMjxNLCBFLCBCPlxuKSA9PiAobWE6IEtpbmQyPE0sIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPE0sIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hFPE0gZXh0ZW5kcyBVUklTPihcbiAgTTogQ2hhaW4xPE0+XG4pOiA8QiwgQT4ob25Ob25lOiAoKSA9PiBLaW5kPE0sIEI+LCBvblNvbWU6IChhOiBBKSA9PiBLaW5kPE0sIEI+KSA9PiAobWE6IEtpbmQ8TSwgT3B0aW9uPEE+PikgPT4gS2luZDxNLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRTxNPihcbiAgTTogQ2hhaW48TT5cbik6IDxCLCBBPihvbk5vbmU6ICgpID0+IEhLVDxNLCBCPiwgb25Tb21lOiAoYTogQSkgPT4gSEtUPE0sIEI+KSA9PiAobWE6IEhLVDxNLCBPcHRpb248QT4+KSA9PiBIS1Q8TSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaEU8TT4oXG4gIE06IENoYWluPE0+XG4pOiA8QiwgQT4ob25Ob25lOiAoKSA9PiBIS1Q8TSwgQj4sIG9uU29tZTogKGE6IEEpID0+IEhLVDxNLCBCPikgPT4gKG1hOiBIS1Q8TSwgT3B0aW9uPEE+PikgPT4gSEtUPE0sIEI+IHtcbiAgcmV0dXJuIChvbk5vbmUsIG9uU29tZSkgPT4gKG1hKSA9PiBNLmNoYWluKG1hLCBPLm1hdGNoKG9uTm9uZSwgb25Tb21lKSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPckVsc2U8TSBleHRlbmRzIFVSSVM0PihcbiAgTTogTW9uYWQ0PE0+XG4pOiA8UywgUiwgRSwgQT4ob25Ob25lOiBMYXp5PEtpbmQ0PE0sIFMsIFIsIEUsIEE+PikgPT4gKGZhOiBLaW5kNDxNLCBTLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kNDxNLCBTLCBSLCBFLCBBPlxuZXhwb3J0IGZ1bmN0aW9uIGdldE9yRWxzZTxNIGV4dGVuZHMgVVJJUzM+KFxuICBNOiBNb25hZDM8TT5cbik6IDxSLCBFLCBBPihvbk5vbmU6IExhenk8S2luZDM8TSwgUiwgRSwgQT4+KSA9PiAoZmE6IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPE0sIFIsIEUsIEE+XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JFbHNlPE0gZXh0ZW5kcyBVUklTMywgRT4oXG4gIE06IE1vbmFkM0M8TSwgRT5cbik6IDxSLCBBPihvbk5vbmU6IExhenk8S2luZDM8TSwgUiwgRSwgQT4+KSA9PiAoZmE6IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPE0sIFIsIEUsIEE+XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JFbHNlPE0gZXh0ZW5kcyBVUklTMj4oXG4gIE06IE1vbmFkMjxNPlxuKTogPEUsIEE+KG9uTm9uZTogTGF6eTxLaW5kMjxNLCBFLCBBPj4pID0+IChmYTogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgQT5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPckVsc2U8TSBleHRlbmRzIFVSSVMyLCBFPihcbiAgTTogTW9uYWQyQzxNLCBFPlxuKTogPEE+KG9uTm9uZTogTGF6eTxLaW5kMjxNLCBFLCBBPj4pID0+IChmYTogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgQT5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPckVsc2U8TSBleHRlbmRzIFVSSVM+KFxuICBNOiBNb25hZDE8TT5cbik6IDxBPihvbk5vbmU6IExhenk8S2luZDxNLCBBPj4pID0+IChmYTogS2luZDxNLCBPcHRpb248QT4+KSA9PiBLaW5kPE0sIEE+XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JFbHNlPE0+KE06IE1vbmFkPE0+KTogPEE+KG9uTm9uZTogTGF6eTxIS1Q8TSwgQT4+KSA9PiAoZmE6IEhLVDxNLCBPcHRpb248QT4+KSA9PiBIS1Q8TSwgQT5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPckVsc2U8TT4oTTogTW9uYWQ8TT4pOiA8QT4ob25Ob25lOiBMYXp5PEhLVDxNLCBBPj4pID0+IChmYTogSEtUPE0sIE9wdGlvbjxBPj4pID0+IEhLVDxNLCBBPiB7XG4gIHJldHVybiAob25Ob25lKSA9PiAoZmEpID0+IE0uY2hhaW4oZmEsIE8ubWF0Y2gob25Ob25lLCBNLm9mKSlcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdHlwZSBjbGFzcyBtZW1iZXJzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwPEYgZXh0ZW5kcyBVUklTND4oXG4gIEY6IEZ1bmN0b3I0PEY+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxTLCBSLCBFPihmYTogS2luZDQ8RiwgUywgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDQ8RiwgUywgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGdW5jdG9yMzxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8UiwgRT4oZmE6IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnVuY3RvcjNDPEYsIEU+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxSPihmYTogS2luZDM8RiwgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8RT4oZmE6IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjJDPEYsIEU+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IChmYTogS2luZDI8RiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IChmYTogS2luZDxGLCBPcHRpb248QT4+KSA9PiBLaW5kPEYsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8Rj4oRjogRnVuY3RvcjxGPik6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gKGZhOiBIS1Q8RiwgT3B0aW9uPEE+PikgPT4gSEtUPEYsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8Rj4oRjogRnVuY3RvcjxGPik6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gKGZhOiBIS1Q8RiwgT3B0aW9uPEE+PikgPT4gSEtUPEYsIE9wdGlvbjxCPj4ge1xuICByZXR1cm4gbWFwXyhGLCBPLkZ1bmN0b3IpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogQXBwbHk0PEY+XG4pOiA8UywgUiwgRSwgQT4oXG4gIGZhOiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248QT4+XG4pID0+IDxCPihmYWI6IEtpbmQ0PEYsIFMsIFIsIEUsIE9wdGlvbjwoYTogQSkgPT4gQj4+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogQXBwbHkzPEY+XG4pOiA8UiwgRSwgQT4oXG4gIGZhOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+XG4pID0+IDxCPihmYWI6IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjwoYTogQSkgPT4gQj4+KSA9PiBLaW5kMzxGLCBSLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogQXBwbHkzQzxGLCBFPlxuKTogPFIsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+KSA9PiA8Qj4oZmFiOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248KGE6IEEpID0+IEI+PikgPT4gS2luZDM8RiwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEFwcGx5MjxGPlxuKTogPEUsIEE+KGZhOiBLaW5kMjxGLCBFLCBPcHRpb248QT4+KSA9PiA8Qj4oZmFiOiBLaW5kMjxGLCBFLCBPcHRpb248KGE6IEEpID0+IEI+PikgPT4gS2luZDI8RiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEFwcGx5MkM8RiwgRT5cbik6IDxBPihmYTogS2luZDI8RiwgRSwgT3B0aW9uPEE+PikgPT4gPEI+KGZhYjogS2luZDI8RiwgRSwgT3B0aW9uPChhOiBBKSA9PiBCPj4pID0+IEtpbmQyPEYsIEUsIE9wdGlvbjxCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEFwcGx5MTxGPlxuKTogPEE+KGZhOiBLaW5kPEYsIE9wdGlvbjxBPj4pID0+IDxCPihmYWI6IEtpbmQ8RiwgT3B0aW9uPChhOiBBKSA9PiBCPj4pID0+IEtpbmQ8RiwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEY+KFxuICBGOiBBcHBseTxGPlxuKTogPEE+KGZhOiBIS1Q8RiwgT3B0aW9uPEE+PikgPT4gPEI+KGZhYjogSEtUPEYsIE9wdGlvbjwoYTogQSkgPT4gQj4+KSA9PiBIS1Q8RiwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEY+KFxuICBGOiBBcHBseTxGPlxuKTogPEE+KGZhOiBIS1Q8RiwgT3B0aW9uPEE+PikgPT4gPEI+KGZhYjogSEtUPEYsIE9wdGlvbjwoYTogQSkgPT4gQj4+KSA9PiBIS1Q8RiwgT3B0aW9uPEI+PiB7XG4gIHJldHVybiBhcF8oRiwgTy5BcHBseSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNIGV4dGVuZHMgVVJJUzQ+KFxuICBNOiBNb25hZDQ8TT5cbik6IDxBLCBTLCBSLCBFLCBCPihcbiAgZjogKGE6IEEpID0+IEtpbmQ0PE0sIFMsIFIsIEUsIE9wdGlvbjxCPj5cbikgPT4gKG1hOiBLaW5kNDxNLCBTLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kNDxNLCBTLCBSLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMzPihcbiAgTTogTW9uYWQzPE0+XG4pOiA8QSwgUiwgRSwgQj4oZjogKGE6IEEpID0+IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxCPj4pID0+IChtYTogS2luZDM8TSwgUiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDM8TSwgUiwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluPE0gZXh0ZW5kcyBVUklTMywgRT4oXG4gIE06IE1vbmFkM0M8TSwgRT5cbik6IDxBLCBSLCBCPihmOiAoYTogQSkgPT4gS2luZDM8TSwgUiwgRSwgT3B0aW9uPEI+PikgPT4gKG1hOiBLaW5kMzxNLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxNLCBSLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMyPihcbiAgTTogTW9uYWQyPE0+XG4pOiA8QSwgRSwgQj4oZjogKGE6IEEpID0+IEtpbmQyPE0sIEUsIE9wdGlvbjxCPj4pID0+IChtYTogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluPE0gZXh0ZW5kcyBVUklTMiwgRT4oXG4gIE06IE1vbmFkMkM8TSwgRT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gS2luZDI8TSwgRSwgT3B0aW9uPEI+PikgPT4gKG1hOiBLaW5kMjxNLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMjxNLCBFLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVM+KFxuICBNOiBNb25hZDE8TT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gS2luZDxNLCBPcHRpb248Qj4+KSA9PiAobWE6IEtpbmQ8TSwgT3B0aW9uPEE+PikgPT4gS2luZDxNLCBPcHRpb248Qj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TT4oXG4gIE06IE1vbmFkPE0+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEhLVDxNLCBPcHRpb248Qj4+KSA9PiAobWE6IEhLVDxNLCBPcHRpb248QT4+KSA9PiBIS1Q8TSwgT3B0aW9uPEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluPE0+KFxuICBNOiBNb25hZDxNPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBIS1Q8TSwgT3B0aW9uPEI+PikgPT4gKG1hOiBIS1Q8TSwgT3B0aW9uPEE+PikgPT4gSEtUPE0sIE9wdGlvbjxCPj4ge1xuICBjb25zdCB6ZXJvTSA9IHplcm8oTSlcbiAgcmV0dXJuIChmKSA9PiAobWEpID0+XG4gICAgTS5jaGFpbihcbiAgICAgIG1hLFxuICAgICAgTy5tYXRjaCgoKSA9PiB6ZXJvTSgpLCBmKVxuICAgIClcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbHQ8TSBleHRlbmRzIFVSSVM0PihcbiAgTTogTW9uYWQ0PE0+XG4pOiA8UywgUiwgRSwgQT4oXG4gIHNlY29uZDogTGF6eTxLaW5kNDxNLCBTLCBSLCBFLCBPcHRpb248QT4+PlxuKSA9PiAoZmlyc3Q6IEtpbmQ0PE0sIFMsIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQ0PE0sIFMsIFIsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBhbHQ8TSBleHRlbmRzIFVSSVMzPihcbiAgTTogTW9uYWQzPE0+XG4pOiA8UiwgRSwgQT4oc2Vjb25kOiBMYXp5PEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4+KSA9PiAoZmlyc3Q6IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPE0sIFIsIEUsIE9wdGlvbjxBPj5cbmV4cG9ydCBmdW5jdGlvbiBhbHQ8TSBleHRlbmRzIFVSSVMzLCBFPihcbiAgTTogTW9uYWQzQzxNLCBFPlxuKTogPFIsIEE+KHNlY29uZDogTGF6eTxLaW5kMzxNLCBSLCBFLCBPcHRpb248QT4+PikgPT4gKGZpcnN0OiBLaW5kMzxNLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxNLCBSLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gYWx0PE0gZXh0ZW5kcyBVUklTMj4oXG4gIE06IE1vbmFkMjxNPlxuKTogPEUsIEE+KHNlY29uZDogTGF6eTxLaW5kMjxNLCBFLCBPcHRpb248QT4+PikgPT4gKGZpcnN0OiBLaW5kMjxNLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMjxNLCBFLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gYWx0PE0gZXh0ZW5kcyBVUklTMiwgRT4oXG4gIE06IE1vbmFkMkM8TSwgRT5cbik6IDxBPihzZWNvbmQ6IExhenk8S2luZDI8TSwgRSwgT3B0aW9uPEE+Pj4pID0+IChmaXJzdDogS2luZDI8TSwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8TSwgRSwgT3B0aW9uPEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGFsdDxNIGV4dGVuZHMgVVJJUz4oXG4gIE06IE1vbmFkMTxNPlxuKTogPEE+KHNlY29uZDogTGF6eTxLaW5kPE0sIE9wdGlvbjxBPj4+KSA9PiAoZmlyc3Q6IEtpbmQ8TSwgT3B0aW9uPEE+PikgPT4gS2luZDxNLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gYWx0PE0+KFxuICBNOiBNb25hZDxNPlxuKTogPEE+KHNlY29uZDogTGF6eTxIS1Q8TSwgT3B0aW9uPEE+Pj4pID0+IChmaXJzdDogSEtUPE0sIE9wdGlvbjxBPj4pID0+IEhLVDxNLCBPcHRpb248QT4+XG5leHBvcnQgZnVuY3Rpb24gYWx0PE0+KFxuICBNOiBNb25hZDxNPlxuKTogPEE+KHNlY29uZDogTGF6eTxIS1Q8TSwgT3B0aW9uPEE+Pj4pID0+IChmaXJzdDogSEtUPE0sIE9wdGlvbjxBPj4pID0+IEhLVDxNLCBPcHRpb248QT4+IHtcbiAgY29uc3QgX3NvbWUgPSBzb21lKE0pXG4gIHJldHVybiAoc2Vjb25kKSA9PiAoZmlyc3QpID0+IE0uY2hhaW4oZmlyc3QsIE8ubWF0Y2goc2Vjb25kLCBfc29tZSkpXG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gdHNsaW50OmRpc2FibGU6IGRlcHJlY2F0aW9uXG5cbi8qKlxuICogQGNhdGVnb3J5IG1vZGVsXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uVDxNLCBBPiBleHRlbmRzIEhLVDxNLCBPcHRpb248QT4+IHt9XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbk08TT4gZXh0ZW5kcyBBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uSEtUMTxNLCBPLlVSST4ge1xuICByZWFkb25seSBjaGFpbjogPEEsIEI+KG1hOiBPcHRpb25UPE0sIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uVDxNLCBCPikgPT4gT3B0aW9uVDxNLCBCPlxuICByZWFkb25seSBhbHQ6IDxBPihmYTogT3B0aW9uVDxNLCBBPiwgdGhhdDogTGF6eTxPcHRpb25UPE0sIEE+PikgPT4gT3B0aW9uVDxNLCBBPlxuICByZWFkb25seSBmb2xkOiA8QSwgUj4obWE6IE9wdGlvblQ8TSwgQT4sIG9uTm9uZTogTGF6eTxIS1Q8TSwgUj4+LCBvblNvbWU6IChhOiBBKSA9PiBIS1Q8TSwgUj4pID0+IEhLVDxNLCBSPlxuICByZWFkb25seSBnZXRPckVsc2U6IDxBPihtYTogT3B0aW9uVDxNLCBBPiwgb25Ob25lOiBMYXp5PEhLVDxNLCBBPj4pID0+IEhLVDxNLCBBPlxuICByZWFkb25seSBmcm9tTTogPEE+KG1hOiBIS1Q8TSwgQT4pID0+IE9wdGlvblQ8TSwgQT5cbiAgcmVhZG9ubHkgbm9uZTogPEEgPSBuZXZlcj4oKSA9PiBPcHRpb25UPE0sIEE+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IG1vZGVsXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB0eXBlIE9wdGlvblQxPE0gZXh0ZW5kcyBVUklTLCBBPiA9IEtpbmQ8TSwgT3B0aW9uPEE+PlxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBPcHRpb25NMTxNIGV4dGVuZHMgVVJJUz4gZXh0ZW5kcyBBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uMTE8TSwgTy5VUkk+IHtcbiAgcmVhZG9ubHkgY2hhaW46IDxBLCBCPihtYTogT3B0aW9uVDE8TSwgQT4sIGY6IChhOiBBKSA9PiBPcHRpb25UMTxNLCBCPikgPT4gT3B0aW9uVDE8TSwgQj5cbiAgcmVhZG9ubHkgYWx0OiA8QT4oZmE6IE9wdGlvblQxPE0sIEE+LCB0aGF0OiBMYXp5PE9wdGlvblQxPE0sIEE+PikgPT4gT3B0aW9uVDE8TSwgQT5cbiAgcmVhZG9ubHkgZm9sZDogPEEsIFI+KG1hOiBPcHRpb25UMTxNLCBBPiwgb25Ob25lOiBMYXp5PEtpbmQ8TSwgUj4+LCBvblNvbWU6IChhOiBBKSA9PiBLaW5kPE0sIFI+KSA9PiBLaW5kPE0sIFI+XG4gIHJlYWRvbmx5IGdldE9yRWxzZTogPEE+KG1hOiBPcHRpb25UMTxNLCBBPiwgb25Ob25lOiBMYXp5PEtpbmQ8TSwgQT4+KSA9PiBLaW5kPE0sIEE+XG4gIHJlYWRvbmx5IGZyb21NOiA8QT4obWE6IEtpbmQ8TSwgQT4pID0+IE9wdGlvblQxPE0sIEE+XG4gIHJlYWRvbmx5IG5vbmU6IDxBID0gbmV2ZXI+KCkgPT4gT3B0aW9uVDE8TSwgQT5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgbW9kZWxcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHR5cGUgT3B0aW9uVDI8TSBleHRlbmRzIFVSSVMyLCBFLCBBPiA9IEtpbmQyPE0sIEUsIE9wdGlvbjxBPj5cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uTTI8TSBleHRlbmRzIFVSSVMyPiBleHRlbmRzIEFwcGxpY2F0aXZlQ29tcG9zaXRpb24yMTxNLCBPLlVSST4ge1xuICByZWFkb25seSBjaGFpbjogPEUsIEEsIEI+KG1hOiBPcHRpb25UMjxNLCBFLCBBPiwgZjogKGE6IEEpID0+IE9wdGlvblQyPE0sIEUsIEI+KSA9PiBPcHRpb25UMjxNLCBFLCBCPlxuICByZWFkb25seSBhbHQ6IDxFLCBBPihmYTogT3B0aW9uVDI8TSwgRSwgQT4sIHRoYXQ6IExhenk8T3B0aW9uVDI8TSwgRSwgQT4+KSA9PiBPcHRpb25UMjxNLCBFLCBBPlxuICByZWFkb25seSBmb2xkOiA8RSwgQSwgUj4oXG4gICAgbWE6IE9wdGlvblQyPE0sIEUsIEE+LFxuICAgIG9uTm9uZTogTGF6eTxLaW5kMjxNLCBFLCBSPj4sXG4gICAgb25Tb21lOiAoYTogQSkgPT4gS2luZDI8TSwgRSwgUj5cbiAgKSA9PiBLaW5kMjxNLCBFLCBSPlxuICByZWFkb25seSBnZXRPckVsc2U6IDxFLCBBPihtYTogT3B0aW9uVDI8TSwgRSwgQT4sIG9uTm9uZTogTGF6eTxLaW5kMjxNLCBFLCBBPj4pID0+IEtpbmQyPE0sIEUsIEE+XG4gIHJlYWRvbmx5IGZyb21NOiA8RSwgQT4obWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBPcHRpb25UMjxNLCBFLCBBPlxuICByZWFkb25seSBub25lOiA8RSA9IG5ldmVyLCBBID0gbmV2ZXI+KCkgPT4gT3B0aW9uVDI8TSwgRSwgQT5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4yLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uTTJDPE0gZXh0ZW5kcyBVUklTMiwgRT4gZXh0ZW5kcyBBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uMkMxPE0sIE8uVVJJLCBFPiB7XG4gIHJlYWRvbmx5IGNoYWluOiA8QSwgQj4obWE6IE9wdGlvblQyPE0sIEUsIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uVDI8TSwgRSwgQj4pID0+IE9wdGlvblQyPE0sIEUsIEI+XG4gIHJlYWRvbmx5IGFsdDogPEE+KGZhOiBPcHRpb25UMjxNLCBFLCBBPiwgdGhhdDogTGF6eTxPcHRpb25UMjxNLCBFLCBBPj4pID0+IE9wdGlvblQyPE0sIEUsIEE+XG4gIHJlYWRvbmx5IGZvbGQ6IDxBLCBSPihcbiAgICBtYTogT3B0aW9uVDI8TSwgRSwgQT4sXG4gICAgb25Ob25lOiBMYXp5PEtpbmQyPE0sIEUsIFI+PixcbiAgICBvblNvbWU6IChhOiBBKSA9PiBLaW5kMjxNLCBFLCBSPlxuICApID0+IEtpbmQyPE0sIEUsIFI+XG4gIHJlYWRvbmx5IGdldE9yRWxzZTogPEE+KG1hOiBPcHRpb25UMjxNLCBFLCBBPiwgb25Ob25lOiBMYXp5PEtpbmQyPE0sIEUsIEE+PikgPT4gS2luZDI8TSwgRSwgQT5cbiAgcmVhZG9ubHkgZnJvbU06IDxBPihtYTogS2luZDI8TSwgRSwgQT4pID0+IE9wdGlvblQyPE0sIEUsIEE+XG4gIHJlYWRvbmx5IG5vbmU6IDxBID0gbmV2ZXI+KCkgPT4gT3B0aW9uVDI8TSwgRSwgQT5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25NPE0gZXh0ZW5kcyBVUklTMj4oTTogTW9uYWQyPE0+KTogT3B0aW9uTTI8TT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbk08TSBleHRlbmRzIFVSSVMyLCBFPihNOiBNb25hZDJDPE0sIEU+KTogT3B0aW9uTTJDPE0sIEU+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25NPE0gZXh0ZW5kcyBVUklTPihNOiBNb25hZDE8TT4pOiBPcHRpb25NMTxNPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW9uTTxNPihNOiBNb25hZDxNPik6IE9wdGlvbk08TT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbk08TT4oTTogTW9uYWQ8TT4pOiBPcHRpb25NPE0+IHtcbiAgY29uc3QgYXBNID0gYXAoTSlcbiAgY29uc3QgbWFwTSA9IG1hcChNKVxuICBjb25zdCBjaGFpbk0gPSBjaGFpbihNKVxuICBjb25zdCBhbHRNID0gYWx0KE0pXG4gIGNvbnN0IGZvbGRNID0gbWF0Y2hFKE0pXG4gIGNvbnN0IGdldE9yRWxzZU0gPSBnZXRPckVsc2UoTSlcbiAgY29uc3QgemVyb00gPSB6ZXJvKE0pXG5cbiAgcmV0dXJuIHtcbiAgICBtYXA6IChmYSwgZikgPT4gcGlwZShmYSwgbWFwTShmKSksXG4gICAgYXA6IChmYWIsIGZhKSA9PiBwaXBlKGZhYiwgYXBNKGZhKSksXG4gICAgb2Y6IHNvbWUoTSksXG4gICAgY2hhaW46IChtYSwgZikgPT4gcGlwZShtYSwgY2hhaW5NKGYpKSxcbiAgICBhbHQ6IChmYSwgdGhhdCkgPT4gcGlwZShmYSwgYWx0TSh0aGF0KSksXG4gICAgZm9sZDogKGZhLCBvbk5vbmUsIG9uU29tZSkgPT4gcGlwZShmYSwgZm9sZE0ob25Ob25lLCBvblNvbWUpKSxcbiAgICBnZXRPckVsc2U6IChmYSwgb25Ob25lKSA9PiBwaXBlKGZhLCBnZXRPckVsc2VNKG9uTm9uZSkpLFxuICAgIGZyb21NOiBmcm9tRihNKSxcbiAgICBub25lOiAoKSA9PiB6ZXJvTSgpXG4gIH1cbn1cbiJdfQ==