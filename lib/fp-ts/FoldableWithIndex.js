"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.foldMapWithIndex = foldMapWithIndex;
exports.getFoldableWithIndexComposition = getFoldableWithIndexComposition;
exports.reduceRightWithIndex = reduceRightWithIndex;
exports.reduceWithIndex = reduceWithIndex;

var _Foldable = require("./Foldable");

var _function = require("./function");

/**
 * A `Foldable` with an additional index.
 * A `FoldableWithIndex` instance must be compatible with its `Foldable` instance
 *
 * ```ts
 * reduce(fa, b, f) = reduceWithIndex(fa, b, (_, b, a) => f(b, a))
 * foldMap(M)(fa, f) = foldMapWithIndex(M)(fa, (_, a) => f(a))
 * reduceRight(fa, b, f) = reduceRightWithIndex(fa, b, (_, a, b) => f(a, b))
 * ```
 *
 * @since 2.0.0
 */
function reduceWithIndex(F, G) {
  return function (b, f) {
    return function (fga) {
      return F.reduceWithIndex(fga, b, function (i, b, ga) {
        return G.reduceWithIndex(ga, b, function (j, b, a) {
          return f([i, j], b, a);
        });
      });
    };
  };
}
/**
 * `foldMapWithIndex` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function foldMapWithIndex(F, G) {
  return function (M) {
    var foldMapWithIndexF = F.foldMapWithIndex(M);
    var foldMapWithIndexG = G.foldMapWithIndex(M);
    return function (f) {
      return function (fga) {
        return foldMapWithIndexF(fga, function (i, ga) {
          return foldMapWithIndexG(ga, function (j, a) {
            return f([i, j], a);
          });
        });
      };
    };
  };
}
/**
 * `reduceRightWithIndex` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function reduceRightWithIndex(F, G) {
  return function (b, f) {
    return function (fga) {
      return F.reduceRightWithIndex(fga, b, function (i, ga, b) {
        return G.reduceRightWithIndex(ga, b, function (j, a, b) {
          return f([i, j], a, b);
        });
      });
    };
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @since 2.0.0
 * @deprecated
 */


/** @deprecated */
function getFoldableWithIndexComposition(F, G) {
  var FC = (0, _Foldable.getFoldableComposition)(F, G);

  var _reduceWithIndex = reduceWithIndex(F, G);

  var _foldMapWithIndex = foldMapWithIndex(F, G);

  var _reduceRightWithIndex = reduceRightWithIndex(F, G);

  return {
    reduce: FC.reduce,
    foldMap: FC.foldMap,
    reduceRight: FC.reduceRight,
    reduceWithIndex: function reduceWithIndex(fga, b, f) {
      return (0, _function.pipe)(fga, _reduceWithIndex(b, f));
    },
    foldMapWithIndex: function foldMapWithIndex(M) {
      var foldMapWithIndexM = _foldMapWithIndex(M);

      return function (fga, f) {
        return (0, _function.pipe)(fga, foldMapWithIndexM(f));
      };
    },
    reduceRightWithIndex: function reduceRightWithIndex(fga, b, f) {
      return (0, _function.pipe)(fga, _reduceRightWithIndex(b, f));
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9Gb2xkYWJsZVdpdGhJbmRleC50cyJdLCJuYW1lcyI6WyJyZWR1Y2VXaXRoSW5kZXgiLCJGIiwiRyIsImIiLCJmIiwiZmdhIiwiaSIsImdhIiwiaiIsImEiLCJmb2xkTWFwV2l0aEluZGV4IiwiTSIsImZvbGRNYXBXaXRoSW5kZXhGIiwiZm9sZE1hcFdpdGhJbmRleEciLCJyZWR1Y2VSaWdodFdpdGhJbmRleCIsImdldEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb24iLCJGQyIsIl9yZWR1Y2VXaXRoSW5kZXgiLCJfZm9sZE1hcFdpdGhJbmRleCIsIl9yZWR1Y2VSaWdodFdpdGhJbmRleCIsInJlZHVjZSIsImZvbGRNYXAiLCJyZWR1Y2VSaWdodCIsImZvbGRNYXBXaXRoSW5kZXhNIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBWUE7O0FBa0JBOztBQTlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtSE8sU0FBU0EsZUFBVCxDQUNMQyxDQURLLEVBRUxDLENBRkssRUFHcUY7QUFDMUYsU0FBTyxVQUFDQyxDQUFELEVBQUlDLENBQUo7QUFBQSxXQUFVLFVBQUNDLEdBQUQ7QUFBQSxhQUNmSixDQUFDLENBQUNELGVBQUYsQ0FBa0JLLEdBQWxCLEVBQXVCRixDQUF2QixFQUEwQixVQUFDRyxDQUFELEVBQUlILENBQUosRUFBT0ksRUFBUDtBQUFBLGVBQWNMLENBQUMsQ0FBQ0YsZUFBRixDQUFrQk8sRUFBbEIsRUFBc0JKLENBQXRCLEVBQXlCLFVBQUNLLENBQUQsRUFBSUwsQ0FBSixFQUFPTSxDQUFQO0FBQUEsaUJBQWFMLENBQUMsQ0FBQyxDQUFDRSxDQUFELEVBQUlFLENBQUosQ0FBRCxFQUFTTCxDQUFULEVBQVlNLENBQVosQ0FBZDtBQUFBLFNBQXpCLENBQWQ7QUFBQSxPQUExQixDQURlO0FBQUEsS0FBVjtBQUFBLEdBQVA7QUFFRDtBQUVEO0FBQ0E7QUFDQTtB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QUFUO0FBQUEsYUFBb0Isb0JBQUtDLEdBQUwsRUFBVWMscUJBQXFCLENBQUNoQixDQUFELEVBQUlDLENBQUosQ0FBL0IsQ0FBcEI7QUFBQTtBQVRqQixHQUFQO0FBV0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgYEZvbGRhYmxlYCB3aXRoIGFuIGFkZGl0aW9uYWwgaW5kZXguXG4gKiBBIGBGb2xkYWJsZVdpdGhJbmRleGAgaW5zdGFuY2UgbXVzdCBiZSBjb21wYXRpYmxlIHdpdGggaXRzIGBGb2xkYWJsZWAgaW5zdGFuY2VcbiAqXG4gKiBgYGB0c1xuICogcmVkdWNlKGZhLCBiLCBmKSA9IHJlZHVjZVdpdGhJbmRleChmYSwgYiwgKF8sIGIsIGEpID0+IGYoYiwgYSkpXG4gKiBmb2xkTWFwKE0pKGZhLCBmKSA9IGZvbGRNYXBXaXRoSW5kZXgoTSkoZmEsIChfLCBhKSA9PiBmKGEpKVxuICogcmVkdWNlUmlnaHQoZmEsIGIsIGYpID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoZmEsIGIsIChfLCBhLCBiKSA9PiBmKGEsIGIpKVxuICogYGBgXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmltcG9ydCB7XG4gIEZvbGRhYmxlLFxuICBGb2xkYWJsZTEsXG4gIEZvbGRhYmxlMixcbiAgRm9sZGFibGUyQyxcbiAgRm9sZGFibGUzLFxuICBGb2xkYWJsZTNDLFxuICBGb2xkYWJsZTQsXG4gIEZvbGRhYmxlQ29tcG9zaXRpb24sXG4gIEZvbGRhYmxlQ29tcG9zaXRpb24xMSxcbiAgRm9sZGFibGVDb21wb3NpdGlvbjEyLFxuICBGb2xkYWJsZUNvbXBvc2l0aW9uMTJDLFxuICBGb2xkYWJsZUNvbXBvc2l0aW9uMjEsXG4gIEZvbGRhYmxlQ29tcG9zaXRpb24yMixcbiAgRm9sZGFibGVDb21wb3NpdGlvbjIyQyxcbiAgRm9sZGFibGVDb21wb3NpdGlvbjJDMSxcbiAgZ2V0Rm9sZGFibGVDb21wb3NpdGlvblxufSBmcm9tICcuL0ZvbGRhYmxlJ1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nXG5pbXBvcnQgeyBIS1QsIEtpbmQsIEtpbmQyLCBLaW5kMywgS2luZDQsIFVSSVMsIFVSSVMyLCBVUklTMywgVVJJUzQgfSBmcm9tICcuL0hLVCdcbmltcG9ydCB7IE1vbm9pZCB9IGZyb20gJy4vTW9ub2lkJ1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBtb2RlbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRhYmxlV2l0aEluZGV4PEYsIEk+IGV4dGVuZHMgRm9sZGFibGU8Rj4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxBLCBCPihmYTogSEtUPEYsIEE+LCBiOiBCLCBmOiAoaTogSSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZmE6IEhLVDxGLCBBPiwgZjogKGk6IEksIGE6IEEpID0+IE0pID0+IE1cbiAgcmVhZG9ubHkgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IDxBLCBCPihmYTogSEtUPEYsIEE+LCBiOiBCLCBmOiAoaTogSSwgYTogQSwgYjogQikgPT4gQikgPT4gQlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRhYmxlV2l0aEluZGV4MTxGIGV4dGVuZHMgVVJJUywgST4gZXh0ZW5kcyBGb2xkYWJsZTE8Rj4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxBLCBCPihmYTogS2luZDxGLCBBPiwgYjogQiwgZjogKGk6IEksIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPEE+KGZhOiBLaW5kPEYsIEE+LCBmOiAoaTogSSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEEsIEI+KGZhOiBLaW5kPEYsIEE+LCBiOiBCLCBmOiAoaTogSSwgYTogQSwgYjogQikgPT4gQikgPT4gQlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRhYmxlV2l0aEluZGV4MjxGIGV4dGVuZHMgVVJJUzIsIEk+IGV4dGVuZHMgRm9sZGFibGUyPEY+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8RSwgQSwgQj4oZmE6IEtpbmQyPEYsIEUsIEE+LCBiOiBCLCBmOiAoaTogSSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8RSwgQT4oZmE6IEtpbmQyPEYsIEUsIEE+LCBmOiAoaTogSSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEUsIEEsIEI+KGZhOiBLaW5kMjxGLCBFLCBBPiwgYjogQiwgZjogKGk6IEksIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkYWJsZVdpdGhJbmRleDJDPEYgZXh0ZW5kcyBVUklTMiwgSSwgRT4gZXh0ZW5kcyBGb2xkYWJsZTJDPEYsIEU+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8QSwgQj4oZmE6IEtpbmQyPEYsIEUsIEE+LCBiOiBCLCBmOiAoaTogSSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZmE6IEtpbmQyPEYsIEUsIEE+LCBmOiAoaTogSSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEEsIEI+KGZhOiBLaW5kMjxGLCBFLCBBPiwgYjogQiwgZjogKGk6IEksIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkYWJsZVdpdGhJbmRleDM8RiBleHRlbmRzIFVSSVMzLCBJPiBleHRlbmRzIEZvbGRhYmxlMzxGPiB7XG4gIHJlYWRvbmx5IHJlZHVjZVdpdGhJbmRleDogPFIsIEUsIEEsIEI+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgYjogQiwgZjogKGk6IEksIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPFIsIEUsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgZjogKGk6IEksIGE6IEEpID0+IE0pID0+IE1cbiAgcmVhZG9ubHkgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IDxSLCBFLCBBLCBCPihmYTogS2luZDM8RiwgUiwgRSwgQT4sIGI6IEIsIGY6IChpOiBJLCBhOiBBLCBiOiBCKSA9PiBCKSA9PiBCXG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMi4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXgzQzxGIGV4dGVuZHMgVVJJUzMsIEksIEU+IGV4dGVuZHMgRm9sZGFibGUzQzxGLCBFPiB7XG4gIHJlYWRvbmx5IHJlZHVjZVdpdGhJbmRleDogPFIsIEEsIEI+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgYjogQiwgZjogKGk6IEksIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPFIsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgZjogKGk6IEksIGE6IEEpID0+IE0pID0+IE1cbiAgcmVhZG9ubHkgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IDxSLCBBLCBCPihmYTogS2luZDM8RiwgUiwgRSwgQT4sIGI6IEIsIGY6IChpOiBJLCBhOiBBLCBiOiBCKSA9PiBCKSA9PiBCXG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXg0PEYgZXh0ZW5kcyBVUklTNCwgST4gZXh0ZW5kcyBGb2xkYWJsZTQ8Rj4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxTLCBSLCBFLCBBLCBCPihmYTogS2luZDQ8RiwgUywgUiwgRSwgQT4sIGI6IEIsIGY6IChpOiBJLCBiOiBCLCBhOiBBKSA9PiBCKSA9PiBCXG4gIHJlYWRvbmx5IGZvbGRNYXBXaXRoSW5kZXg6IDxNPihNOiBNb25vaWQ8TT4pID0+IDxTLCBSLCBFLCBBPihmYTogS2luZDQ8RiwgUywgUiwgRSwgQT4sIGY6IChpOiBJLCBhOiBBKSA9PiBNKSA9PiBNXG4gIHJlYWRvbmx5IHJlZHVjZVJpZ2h0V2l0aEluZGV4OiA8UywgUiwgRSwgQSwgQj4oZmE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+LCBiOiBCLCBmOiAoaTogSSwgYTogQSwgYjogQikgPT4gQikgPT4gQlxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIGByZWR1Y2VXaXRoSW5kZXhgIGNvbXBvc2l0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlV2l0aEluZGV4PEYgZXh0ZW5kcyBVUklTLCBJLCBHIGV4dGVuZHMgVVJJUywgSj4oXG4gIEY6IEZvbGRhYmxlV2l0aEluZGV4MTxGLCBJPixcbiAgRzogRm9sZGFibGVXaXRoSW5kZXgxPEcsIEo+XG4pOiA8QiwgQT4oYjogQiwgZjogKGlqOiByZWFkb25seSBbSSwgSl0sIGI6IEIsIGE6IEEpID0+IEIpID0+IChmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj4pID0+IEJcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VXaXRoSW5kZXg8RiwgSSwgRywgSj4oXG4gIEY6IEZvbGRhYmxlV2l0aEluZGV4PEYsIEk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDxHLCBKPlxuKTogPEIsIEE+KGI6IEIsIGY6IChpajogcmVhZG9ubHkgW0ksIEpdLCBiOiBCLCBhOiBBKSA9PiBCKSA9PiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gQlxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVdpdGhJbmRleDxGLCBJLCBHLCBKPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXg8RiwgST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4PEcsIEo+XG4pOiA8QiwgQT4oYjogQiwgZjogKGlqOiByZWFkb25seSBbSSwgSl0sIGI6IEIsIGE6IEEpID0+IEIpID0+IChmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+KSA9PiBCIHtcbiAgcmV0dXJuIChiLCBmKSA9PiAoZmdhKSA9PlxuICAgIEYucmVkdWNlV2l0aEluZGV4KGZnYSwgYiwgKGksIGIsIGdhKSA9PiBHLnJlZHVjZVdpdGhJbmRleChnYSwgYiwgKGosIGIsIGEpID0+IGYoW2ksIGpdLCBiLCBhKSkpXG59XG5cbi8qKlxuICogYGZvbGRNYXBXaXRoSW5kZXhgIGNvbXBvc2l0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleDxGIGV4dGVuZHMgVVJJUywgSSwgRyBleHRlbmRzIFVSSVMsIEo+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDE8RiwgST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4MTxHLCBKPlxuKTogPE0+KE06IE1vbm9pZDxNPikgPT4gPEE+KGY6IChpajogcmVhZG9ubHkgW0ksIEpdLCBhOiBBKSA9PiBNKSA9PiAoZmdhOiBLaW5kPEYsIEtpbmQ8RywgQT4+KSA9PiBNXG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleDxGLCBJLCBHLCBKPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXg8RiwgST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4PEcsIEo+XG4pOiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZjogKGlqOiByZWFkb25seSBbSSwgSl0sIGE6IEEpID0+IE0pID0+IChmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+KSA9PiBNXG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleDxGLCBJLCBHLCBKPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXg8RiwgST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4PEcsIEo+XG4pOiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZjogKGlqOiByZWFkb25seSBbSSwgSl0sIGE6IEEpID0+IE0pID0+IChmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+KSA9PiBNIHtcbiAgcmV0dXJuIChNKSA9PiB7XG4gICAgY29uc3QgZm9sZE1hcFdpdGhJbmRleEYgPSBGLmZvbGRNYXBXaXRoSW5kZXgoTSlcbiAgICBjb25zdCBmb2xkTWFwV2l0aEluZGV4RyA9IEcuZm9sZE1hcFdpdGhJbmRleChNKVxuICAgIHJldHVybiAoZikgPT4gKGZnYSkgPT4gZm9sZE1hcFdpdGhJbmRleEYoZmdhLCAoaSwgZ2EpID0+IGZvbGRNYXBXaXRoSW5kZXhHKGdhLCAoaiwgYSkgPT4gZihbaSwgal0sIGEpKSlcbiAgfVxufVxuXG4vKipcbiAqIGByZWR1Y2VSaWdodFdpdGhJbmRleGAgY29tcG9zaXRpb24uXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodFdpdGhJbmRleDxGIGV4dGVuZHMgVVJJUywgSSwgRyBleHRlbmRzIFVSSVMsIEo+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDE8RiwgST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4MTxHLCBKPlxuKTogPEIsIEE+KGI6IEIsIGY6IChpajogcmVhZG9ubHkgW0ksIEpdLCBhOiBBLCBiOiBCKSA9PiBCKSA9PiAoZmdhOiBLaW5kPEYsIEtpbmQ8RywgQT4+KSA9PiBCXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHRXaXRoSW5kZXg8RiwgSSwgRywgSj4oXG4gIEY6IEZvbGRhYmxlV2l0aEluZGV4PEYsIEk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDxHLCBKPlxuKTogPEIsIEE+KGI6IEIsIGY6IChpajogcmVhZG9ubHkgW0ksIEpdLCBhOiBBLCBiOiBCKSA9PiBCKSA9PiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gQlxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0V2l0aEluZGV4PEYsIEksIEcsIEo+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDxGLCBJPixcbiAgRzogRm9sZGFibGVXaXRoSW5kZXg8RywgSj5cbik6IDxCLCBBPihiOiBCLCBmOiAoaWo6IHJlYWRvbmx5IFtJLCBKXSwgYTogQSwgYjogQikgPT4gQikgPT4gKGZnYTogSEtUPEYsIEhLVDxHLCBBPj4pID0+IEIge1xuICByZXR1cm4gKGIsIGYpID0+IChmZ2EpID0+XG4gICAgRi5yZWR1Y2VSaWdodFdpdGhJbmRleChmZ2EsIGIsIChpLCBnYSwgYikgPT4gRy5yZWR1Y2VSaWdodFdpdGhJbmRleChnYSwgYiwgKGosIGEsIGIpID0+IGYoW2ksIGpdLCBhLCBiKSkpXG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gdHNsaW50OmRpc2FibGU6IGRlcHJlY2F0aW9uXG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb248RiwgRkksIEcsIEdJPiBleHRlbmRzIEZvbGRhYmxlQ29tcG9zaXRpb248RiwgRz4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxBLCBCPihmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPEE+KGZnYTogSEtUPEYsIEhLVDxHLCBBPj4sIGY6IChpOiBbRkksIEdJXSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEEsIEI+KGZnYTogSEtUPEYsIEhLVDxHLCBBPj4sIGI6IEIsIGY6IChpOiBbRkksIEdJXSwgYTogQSwgYjogQikgPT4gQikgPT4gQlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMTE8RiBleHRlbmRzIFVSSVMsIEZJLCBHIGV4dGVuZHMgVVJJUywgR0k+XG4gIGV4dGVuZHMgRm9sZGFibGVDb21wb3NpdGlvbjExPEYsIEc+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8QSwgQj4oZmdhOiBLaW5kPEYsIEtpbmQ8RywgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPEE+KGZnYTogS2luZDxGLCBLaW5kPEcsIEE+PiwgZjogKGk6IFtGSSwgR0ldLCBhOiBBKSA9PiBNKSA9PiBNXG4gIHJlYWRvbmx5IHJlZHVjZVJpZ2h0V2l0aEluZGV4OiA8QSwgQj4oZmdhOiBLaW5kPEYsIEtpbmQ8RywgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjEyPEYgZXh0ZW5kcyBVUklTLCBGSSwgRyBleHRlbmRzIFVSSVMyLCBHST5cbiAgZXh0ZW5kcyBGb2xkYWJsZUNvbXBvc2l0aW9uMTI8RiwgRz4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxFLCBBLCBCPihmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGI6IEIsIGE6IEEpID0+IEIpID0+IEJcbiAgcmVhZG9ubHkgZm9sZE1hcFdpdGhJbmRleDogPE0+KE06IE1vbm9pZDxNPikgPT4gPEUsIEE+KGZnYTogS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sIGY6IChpOiBbRkksIEdJXSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEUsIEEsIEI+KGZnYTogS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sIGI6IEIsIGY6IChpOiBbRkksIEdJXSwgYTogQSwgYjogQikgPT4gQikgPT4gQlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMTJDPEYgZXh0ZW5kcyBVUklTLCBGSSwgRyBleHRlbmRzIFVSSVMyLCBHSSwgRT5cbiAgZXh0ZW5kcyBGb2xkYWJsZUNvbXBvc2l0aW9uMTJDPEYsIEcsIEU+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8QSwgQj4oZmdhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgYjogQiwgZjogKGk6IFtGSSwgR0ldLCBiOiBCLCBhOiBBKSA9PiBCKSA9PiBCXG4gIHJlYWRvbmx5IGZvbGRNYXBXaXRoSW5kZXg6IDxNPihNOiBNb25vaWQ8TT4pID0+IDxBPihmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBmOiAoaTogW0ZJLCBHSV0sIGE6IEEpID0+IE0pID0+IE1cbiAgcmVhZG9ubHkgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IDxBLCBCPihmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjIxPEYgZXh0ZW5kcyBVUklTMiwgRkksIEcgZXh0ZW5kcyBVUklTLCBHST5cbiAgZXh0ZW5kcyBGb2xkYWJsZUNvbXBvc2l0aW9uMjE8RiwgRz4ge1xuICByZWFkb25seSByZWR1Y2VXaXRoSW5kZXg6IDxGRSwgQSwgQj4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDxHLCBBPj4sIGI6IEIsIGY6IChpOiBbRkksIEdJXSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oXG4gICAgTTogTW9ub2lkPE0+XG4gICkgPT4gPEZFLCBBPihmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kPEcsIEE+PiwgZjogKGk6IFtGSSwgR0ldLCBhOiBBKSA9PiBNKSA9PiBNXG4gIHJlYWRvbmx5IHJlZHVjZVJpZ2h0V2l0aEluZGV4OiA8RkUsIEEsIEI+KGZnYTogS2luZDI8RiwgRkUsIEtpbmQ8RywgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjJDMTxGIGV4dGVuZHMgVVJJUzIsIEZJLCBHIGV4dGVuZHMgVVJJUywgR0ksIEZFPlxuICBleHRlbmRzIEZvbGRhYmxlQ29tcG9zaXRpb24yQzE8RiwgRywgRkU+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8QSwgQj4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDxHLCBBPj4sIGI6IEIsIGY6IChpOiBbRkksIEdJXSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oTTogTW9ub2lkPE0+KSA9PiA8QT4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDxHLCBBPj4sIGY6IChpOiBbRkksIEdJXSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEEsIEI+KGZnYTogS2luZDI8RiwgRkUsIEtpbmQ8RywgQT4+LCBiOiBCLCBmOiAoaTogW0ZJLCBHSV0sIGE6IEEsIGI6IEIpID0+IEIpID0+IEJcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjIyPEYgZXh0ZW5kcyBVUklTMiwgRkksIEcgZXh0ZW5kcyBVUklTMiwgR0k+XG4gIGV4dGVuZHMgRm9sZGFibGVDb21wb3NpdGlvbjIyPEYsIEc+IHtcbiAgcmVhZG9ubHkgcmVkdWNlV2l0aEluZGV4OiA8RkUsIEdFLCBBLCBCPihcbiAgICBmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+LFxuICAgIGI6IEIsXG4gICAgZjogKGk6IFtGSSwgR0ldLCBiOiBCLCBhOiBBKSA9PiBCXG4gICkgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oXG4gICAgTTogTW9ub2lkPE0+XG4gICkgPT4gPEZFLCBHRSwgQT4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEE+PiwgZjogKGk6IFtGSSwgR0ldLCBhOiBBKSA9PiBNKSA9PiBNXG4gIHJlYWRvbmx5IHJlZHVjZVJpZ2h0V2l0aEluZGV4OiA8RkUsIEdFLCBBLCBCPihcbiAgICBmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+LFxuICAgIGI6IEIsXG4gICAgZjogKGk6IFtGSSwgR0ldLCBhOiBBLCBiOiBCKSA9PiBCXG4gICkgPT4gQlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMjJDPEYgZXh0ZW5kcyBVUklTMiwgRkksIEcgZXh0ZW5kcyBVUklTMiwgR0ksIEU+XG4gIGV4dGVuZHMgRm9sZGFibGVDb21wb3NpdGlvbjIyQzxGLCBHLCBFPiB7XG4gIHJlYWRvbmx5IHJlZHVjZVdpdGhJbmRleDogPEZFLCBBLCBCPihmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sIGI6IEIsIGY6IChpOiBbRkksIEdJXSwgYjogQiwgYTogQSkgPT4gQikgPT4gQlxuICByZWFkb25seSBmb2xkTWFwV2l0aEluZGV4OiA8TT4oXG4gICAgTTogTW9ub2lkPE0+XG4gICkgPT4gPEZFLCBBPihmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sIGY6IChpOiBbRkksIEdJXSwgYTogQSkgPT4gTSkgPT4gTVxuICByZWFkb25seSByZWR1Y2VSaWdodFdpdGhJbmRleDogPEZFLCBBLCBCPihcbiAgICBmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sXG4gICAgYjogQixcbiAgICBmOiAoaTogW0ZJLCBHSV0sIGE6IEEsIGI6IEIpID0+IEJcbiAgKSA9PiBCXG59XG5cbi8qKlxuICogVXNlXG4gKlxuICogLSBbcmVkdWNlV2l0aEluZGV4XSgjcmVkdWNld2l0aGluZGV4KVxuICogLSBbZm9sZE1hcFdpdGhJbmRleF0oI2ZvbGRtYXB3aXRoaW5kZXgpXG4gKiAtIFtyZWR1Y2VSaWdodFdpdGhJbmRleF0oI3JlZHVjZXJpZ2h0d2l0aGluZGV4KVxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEZJLCBHIGV4dGVuZHMgVVJJUzIsIEdJLCBFPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXgyPEYsIEZJPixcbiAgRzogRm9sZGFibGVXaXRoSW5kZXgyQzxHLCBHSSwgRT5cbik6IEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb24yMkM8RiwgRkksIEcsIEdJLCBFPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEZJLCBHIGV4dGVuZHMgVVJJUzIsIEdJPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXgyPEYsIEZJPixcbiAgRzogRm9sZGFibGVXaXRoSW5kZXgyPEcsIEdJPlxuKTogRm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjIyPEYsIEZJLCBHLCBHST5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMyLCBGSSwgRyBleHRlbmRzIFVSSVMsIEdJLCBFPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXgyQzxGLCBGSSwgRT4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4MTxHLCBHST5cbik6IEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb24yQzE8RiwgRkksIEcsIEdJLCBFPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEZJLCBHIGV4dGVuZHMgVVJJUywgR0k+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDI8RiwgRkk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDE8RywgR0k+XG4pOiBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMjE8RiwgRkksIEcsIEdJPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUywgRkksIEcgZXh0ZW5kcyBVUklTMiwgR0k+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDE8RiwgRkk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDI8RywgR0k+XG4pOiBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMTI8RiwgRkksIEcsIEdJPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUywgRkksIEcgZXh0ZW5kcyBVUklTMiwgR0k+KFxuICBGOiBGb2xkYWJsZVdpdGhJbmRleDE8RiwgRkk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDI8RywgR0k+XG4pOiBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uMTI8RiwgRkksIEcsIEdJPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9sZGFibGVXaXRoSW5kZXhDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUywgRkksIEcgZXh0ZW5kcyBVUklTLCBHST4oXG4gIEY6IEZvbGRhYmxlV2l0aEluZGV4MTxGLCBGST4sXG4gIEc6IEZvbGRhYmxlV2l0aEluZGV4MTxHLCBHST5cbik6IEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb24xMTxGLCBGSSwgRywgR0k+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uPEYsIEZJLCBHLCBHST4oXG4gIEY6IEZvbGRhYmxlV2l0aEluZGV4PEYsIEZJPixcbiAgRzogRm9sZGFibGVXaXRoSW5kZXg8RywgR0k+XG4pOiBGb2xkYWJsZVdpdGhJbmRleENvbXBvc2l0aW9uPEYsIEZJLCBHLCBHST5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb248RiwgRkksIEcsIEdJPihcbiAgRjogRm9sZGFibGVXaXRoSW5kZXg8RiwgRkk+LFxuICBHOiBGb2xkYWJsZVdpdGhJbmRleDxHLCBHST5cbik6IEZvbGRhYmxlV2l0aEluZGV4Q29tcG9zaXRpb248RiwgRkksIEcsIEdJPiB7XG4gIGNvbnN0IEZDID0gZ2V0Rm9sZGFibGVDb21wb3NpdGlvbihGLCBHKVxuICBjb25zdCBfcmVkdWNlV2l0aEluZGV4ID0gcmVkdWNlV2l0aEluZGV4KEYsIEcpXG4gIGNvbnN0IF9mb2xkTWFwV2l0aEluZGV4ID0gZm9sZE1hcFdpdGhJbmRleChGLCBHKVxuICBjb25zdCBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSByZWR1Y2VSaWdodFdpdGhJbmRleChGLCBHKVxuICByZXR1cm4ge1xuICAgIHJlZHVjZTogRkMucmVkdWNlLFxuICAgIGZvbGRNYXA6IEZDLmZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IEZDLnJlZHVjZVJpZ2h0LFxuICAgIHJlZHVjZVdpdGhJbmRleDogKGZnYSwgYiwgZjogYW55KSA9PiBwaXBlKGZnYSwgX3JlZHVjZVdpdGhJbmRleChiLCBmKSksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogKE0pID0+IHtcbiAgICAgIGNvbnN0IGZvbGRNYXBXaXRoSW5kZXhNID0gX2ZvbGRNYXBXaXRoSW5kZXgoTSlcbiAgICAgIHJldHVybiAoZmdhLCBmOiBhbnkpID0+IHBpcGUoZmdhLCBmb2xkTWFwV2l0aEluZGV4TShmKSlcbiAgICB9LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAoZmdhLCBiLCBmOiBhbnkpID0+IHBpcGUoZmdhLCBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpXG4gIH1cbn1cbiJdfQ==