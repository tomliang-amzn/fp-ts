"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fanIn = fanIn;
exports.fanin = fanin;
exports.split = split;
exports.splitChoice = splitChoice;

var _function = require("./function");

/**
 * The `Choice` class extends `Profunctor` with combinators for working with
 * sum types.
 *
 * `left` and `right` lift values in a `Profunctor` to act on the `Left` and
 * `Right` components of a sum, respectively.
 *
 * Looking at `Choice` through the intuition of inputs and outputs
 * yields the following type signature:
 *
 * ```purescript
 * left ::  forall input output a. p input output -> p (Either input a) (Either output a)
 * right :: forall input output a. p input output -> p (Either a input) (Either a output)
 * ```
 *
 * If we specialize the profunctor `p` to the `function` arrow, we get the following type
 * signatures:
 *
 * ```purescript
 * left ::  forall input output a. (input -> output) -> (Either input a) -> (Either output a)
 * right :: forall input output a. (input -> output) -> (Either a input) -> (Either a output)
 * ```
 *
 * When the `profunctor` is `Function` application, `left` allows you to map a function over the
 * left side of an `Either`, and `right` maps it over the right side (same as `map` would do).
 *
 * Adapted from https://github.com/purescript/purescript-profunctor/blob/master/src/Data/Profunctor/Choice.purs
 *
 * @since 2.0.0
 */
function split(P, C) {
  return function (pab, pcd) {
    return C.compose(P.right(pcd), P.left(pab));
  };
}
/**
 * Compose a value which eliminates a sum from two values, each eliminating
 * one side of the sum.
 *
 * This combinator is useful when assembling values from smaller components,
 * because it provides a way to support two different types of input.
 *
 * Specializing `fanIn` to function application would look like this:
 *
 * ```purescript
 * fanIn :: forall a b c d. (a -> c) -> (b -> c) -> Either a b -> c
 * ```
 *
 * We take two functions, `f` and `g`, which both return the same type `c` and we transform them into a
 * single function which takes an `Either` value with the parameter type of `f` on the left side and
 * the parameter type of `g` on the right side. The function then runs either `f` or `g`, depending on
 * whether the `Either` value is a `Left` or a `Right`.
 * This allows us to bundle two different computations which both have the same result type into one
 * function which will run the appropriate computation based on the parameter supplied in the `Either` value.
 *
 * @since 2.10.0
 */


function fanIn(P, C) {
  var splitPC = split(P, C);
  return function (pac, pbc) {
    return C.compose(P.promap(C.id(), function (cc) {
      return cc._tag === 'Left' ? cc.left : cc.right;
    }, _function.identity), splitPC(pac, pbc));
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------

/**
 * Use [`split`](#split) instead.
 *
 * @since 2.0.0
 * @deprecated
 */


function splitChoice(F) {
  return split(F, F);
}
/**
 * Use [`fanIn`](#fanIn) instead.
 *
 * @since 2.0.0
 * @deprecated
 */


function fanin(F) {
  return fanIn(F, F);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9DaG9pY2UudHMiXSwibmFtZXMiOlsic3BsaXQiLCJQIiwiQyIsInBhYiIsInBjZCIsImNvbXBvc2UiLCJyaWdodCIsImxlZnQiLCJmYW5JbiIsInNwbGl0UEMiLCJwYWMiLCJwYmMiLCJwcm9tYXAiLCJpZCIsImNjIiwiX3RhZyIsImlkZW50aXR5Iiwic3BsaXRDaG9pY2UiLCJGIiwiZmFuaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFrQ0E7O0FBbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtGTyxTQUFTQSxLQUFULENBQ0xDLENBREssRUFFTEMsQ0FGSyxFQUd3RjtBQUM3RixTQUFPLFVBQWFDLEdBQWIsRUFBaUNDLEdBQWpDO0FBQUEsV0FBd0RGLENBQUMsQ0FBQ0csT0FBRixDQUFVSixDQUFDLENBQUNLLEtBQUYsQ0FBaUJGLEdBQWpCLENBQVYsRUFBaUNILENBQUMsQ0FBQ00sSUFBRixDQUFnQkosR0FBaEIsQ0FBakMsQ0FBeEQ7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaUJPLFNBQVNLLEtBQVQsQ0FDTFAsQ0FESyxFQUVMQyxDQUZLLEVBRzBFO0FBQy9FLE1BQU1PLE9BQU8sR0FBR1QsS0FBSyxDQUFDQyxDQUFELEVBQUlDLENBQUosQ0FBckI7QUFDQSxTQUFPLFVBQVVRLEdBQVYsRUFBOEJDLEdBQTlCO0FBQUEsV0FDTFQsQ0FBQyxDQUFDRyxPQUFGLENBQ0VKLENBQUMsQ0FBQ1csTUFBRixDQUFTVixDQUFDLENBQUNXLEVBQUYsRUFBVCxFQUFvQixVQUFDQyxFQUFEO0FBQUEsYUFBdUJBLEVBQUUsQ0FBQ0MsSUFBSCxLQUFZLE1BQVosR0FBcUJELEVBQUUsQ0FBQ1AsSUFBeEIsR0FBK0JPLEVBQUUsQ0FBQ1IsS0FBekQ7QUFBQSxLQUFwQixFQUFxRlUsa0JBQXJGLENBREYsRUFFRVAsT0FBTyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sQ0FGVCxDQURLO0FBQUEsR0FBUDtBQUtELEMsQ0FFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFZTyxTQUFTTSxXQUFULENBQ0xDLENBREssRUFFd0Y7QUFDN0YsU0FBT2xCLEtBQUssQ0FBQ2tCLENBQUQsRUFBSUEsQ0FBSixDQUFaO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVlPLFNBQVNDLEtBQVQsQ0FDTEQsQ0FESyxFQUUwRTtBQUMvRSxTQUFPVixLQUFLLENBQUNVLENBQUQsRUFBSUEsQ0FBSixDQUFaO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBgQ2hvaWNlYCBjbGFzcyBleHRlbmRzIGBQcm9mdW5jdG9yYCB3aXRoIGNvbWJpbmF0b3JzIGZvciB3b3JraW5nIHdpdGhcbiAqIHN1bSB0eXBlcy5cbiAqXG4gKiBgbGVmdGAgYW5kIGByaWdodGAgbGlmdCB2YWx1ZXMgaW4gYSBgUHJvZnVuY3RvcmAgdG8gYWN0IG9uIHRoZSBgTGVmdGAgYW5kXG4gKiBgUmlnaHRgIGNvbXBvbmVudHMgb2YgYSBzdW0sIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBMb29raW5nIGF0IGBDaG9pY2VgIHRocm91Z2ggdGhlIGludHVpdGlvbiBvZiBpbnB1dHMgYW5kIG91dHB1dHNcbiAqIHlpZWxkcyB0aGUgZm9sbG93aW5nIHR5cGUgc2lnbmF0dXJlOlxuICpcbiAqIGBgYHB1cmVzY3JpcHRcbiAqIGxlZnQgOjogIGZvcmFsbCBpbnB1dCBvdXRwdXQgYS4gcCBpbnB1dCBvdXRwdXQgLT4gcCAoRWl0aGVyIGlucHV0IGEpIChFaXRoZXIgb3V0cHV0IGEpXG4gKiByaWdodCA6OiBmb3JhbGwgaW5wdXQgb3V0cHV0IGEuIHAgaW5wdXQgb3V0cHV0IC0+IHAgKEVpdGhlciBhIGlucHV0KSAoRWl0aGVyIGEgb3V0cHV0KVxuICogYGBgXG4gKlxuICogSWYgd2Ugc3BlY2lhbGl6ZSB0aGUgcHJvZnVuY3RvciBgcGAgdG8gdGhlIGBmdW5jdGlvbmAgYXJyb3csIHdlIGdldCB0aGUgZm9sbG93aW5nIHR5cGVcbiAqIHNpZ25hdHVyZXM6XG4gKlxuICogYGBgcHVyZXNjcmlwdFxuICogbGVmdCA6OiAgZm9yYWxsIGlucHV0IG91dHB1dCBhLiAoaW5wdXQgLT4gb3V0cHV0KSAtPiAoRWl0aGVyIGlucHV0IGEpIC0+IChFaXRoZXIgb3V0cHV0IGEpXG4gKiByaWdodCA6OiBmb3JhbGwgaW5wdXQgb3V0cHV0IGEuIChpbnB1dCAtPiBvdXRwdXQpIC0+IChFaXRoZXIgYSBpbnB1dCkgLT4gKEVpdGhlciBhIG91dHB1dClcbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGBwcm9mdW5jdG9yYCBpcyBgRnVuY3Rpb25gIGFwcGxpY2F0aW9uLCBgbGVmdGAgYWxsb3dzIHlvdSB0byBtYXAgYSBmdW5jdGlvbiBvdmVyIHRoZVxuICogbGVmdCBzaWRlIG9mIGFuIGBFaXRoZXJgLCBhbmQgYHJpZ2h0YCBtYXBzIGl0IG92ZXIgdGhlIHJpZ2h0IHNpZGUgKHNhbWUgYXMgYG1hcGAgd291bGQgZG8pLlxuICpcbiAqIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vcHVyZXNjcmlwdC9wdXJlc2NyaXB0LXByb2Z1bmN0b3IvYmxvYi9tYXN0ZXIvc3JjL0RhdGEvUHJvZnVuY3Rvci9DaG9pY2UucHVyc1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5pbXBvcnQgeyBFaXRoZXIgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IEhLVDIsIEtpbmQyLCBLaW5kMywgVVJJUzIsIFVSSVMzLCBVUklTNCwgS2luZDQgfSBmcm9tICcuL0hLVCdcbmltcG9ydCB7IFByb2Z1bmN0b3IsIFByb2Z1bmN0b3IyLCBQcm9mdW5jdG9yMywgUHJvZnVuY3RvcjQgfSBmcm9tICcuL1Byb2Z1bmN0b3InXG5pbXBvcnQgeyBDYXRlZ29yeSwgQ2F0ZWdvcnkyLCBDYXRlZ29yeTMsIENhdGVnb3J5NCB9IGZyb20gJy4vQ2F0ZWdvcnknXG5pbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIG1vZGVsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hvaWNlPEY+IGV4dGVuZHMgUHJvZnVuY3RvcjxGPiB7XG4gIHJlYWRvbmx5IGxlZnQ6IDxBLCBCLCBDPihwYWI6IEhLVDI8RiwgQSwgQj4pID0+IEhLVDI8RiwgRWl0aGVyPEEsIEM+LCBFaXRoZXI8QiwgQz4+XG4gIHJlYWRvbmx5IHJpZ2h0OiA8QSwgQiwgQz4ocGJjOiBIS1QyPEYsIEIsIEM+KSA9PiBIS1QyPEYsIEVpdGhlcjxBLCBCPiwgRWl0aGVyPEEsIEM+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENob2ljZTI8RiBleHRlbmRzIFVSSVMyPiBleHRlbmRzIFByb2Z1bmN0b3IyPEY+IHtcbiAgcmVhZG9ubHkgbGVmdDogPEEsIEIsIEM+KHBhYjogS2luZDI8RiwgQSwgQj4pID0+IEtpbmQyPEYsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEM+PlxuICByZWFkb25seSByaWdodDogPEEsIEIsIEM+KHBiYzogS2luZDI8RiwgQiwgQz4pID0+IEtpbmQyPEYsIEVpdGhlcjxBLCBCPiwgRWl0aGVyPEEsIEM+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENob2ljZTM8RiBleHRlbmRzIFVSSVMzPiBleHRlbmRzIFByb2Z1bmN0b3IzPEY+IHtcbiAgcmVhZG9ubHkgbGVmdDogPFIsIEEsIEIsIEM+KHBhYjogS2luZDM8RiwgUiwgQSwgQj4pID0+IEtpbmQzPEYsIFIsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEM+PlxuICByZWFkb25seSByaWdodDogPFIsIEEsIEIsIEM+KHBiYzogS2luZDM8RiwgUiwgQiwgQz4pID0+IEtpbmQzPEYsIFIsIEVpdGhlcjxBLCBCPiwgRWl0aGVyPEEsIEM+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENob2ljZTQ8RiBleHRlbmRzIFVSSVM0PiBleHRlbmRzIFByb2Z1bmN0b3I0PEY+IHtcbiAgcmVhZG9ubHkgbGVmdDogPFMsIFIsIEEsIEIsIEM+KHBhYjogS2luZDQ8RiwgUywgUiwgQSwgQj4pID0+IEtpbmQ0PEYsIFMsIFIsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEM+PlxuICByZWFkb25seSByaWdodDogPFMsIFIsIEEsIEIsIEM+KHBiYzogS2luZDQ8RiwgUywgUiwgQiwgQz4pID0+IEtpbmQ0PEYsIFMsIFIsIEVpdGhlcjxBLCBCPiwgRWl0aGVyPEEsIEM+PlxufVxuXG4vKipcbiAqIENvbXBvc2UgYSB2YWx1ZSBhY3Rpbmcgb24gYSBzdW0gZnJvbSB0d28gdmFsdWVzLCBlYWNoIGFjdGluZyBvbiBvbmUgb2ZcbiAqIHRoZSBjb21wb25lbnRzIG9mIHRoZSBzdW0uXG4gKlxuICogU3BlY2lhbGl6aW5nIGBzcGxpdGAgdG8gZnVuY3Rpb24gYXBwbGljYXRpb24gd291bGQgbG9vayBsaWtlIHRoaXM6XG4gKlxuICogYGBgcHVyZXNjcmlwdFxuICogc3BsaXQgOjogZm9yYWxsIGEgYiBjIGQuIChhIC0+IGIpIC0+IChjIC0+IGQpIC0+IChFaXRoZXIgYSBjKSAtPiAoRWl0aGVyIGIgZClcbiAqIGBgYFxuICpcbiAqIFdlIHRha2UgdHdvIGZ1bmN0aW9ucywgYGZgIGFuZCBgZ2AsIGFuZCB3ZSB0cmFuc2Zvcm0gdGhlbSBpbnRvIGEgc2luZ2xlIGZ1bmN0aW9uIHdoaWNoXG4gKiB0YWtlcyBhbiBgRWl0aGVyYGFuZCBtYXBzIGBmYCBvdmVyIHRoZSBsZWZ0IHNpZGUgYW5kIGBnYCBvdmVyIHRoZSByaWdodCBzaWRlLiAgSnVzdCBsaWtlXG4gKiBgYmltYXBgIHdvdWxkIGRvIGZvciB0aGUgYEJpZnVuY3RvcmAgaW5zdGFuY2Ugb2YgYEVpdGhlcmAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXQ8UCBleHRlbmRzIFVSSVM0PihcbiAgUDogQ2hvaWNlNDxQPixcbiAgQzogQ2F0ZWdvcnk0PFA+XG4pOiA8UywgUiwgQSwgQiwgQywgRD4oXG4gIHBhYjogS2luZDQ8UCwgUywgUiwgQSwgQj4sXG4gIHBjZDogS2luZDQ8UCwgUywgUiwgQywgRD5cbikgPT4gS2luZDQ8UCwgUywgUiwgRWl0aGVyPEEsIEM+LCBFaXRoZXI8QiwgRD4+XG5leHBvcnQgZnVuY3Rpb24gc3BsaXQ8UCBleHRlbmRzIFVSSVMzPihcbiAgUDogQ2hvaWNlMzxQPixcbiAgQzogQ2F0ZWdvcnkzPFA+XG4pOiA8UiwgQSwgQiwgQywgRD4ocGFiOiBLaW5kMzxQLCBSLCBBLCBCPiwgcGNkOiBLaW5kMzxQLCBSLCBDLCBEPikgPT4gS2luZDM8UCwgUiwgRWl0aGVyPEEsIEM+LCBFaXRoZXI8QiwgRD4+XG5leHBvcnQgZnVuY3Rpb24gc3BsaXQ8UCBleHRlbmRzIFVSSVMyPihcbiAgUDogQ2hvaWNlMjxQPixcbiAgQzogQ2F0ZWdvcnkyPFA+XG4pOiA8QSwgQiwgQywgRD4ocGFiOiBLaW5kMjxQLCBBLCBCPiwgcGNkOiBLaW5kMjxQLCBDLCBEPikgPT4gS2luZDI8UCwgRWl0aGVyPEEsIEM+LCBFaXRoZXI8QiwgRD4+XG5leHBvcnQgZnVuY3Rpb24gc3BsaXQ8UD4oXG4gIFA6IENob2ljZTxQPixcbiAgQzogQ2F0ZWdvcnk8UD5cbik6IDxBLCBCLCBDLCBEPihwYWI6IEhLVDI8UCwgQSwgQj4sIHBjZDogSEtUMjxQLCBDLCBEPikgPT4gSEtUMjxQLCBFaXRoZXI8QSwgQz4sIEVpdGhlcjxCLCBEPj5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdDxQPihcbiAgUDogQ2hvaWNlPFA+LFxuICBDOiBDYXRlZ29yeTxQPlxuKTogPEEsIEIsIEMsIEQ+KHBhYjogSEtUMjxQLCBBLCBCPiwgcGNkOiBIS1QyPFAsIEMsIEQ+KSA9PiBIS1QyPFAsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEQ+PiB7XG4gIHJldHVybiA8QSwgQiwgQywgRD4ocGFiOiBIS1QyPFAsIEEsIEI+LCBwY2Q6IEhLVDI8UCwgQywgRD4pID0+IEMuY29tcG9zZShQLnJpZ2h0PEIsIEMsIEQ+KHBjZCksIFAubGVmdDxBLCBCLCBDPihwYWIpKVxufVxuXG4vKipcbiAqIENvbXBvc2UgYSB2YWx1ZSB3aGljaCBlbGltaW5hdGVzIGEgc3VtIGZyb20gdHdvIHZhbHVlcywgZWFjaCBlbGltaW5hdGluZ1xuICogb25lIHNpZGUgb2YgdGhlIHN1bS5cbiAqXG4gKiBUaGlzIGNvbWJpbmF0b3IgaXMgdXNlZnVsIHdoZW4gYXNzZW1ibGluZyB2YWx1ZXMgZnJvbSBzbWFsbGVyIGNvbXBvbmVudHMsXG4gKiBiZWNhdXNlIGl0IHByb3ZpZGVzIGEgd2F5IHRvIHN1cHBvcnQgdHdvIGRpZmZlcmVudCB0eXBlcyBvZiBpbnB1dC5cbiAqXG4gKiBTcGVjaWFsaXppbmcgYGZhbkluYCB0byBmdW5jdGlvbiBhcHBsaWNhdGlvbiB3b3VsZCBsb29rIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBwdXJlc2NyaXB0XG4gKiBmYW5JbiA6OiBmb3JhbGwgYSBiIGMgZC4gKGEgLT4gYykgLT4gKGIgLT4gYykgLT4gRWl0aGVyIGEgYiAtPiBjXG4gKiBgYGBcbiAqXG4gKiBXZSB0YWtlIHR3byBmdW5jdGlvbnMsIGBmYCBhbmQgYGdgLCB3aGljaCBib3RoIHJldHVybiB0aGUgc2FtZSB0eXBlIGBjYCBhbmQgd2UgdHJhbnNmb3JtIHRoZW0gaW50byBhXG4gKiBzaW5nbGUgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYW4gYEVpdGhlcmAgdmFsdWUgd2l0aCB0aGUgcGFyYW1ldGVyIHR5cGUgb2YgYGZgIG9uIHRoZSBsZWZ0IHNpZGUgYW5kXG4gKiB0aGUgcGFyYW1ldGVyIHR5cGUgb2YgYGdgIG9uIHRoZSByaWdodCBzaWRlLiBUaGUgZnVuY3Rpb24gdGhlbiBydW5zIGVpdGhlciBgZmAgb3IgYGdgLCBkZXBlbmRpbmcgb25cbiAqIHdoZXRoZXIgdGhlIGBFaXRoZXJgIHZhbHVlIGlzIGEgYExlZnRgIG9yIGEgYFJpZ2h0YC5cbiAqIFRoaXMgYWxsb3dzIHVzIHRvIGJ1bmRsZSB0d28gZGlmZmVyZW50IGNvbXB1dGF0aW9ucyB3aGljaCBib3RoIGhhdmUgdGhlIHNhbWUgcmVzdWx0IHR5cGUgaW50byBvbmVcbiAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgcnVuIHRoZSBhcHByb3ByaWF0ZSBjb21wdXRhdGlvbiBiYXNlZCBvbiB0aGUgcGFyYW1ldGVyIHN1cHBsaWVkIGluIHRoZSBgRWl0aGVyYCB2YWx1ZS5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmYW5JbjxQIGV4dGVuZHMgVVJJUzQ+KFxuICBQOiBDaG9pY2U0PFA+LFxuICBDOiBDYXRlZ29yeTQ8UD5cbik6IDxTLCBSLCBBLCBCLCBDPihwYWM6IEtpbmQ0PFAsIFMsIFIsIEEsIEM+LCBwYmM6IEtpbmQ0PFAsIFMsIFIsIEIsIEM+KSA9PiBLaW5kNDxQLCBTLCBSLCBFaXRoZXI8QSwgQj4sIEM+XG5leHBvcnQgZnVuY3Rpb24gZmFuSW48UCBleHRlbmRzIFVSSVMzPihcbiAgUDogQ2hvaWNlMzxQPixcbiAgQzogQ2F0ZWdvcnkzPFA+XG4pOiA8UiwgQSwgQiwgQz4ocGFjOiBLaW5kMzxQLCBSLCBBLCBDPiwgcGJjOiBLaW5kMzxQLCBSLCBCLCBDPikgPT4gS2luZDM8UCwgUiwgRWl0aGVyPEEsIEI+LCBDPlxuZXhwb3J0IGZ1bmN0aW9uIGZhbkluPFAgZXh0ZW5kcyBVUklTMj4oXG4gIFA6IENob2ljZTI8UD4sXG4gIEM6IENhdGVnb3J5MjxQPlxuKTogPEEsIEIsIEM+KHBhYzogS2luZDI8UCwgQSwgQz4sIHBiYzogS2luZDI8UCwgQiwgQz4pID0+IEtpbmQyPFAsIEVpdGhlcjxBLCBCPiwgQz5cbmV4cG9ydCBmdW5jdGlvbiBmYW5JbjxQPihcbiAgUDogQ2hvaWNlPFA+LFxuICBDOiBDYXRlZ29yeTxQPlxuKTogPEEsIEIsIEM+KHBhYzogSEtUMjxQLCBBLCBDPiwgcGJjOiBIS1QyPFAsIEIsIEM+KSA9PiBIS1QyPFAsIEVpdGhlcjxBLCBCPiwgQz5cbmV4cG9ydCBmdW5jdGlvbiBmYW5JbjxQPihcbiAgUDogQ2hvaWNlPFA+LFxuICBDOiBDYXRlZ29yeTxQPlxuKTogPEEsIEIsIEM+KHBhYzogSEtUMjxQLCBBLCBDPiwgcGJjOiBIS1QyPFAsIEIsIEM+KSA9PiBIS1QyPFAsIEVpdGhlcjxBLCBCPiwgQz4ge1xuICBjb25zdCBzcGxpdFBDID0gc3BsaXQoUCwgQylcbiAgcmV0dXJuIDxBLCBCLCBDPihwYWM6IEhLVDI8UCwgQSwgQz4sIHBiYzogSEtUMjxQLCBCLCBDPik6IEhLVDI8UCwgRWl0aGVyPEEsIEI+LCBDPiA9PlxuICAgIEMuY29tcG9zZShcbiAgICAgIFAucHJvbWFwKEMuaWQ8Qz4oKSwgKGNjOiBFaXRoZXI8QywgQz4pID0+IChjYy5fdGFnID09PSAnTGVmdCcgPyBjYy5sZWZ0IDogY2MucmlnaHQpLCBpZGVudGl0eSksXG4gICAgICBzcGxpdFBDKHBhYywgcGJjKVxuICAgIClcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFVzZSBbYHNwbGl0YF0oI3NwbGl0KSBpbnN0ZWFkLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q2hvaWNlPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IENhdGVnb3J5MzxGPiAmIENob2ljZTM8Rj5cbik6IDxSLCBBLCBCLCBDLCBEPihwYWI6IEtpbmQzPEYsIFIsIEEsIEI+LCBwY2Q6IEtpbmQzPEYsIFIsIEMsIEQ+KSA9PiBLaW5kMzxGLCBSLCBFaXRoZXI8QSwgQz4sIEVpdGhlcjxCLCBEPj5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q2hvaWNlPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IENhdGVnb3J5MjxGPiAmIENob2ljZTI8Rj5cbik6IDxBLCBCLCBDLCBEPihwYWI6IEtpbmQyPEYsIEEsIEI+LCBwY2Q6IEtpbmQyPEYsIEMsIEQ+KSA9PiBLaW5kMjxGLCBFaXRoZXI8QSwgQz4sIEVpdGhlcjxCLCBEPj5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q2hvaWNlPEY+KFxuICBGOiBDYXRlZ29yeTxGPiAmIENob2ljZTxGPlxuKTogPEEsIEIsIEMsIEQ+KHBhYjogSEtUMjxGLCBBLCBCPiwgcGNkOiBIS1QyPEYsIEMsIEQ+KSA9PiBIS1QyPEYsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEQ+PlxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q2hvaWNlPEY+KFxuICBGOiBDYXRlZ29yeTxGPiAmIENob2ljZTxGPlxuKTogPEEsIEIsIEMsIEQ+KHBhYjogSEtUMjxGLCBBLCBCPiwgcGNkOiBIS1QyPEYsIEMsIEQ+KSA9PiBIS1QyPEYsIEVpdGhlcjxBLCBDPiwgRWl0aGVyPEIsIEQ+PiB7XG4gIHJldHVybiBzcGxpdChGLCBGKVxufVxuXG4vKipcbiAqIFVzZSBbYGZhbkluYF0oI2ZhbkluKSBpbnN0ZWFkLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhbmluPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IENhdGVnb3J5MzxGPiAmIENob2ljZTM8Rj5cbik6IDxSLCBBLCBCLCBDPihwYWM6IEtpbmQzPEYsIFIsIEEsIEM+LCBwYmM6IEtpbmQzPEYsIFIsIEIsIEM+KSA9PiBLaW5kMzxGLCBSLCBFaXRoZXI8QSwgQj4sIEM+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBmYW5pbjxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBDYXRlZ29yeTI8Rj4gJiBDaG9pY2UyPEY+XG4pOiA8QSwgQiwgQz4ocGFjOiBLaW5kMjxGLCBBLCBDPiwgcGJjOiBLaW5kMjxGLCBCLCBDPikgPT4gS2luZDI8RiwgRWl0aGVyPEEsIEI+LCBDPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZmFuaW48Rj4oXG4gIEY6IENhdGVnb3J5PEY+ICYgQ2hvaWNlPEY+XG4pOiA8QSwgQiwgQz4ocGFjOiBIS1QyPEYsIEEsIEM+LCBwYmM6IEhLVDI8RiwgQiwgQz4pID0+IEhLVDI8RiwgRWl0aGVyPEEsIEI+LCBDPlxuZXhwb3J0IGZ1bmN0aW9uIGZhbmluPEY+KFxuICBGOiBDYXRlZ29yeTxGPiAmIENob2ljZTxGPlxuKTogPEEsIEIsIEM+KHBhYzogSEtUMjxGLCBBLCBDPiwgcGJjOiBIS1QyPEYsIEIsIEM+KSA9PiBIS1QyPEYsIEVpdGhlcjxBLCBCPiwgQz4ge1xuICByZXR1cm4gZmFuSW4oRiwgRilcbn1cbiJdfQ==