"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.filter = filter;
exports.filterMap = filterMap;
exports.getFilterableComposition = getFilterableComposition;
exports.partition = partition;
exports.partitionMap = partitionMap;

var _Compactable = require("./Compactable");

var _function = require("./function");

var _Functor = require("./Functor");

var _Option = require("./Option");

var _Predicate = require("./Predicate");

var _Separated = require("./Separated");

/**
 * `Filterable` represents data structures which can be _partitioned_/_filtered_.
 *
 * Adapted from https://github.com/LiamGoodacre/purescript-filterable/blob/master/src/Data/Filterable.purs
 *
 * @since 2.0.0
 */
function filter(F, G) {
  return function (predicate) {
    return function (fga) {
      return F.map(fga, function (ga) {
        return G.filter(ga, predicate);
      });
    };
  };
}
/**
 * `filterMap` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function filterMap(F, G) {
  return function (f) {
    return function (fga) {
      return F.map(fga, function (ga) {
        return G.filterMap(ga, f);
      });
    };
  };
}
/**
 * `partition` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function partition(F, G) {
  var _filter = filter(F, G);

  return function (predicate) {
    var left = _filter((0, _Predicate.not)(predicate));

    var right = _filter(predicate);

    return function (fgb) {
      return (0, _Separated.separated)(left(fgb), right(fgb));
    };
  };
}
/**
 * `partitionMap` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function partitionMap(F, G) {
  var _filterMap = filterMap(F, G);

  return function (f) {
    return function (fga) {
      return (0, _Separated.separated)((0, _function.pipe)(fga, _filterMap(function (a) {
        return (0, _Option.getLeft)(f(a));
      })), (0, _function.pipe)(fga, _filterMap(function (a) {
        return (0, _Option.getRight)(f(a));
      })));
    };
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @since 2.0.0
 * @deprecated
 */


/** @deprecated */
function getFilterableComposition(F, G) {
  var map = (0, _Functor.getFunctorComposition)(F, G).map;

  var _compact = (0, _Compactable.compact)(F, G);

  var _separate = (0, _Compactable.separate)(F, G, G);

  var _filter = filter(F, G);

  var _filterMap = filterMap(F, G);

  var _partition = partition(F, G);

  var _partitionMap = partitionMap(F, G);

  return {
    map: map,
    compact: _compact,
    separate: _separate,
    filter: function filter(fga, f) {
      return (0, _function.pipe)(fga, _filter(f));
    },
    filterMap: function filterMap(fga, f) {
      return (0, _function.pipe)(fga, _filterMap(f));
    },
    partition: function partition(fga, p) {
      return (0, _function.pipe)(fga, _partition(p));
    },
    partitionMap: function partitionMap(fga, f) {
      return (0, _function.pipe)(fga, _partitionMap(f));
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9GaWx0ZXJhYmxlLnRzIl0sIm5hbWVzIjpbImZpbHRlciIsIkYiLCJHIiwicHJlZGljYXRlIiwiZmdhIiwibWFwIiwiZ2EiLCJmaWx0ZXJNYXAiLCJmIiwicGFydGl0aW9uIiwiX2ZpbHRlciIsImxlZnQiLCJyaWdodCIsImZnYiIsInBhcnRpdGlvbk1hcCIsIl9maWx0ZXJNYXAiLCJhIiwiZ2V0RmlsdGVyYWJsZUNvbXBvc2l0aW9uIiwiX2NvbXBhY3QiLCJfc2VwYXJhdGUiLCJfcGFydGl0aW9uIiwiX3BhcnRpdGlvbk1hcCIsImNvbXBhY3QiLCJzZXBhcmF0ZSIsInAiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBT0E7O0FBbUJBOztBQUNBOztBQWtCQTs7QUFDQTs7QUFFQTs7QUFoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEyVE8sU0FBU0EsTUFBVCxDQUNMQyxDQURLLEVBRUxDLENBRkssRUFHMEU7QUFDL0UsU0FBTyxVQUFDQyxTQUFEO0FBQUEsV0FBZSxVQUFDQyxHQUFEO0FBQUEsYUFBU0gsQ0FBQyxDQUFDSSxHQUFGLENBQU1ELEdBQU4sRUFBVyxVQUFDRSxFQUFEO0FBQUEsZUFBUUosQ0FBQyxDQUFDRixNQUFGLENBQVNNLEVBQVQsRUFBYUgsU0FBYixDQUFSO0FBQUEsT0FBWCxDQUFUO0FBQUEsS0FBZjtBQUFBLEdBQVA7QUFDRDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaUJPLFNBQVNJLFNBQVQsQ0FDTE4sQ0FESyxFQUVMQyxDQUZLLEVBRzRFO0FBQ2pGLFNBQU8sVUFBQ00sQ0FBRDtBQUFBLFdBQU8sVUFBQ0osR0FBRDtBQUFBLGFBQVNILENBQUMsQ0FBQ0ksR0FBRixDQUFNRCxHQUFOLEVBQVcsVUFBQ0UsRUFBRDtBQUFBLGVBQVFKLENBQUMsQ0FBQ0ssU0FBRixDQUFZRCxFQUFaLEVBQWdCRSxDQUFoQixDQUFSO0FBQUEsT0FBWCxDQUFUO0FBQUEsS0FBUDtBQUFB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TjtBQUFBLGFBQVksb0JBQUtKLEdBQUwsRUFBVWlCLGFBQWEsQ0FBQ2IsQ0FBRCxDQUF2QixDQUFaO0FBQUE7QUFQVCxHQUFQO0FBU0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGBGaWx0ZXJhYmxlYCByZXByZXNlbnRzIGRhdGEgc3RydWN0dXJlcyB3aGljaCBjYW4gYmUgX3BhcnRpdGlvbmVkXy9fZmlsdGVyZWRfLlxuICpcbiAqIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTGlhbUdvb2RhY3JlL3B1cmVzY3JpcHQtZmlsdGVyYWJsZS9ibG9iL21hc3Rlci9zcmMvRGF0YS9GaWx0ZXJhYmxlLnB1cnNcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHtcbiAgY29tcGFjdCxcbiAgQ29tcGFjdGFibGUsXG4gIENvbXBhY3RhYmxlMSxcbiAgQ29tcGFjdGFibGUyLFxuICBDb21wYWN0YWJsZTJDLFxuICBDb21wYWN0YWJsZTMsXG4gIENvbXBhY3RhYmxlM0MsXG4gIENvbXBhY3RhYmxlNCxcbiAgQ29tcGFjdGFibGVDb21wb3NpdGlvbixcbiAgQ29tcGFjdGFibGVDb21wb3NpdGlvbjExLFxuICBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMTIsXG4gIENvbXBhY3RhYmxlQ29tcG9zaXRpb24xMkMsXG4gIENvbXBhY3RhYmxlQ29tcG9zaXRpb24yMSxcbiAgQ29tcGFjdGFibGVDb21wb3NpdGlvbjIyLFxuICBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjMsXG4gIHNlcGFyYXRlXG59IGZyb20gJy4vQ29tcGFjdGFibGUnXG5pbXBvcnQgeyBFaXRoZXIgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJ1xuaW1wb3J0IHtcbiAgRnVuY3RvcixcbiAgRnVuY3RvcjEsXG4gIEZ1bmN0b3IyLFxuICBGdW5jdG9yMkMsXG4gIEZ1bmN0b3IzLFxuICBGdW5jdG9yM0MsXG4gIEZ1bmN0b3I0LFxuICBGdW5jdG9yQ29tcG9zaXRpb24sXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjExLFxuICBGdW5jdG9yQ29tcG9zaXRpb24xMixcbiAgRnVuY3RvckNvbXBvc2l0aW9uMTJDLFxuICBGdW5jdG9yQ29tcG9zaXRpb24yMSxcbiAgRnVuY3RvckNvbXBvc2l0aW9uMjIsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjIzLFxuICBnZXRGdW5jdG9yQ29tcG9zaXRpb25cbn0gZnJvbSAnLi9GdW5jdG9yJ1xuaW1wb3J0IHsgSEtULCBLaW5kLCBLaW5kMiwgS2luZDMsIEtpbmQ0LCBVUklTLCBVUklTMiwgVVJJUzMsIFVSSVM0IH0gZnJvbSAnLi9IS1QnXG5pbXBvcnQgeyBnZXRMZWZ0LCBnZXRSaWdodCwgT3B0aW9uIH0gZnJvbSAnLi9PcHRpb24nXG5pbXBvcnQgeyBub3QsIFByZWRpY2F0ZSB9IGZyb20gJy4vUHJlZGljYXRlJ1xuaW1wb3J0IHsgUmVmaW5lbWVudCB9IGZyb20gJy4vUmVmaW5lbWVudCdcbmltcG9ydCB7IHNlcGFyYXRlZCwgU2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIG1vZGVsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyPEY+IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihmYTogSEtUPEYsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogSEtUPEYsIEI+XG4gIDxBPihmYTogSEtUPEYsIEE+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IEhLVDxGLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpdGlvbjxGPiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4oZmE6IEhLVDxGLCBBPiwgcmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IFNlcGFyYXRlZDxIS1Q8RiwgQT4sIEhLVDxGLCBCPj5cbiAgPEE+KGZhOiBIS1Q8RiwgQT4sIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogU2VwYXJhdGVkPEhLVDxGLCBBPiwgSEtUPEYsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGU8Rj4gZXh0ZW5kcyBGdW5jdG9yPEY+LCBDb21wYWN0YWJsZTxGPiB7XG4gIC8qKlxuICAgKiBQYXJ0aXRpb24gYSBkYXRhIHN0cnVjdHVyZSBiYXNlZCBvbiBhbiBlaXRoZXIgcHJlZGljYXRlLlxuICAgKi9cbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8QSwgQiwgQz4oZmE6IEhLVDxGLCBBPiwgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPikgPT4gU2VwYXJhdGVkPEhLVDxGLCBCPiwgSEtUPEYsIEM+PlxuICAvKipcbiAgICogUGFydGl0aW9uIGEgZGF0YSBzdHJ1Y3R1cmUgYmFzZWQgb24gYSBib29sZWFuIHByZWRpY2F0ZS5cbiAgICovXG4gIHJlYWRvbmx5IHBhcnRpdGlvbjogUGFydGl0aW9uPEY+XG4gIC8qKlxuICAgKiBNYXAgb3ZlciBhIGRhdGEgc3RydWN0dXJlIGFuZCBmaWx0ZXIgYmFzZWQgb24gYW4gb3B0aW9uIHByZWRpY2F0ZS5cbiAgICovXG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEEsIEI+KGZhOiBIS1Q8RiwgQT4sIGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IEhLVDxGLCBCPlxuICAvKipcbiAgICogRmlsdGVyIGEgZGF0YSBzdHJ1Y3R1cmUgYmFzZWQgb24gYSBib29sZWFuIHByZWRpY2F0ZS5cbiAgICovXG4gIHJlYWRvbmx5IGZpbHRlcjogRmlsdGVyPEY+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyMTxGIGV4dGVuZHMgVVJJUz4ge1xuICA8QSwgQiBleHRlbmRzIEE+KGZhOiBLaW5kPEYsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogS2luZDxGLCBCPlxuICA8QT4oZmE6IEtpbmQ8RiwgQT4sIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogS2luZDxGLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpdGlvbjE8RiBleHRlbmRzIFVSSVM+IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihmYTogS2luZDxGLCBBPiwgcmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IFNlcGFyYXRlZDxLaW5kPEYsIEE+LCBLaW5kPEYsIEI+PlxuICA8QT4oZmE6IEtpbmQ8RiwgQT4sIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogU2VwYXJhdGVkPEtpbmQ8RiwgQT4sIEtpbmQ8RiwgQT4+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZTE8RiBleHRlbmRzIFVSSVM+IGV4dGVuZHMgRnVuY3RvcjE8Rj4sIENvbXBhY3RhYmxlMTxGPiB7XG4gIHJlYWRvbmx5IHBhcnRpdGlvbk1hcDogPEEsIEIsIEM+KGZhOiBLaW5kPEYsIEE+LCBmOiAoYTogQSkgPT4gRWl0aGVyPEIsIEM+KSA9PiBTZXBhcmF0ZWQ8S2luZDxGLCBCPiwgS2luZDxGLCBDPj5cbiAgcmVhZG9ubHkgcGFydGl0aW9uOiBQYXJ0aXRpb24xPEY+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEEsIEI+KGZhOiBLaW5kPEYsIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiBLaW5kPEYsIEI+XG4gIHJlYWRvbmx5IGZpbHRlcjogRmlsdGVyMTxGPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcjI8RiBleHRlbmRzIFVSSVMyPiB7XG4gIDxFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQyPEYsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogS2luZDI8RiwgRSwgQj5cbiAgPEUsIEE+KGZhOiBLaW5kMjxGLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBLaW5kMjxGLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpdGlvbjI8RiBleHRlbmRzIFVSSVMyPiB7XG4gIDxFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQyPEYsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogU2VwYXJhdGVkPEtpbmQyPEYsIEUsIEE+LCBLaW5kMjxGLCBFLCBCPj5cbiAgPEUsIEE+KGZhOiBLaW5kMjxGLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgQT4sIEtpbmQyPEYsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGUyPEYgZXh0ZW5kcyBVUklTMj4gZXh0ZW5kcyBGdW5jdG9yMjxGPiwgQ29tcGFjdGFibGUyPEY+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8RSwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQyPEYsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgQj4sIEtpbmQyPEYsIEUsIEM+PlxuICByZWFkb25seSBwYXJ0aXRpb246IFBhcnRpdGlvbjI8Rj5cbiAgcmVhZG9ubHkgZmlsdGVyTWFwOiA8RSwgQSwgQj4oZmE6IEtpbmQyPEYsIEUsIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiBLaW5kMjxGLCBFLCBCPlxuICByZWFkb25seSBmaWx0ZXI6IEZpbHRlcjI8Rj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXIyQzxGIGV4dGVuZHMgVVJJUzIsIEU+IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihmYTogS2luZDI8RiwgRSwgQT4sIHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4pOiBLaW5kMjxGLCBFLCBCPlxuICA8QT4oZmE6IEtpbmQyPEYsIEUsIEE+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IEtpbmQyPEYsIEUsIEE+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGl0aW9uMkM8RiBleHRlbmRzIFVSSVMyLCBFPiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQyPEYsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogU2VwYXJhdGVkPEtpbmQyPEYsIEUsIEE+LCBLaW5kMjxGLCBFLCBCPj5cbiAgPEE+KGZhOiBLaW5kMjxGLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgQT4sIEtpbmQyPEYsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGUyQzxGIGV4dGVuZHMgVVJJUzIsIEU+IGV4dGVuZHMgRnVuY3RvcjJDPEYsIEU+LCBDb21wYWN0YWJsZTJDPEYsIEU+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8QSwgQiwgQz4oXG4gICAgZmE6IEtpbmQyPEYsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgQj4sIEtpbmQyPEYsIEUsIEM+PlxuICByZWFkb25seSBwYXJ0aXRpb246IFBhcnRpdGlvbjJDPEYsIEU+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEEsIEI+KGZhOiBLaW5kMjxGLCBFLCBBPiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDI8RiwgRSwgQj5cbiAgcmVhZG9ubHkgZmlsdGVyOiBGaWx0ZXIyQzxGLCBFPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcjM8RiBleHRlbmRzIFVSSVMzPiB7XG4gIDxSLCBFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQzPEYsIFIsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogS2luZDM8RiwgUiwgRSwgQj5cbiAgPFIsIEUsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBLaW5kMzxGLCBSLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpdGlvbjM8RiBleHRlbmRzIFVSSVMzPiB7XG4gIDxSLCBFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQzPEYsIFIsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogU2VwYXJhdGVkPFxuICAgIEtpbmQzPEYsIFIsIEUsIEE+LFxuICAgIEtpbmQzPEYsIFIsIEUsIEI+XG4gID5cbiAgPFIsIEUsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBTZXBhcmF0ZWQ8S2luZDM8RiwgUiwgRSwgQT4sIEtpbmQzPEYsIFIsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGUzPEYgZXh0ZW5kcyBVUklTMz4gZXh0ZW5kcyBGdW5jdG9yMzxGPiwgQ29tcGFjdGFibGUzPEY+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8UiwgRSwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQzPEYsIFIsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDM8RiwgUiwgRSwgQj4sIEtpbmQzPEYsIFIsIEUsIEM+PlxuICByZWFkb25seSBwYXJ0aXRpb246IFBhcnRpdGlvbjM8Rj5cbiAgcmVhZG9ubHkgZmlsdGVyTWFwOiA8UiwgRSwgQSwgQj4oZmE6IEtpbmQzPEYsIFIsIEUsIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICByZWFkb25seSBmaWx0ZXI6IEZpbHRlcjM8Rj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4yLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXIzQzxGIGV4dGVuZHMgVVJJUzMsIEU+IHtcbiAgPFIsIEEsIEIgZXh0ZW5kcyBBPihmYTogS2luZDM8RiwgUiwgRSwgQT4sIHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4pOiBLaW5kMzxGLCBSLCBFLCBCPlxuICA8UiwgQT4oZmE6IEtpbmQzPEYsIFIsIEUsIEE+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IEtpbmQzPEYsIFIsIEUsIEE+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMi4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGl0aW9uM0M8RiBleHRlbmRzIFVSSVMzLCBFPiB7XG4gIDxSLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQzPEYsIFIsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogU2VwYXJhdGVkPFxuICAgIEtpbmQzPEYsIFIsIEUsIEE+LFxuICAgIEtpbmQzPEYsIFIsIEUsIEI+XG4gID5cbiAgPFIsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBTZXBhcmF0ZWQ8S2luZDM8RiwgUiwgRSwgQT4sIEtpbmQzPEYsIFIsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjIuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGUzQzxGIGV4dGVuZHMgVVJJUzMsIEU+IGV4dGVuZHMgRnVuY3RvcjNDPEYsIEU+LCBDb21wYWN0YWJsZTNDPEYsIEU+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8UiwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQzPEYsIFIsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDM8RiwgUiwgRSwgQj4sIEtpbmQzPEYsIFIsIEUsIEM+PlxuICByZWFkb25seSBwYXJ0aXRpb246IFBhcnRpdGlvbjNDPEYsIEU+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPFIsIEEsIEI+KGZhOiBLaW5kMzxGLCBSLCBFLCBBPiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDM8RiwgUiwgRSwgQj5cbiAgcmVhZG9ubHkgZmlsdGVyOiBGaWx0ZXIzQzxGLCBFPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcjQ8RiBleHRlbmRzIFVSSVM0PiB7XG4gIDxTLCBSLCBFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogS2luZDQ8RiwgUywgUiwgRSwgQj5cbiAgPFMsIFIsIEUsIEE+KGZhOiBLaW5kNDxGLCBTLCBSLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBLaW5kNDxGLCBTLCBSLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpdGlvbjQ8RiBleHRlbmRzIFVSSVM0PiB7XG4gIDxTLCBSLCBFLCBBLCBCIGV4dGVuZHMgQT4oZmE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+LCByZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogU2VwYXJhdGVkPFxuICAgIEtpbmQ0PEYsIFMsIFIsIEUsIEE+LFxuICAgIEtpbmQ0PEYsIFMsIFIsIEUsIEI+XG4gID5cbiAgPFMsIFIsIEUsIEE+KGZhOiBLaW5kNDxGLCBTLCBSLCBFLCBBPiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiBTZXBhcmF0ZWQ8S2luZDQ8RiwgUywgUiwgRSwgQT4sIEtpbmQ0PEYsIFMsIFIsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGU0PEYgZXh0ZW5kcyBVUklTND4gZXh0ZW5kcyBGdW5jdG9yNDxGPiwgQ29tcGFjdGFibGU0PEY+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8UywgUiwgRSwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDQ8RiwgUywgUiwgRSwgQj4sIEtpbmQ0PEYsIFMsIFIsIEUsIEM+PlxuICByZWFkb25seSBwYXJ0aXRpb246IFBhcnRpdGlvbjQ8Rj5cbiAgcmVhZG9ubHkgZmlsdGVyTWFwOiA8UywgUiwgRSwgQSwgQj4oZmE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBCPlxuICByZWFkb25seSBmaWx0ZXI6IEZpbHRlcjQ8Rj5cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBgZmlsdGVyYCBjb21wb3NpdGlvbi5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZ1bmN0b3IyPEY+LFxuICBHOiBGaWx0ZXJhYmxlMkM8RywgRT5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogPFI+KGZnYTogS2luZDI8RiwgUiwgS2luZDI8RywgRSwgQT4+KSA9PiBLaW5kMjxGLCBSLCBLaW5kMjxHLCBFLCBCPj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPFIsIEIgZXh0ZW5kcyBBPihmZ2I6IEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEI+PikgPT4gS2luZDI8RiwgUiwgS2luZDI8RywgRSwgQj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxSPihmZ2E6IEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEE+PikgPT4gS2luZDI8RiwgUiwgS2luZDI8RywgRSwgQT4+XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMTxGPixcbiAgRzogRmlsdGVyYWJsZTJDPEcsIEU+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IChmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+KSA9PiBLaW5kPEYsIEtpbmQyPEcsIEUsIEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8QiBleHRlbmRzIEE+KGZnYjogS2luZDxGLCBLaW5kMjxHLCBFLCBCPj4pID0+IEtpbmQ8RiwgS2luZDI8RywgRSwgQj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IChmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+KSA9PiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPixcbiAgRzogRmlsdGVyYWJsZTE8Rz5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+KTogKGZnYTogS2luZDxGLCBLaW5kPEcsIEE+PikgPT4gS2luZDxGLCBLaW5kPEcsIEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8QiBleHRlbmRzIEE+KGZnYjogS2luZDxGLCBLaW5kPEcsIEI+PikgPT4gS2luZDxGLCBLaW5kPEcsIEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiAoZmdhOiBLaW5kPEYsIEtpbmQ8RywgQT4+KSA9PiBLaW5kPEYsIEtpbmQ8RywgQT4+XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPEYsIEc+KFxuICBGOiBGdW5jdG9yPEY+LFxuICBHOiBGaWx0ZXJhYmxlPEc+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IChmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+KSA9PiBIS1Q8RiwgSEtUPEcsIEI+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiA8QiBleHRlbmRzIEE+KGZnYjogSEtUPEYsIEhLVDxHLCBCPj4pID0+IEhLVDxGLCBIS1Q8RywgQj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IChmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+KSA9PiBIS1Q8RiwgSEtUPEcsIEE+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxGLCBHPihcbiAgRjogRnVuY3RvcjxGPixcbiAgRzogRmlsdGVyYWJsZTxHPlxuKTogPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KSA9PiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gSEtUPEYsIEhLVDxHLCBBPj4ge1xuICByZXR1cm4gKHByZWRpY2F0ZSkgPT4gKGZnYSkgPT4gRi5tYXAoZmdhLCAoZ2EpID0+IEcuZmlsdGVyKGdhLCBwcmVkaWNhdGUpKVxufVxuXG4vKipcbiAqIGBmaWx0ZXJNYXBgIGNvbXBvc2l0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjI8Rj4sXG4gIEc6IEZpbHRlcmFibGUyQzxHLCBFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IDxGRT4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQT4+KSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMTxGPixcbiAgRzogRmlsdGVyYWJsZTJDPEcsIEU+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gKGZnYTogS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4pID0+IEtpbmQ8RiwgS2luZDI8RywgRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBGaWx0ZXJhYmxlMTxHPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj4pID0+IEtpbmQ8RiwgS2luZDxHLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJNYXA8RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEc6IEZpbHRlcmFibGU8Rz5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gSEtUPEYsIEhLVDxHLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJNYXA8RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEc6IEZpbHRlcmFibGU8Rz5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gSEtUPEYsIEhLVDxHLCBCPj4ge1xuICByZXR1cm4gKGYpID0+IChmZ2EpID0+IEYubWFwKGZnYSwgKGdhKSA9PiBHLmZpbHRlck1hcChnYSwgZikpXG59XG5cbi8qKlxuICogYHBhcnRpdGlvbmAgY29tcG9zaXRpb24uXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb248RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMjxGPixcbiAgRzogRmlsdGVyYWJsZTJDPEcsIEU+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IDxSPihcbiAgICBmZ2E6IEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEE+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBSLCBLaW5kMjxHLCBFLCBBPj4sIEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEI+Pj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPFIsIEIgZXh0ZW5kcyBBPihcbiAgICBmZ2I6IEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEI+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBSLCBLaW5kMjxHLCBFLCBCPj4sIEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEI+Pj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPFI+KFxuICAgIGZnYTogS2luZDI8RiwgUiwgS2luZDI8RywgRSwgQT4+XG4gICkgPT4gU2VwYXJhdGVkPEtpbmQyPEYsIFIsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDI8RiwgUiwgS2luZDI8RywgRSwgQT4+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjE8Rj4sXG4gIEc6IEZpbHRlcmFibGUyQzxHLCBFPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEE+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4pOiAoXG4gICAgZmdhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBCPj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IDxCIGV4dGVuZHMgQT4oXG4gICAgZmdiOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEI+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEI+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBCPj4+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPik6IChcbiAgICBmZ2E6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+XG4gICkgPT4gU2VwYXJhdGVkPEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+Pj5cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTPihcbiAgRjogRnVuY3RvcjE8Rj4sXG4gIEc6IEZpbHRlcmFibGUxPEc+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IChcbiAgICBmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDxGLCBLaW5kPEcsIEE+PiwgS2luZDxGLCBLaW5kPEcsIEI+Pj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEIgZXh0ZW5kcyBBPihcbiAgICBmZ2I6IEtpbmQ8RiwgS2luZDxHLCBCPj5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDxGLCBLaW5kPEcsIEI+PiwgS2luZDxGLCBLaW5kPEcsIEI+Pj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogKGZnYTogS2luZDxGLCBLaW5kPEcsIEE+PikgPT4gU2VwYXJhdGVkPEtpbmQ8RiwgS2luZDxHLCBBPj4sIEtpbmQ8RiwgS2luZDxHLCBBPj4+XG59XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uPEYsIEc+KFxuICBGOiBGdW5jdG9yPEY+LFxuICBHOiBGaWx0ZXJhYmxlPEc+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPik6IChcbiAgICBmZ2E6IEhLVDxGLCBIS1Q8RywgQT4+XG4gICkgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQT4+LCBIS1Q8RiwgSEtUPEcsIEI+Pj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KTogPEIgZXh0ZW5kcyBBPihmZ2I6IEhLVDxGLCBIS1Q8RywgQj4+KSA9PiBTZXBhcmF0ZWQ8SEtUPEYsIEhLVDxHLCBCPj4sIEhLVDxGLCBIS1Q8RywgQj4+PlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pOiAoZmdhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQT4+LCBIS1Q8RiwgSEtUPEcsIEE+Pj5cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb248RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEc6IEZpbHRlcmFibGU8Rz5cbik6IDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPikgPT4gKGZnYTogSEtUPEYsIEhLVDxHLCBBPj4pID0+IFNlcGFyYXRlZDxIS1Q8RiwgSEtUPEcsIEE+PiwgSEtUPEYsIEhLVDxHLCBBPj4+IHtcbiAgY29uc3QgX2ZpbHRlciA9IGZpbHRlcihGLCBHKVxuICByZXR1cm4gKHByZWRpY2F0ZSkgPT4ge1xuICAgIGNvbnN0IGxlZnQgPSBfZmlsdGVyKG5vdChwcmVkaWNhdGUpKVxuICAgIGNvbnN0IHJpZ2h0ID0gX2ZpbHRlcihwcmVkaWNhdGUpXG4gICAgcmV0dXJuIChmZ2IpID0+IHNlcGFyYXRlZChsZWZ0KGZnYiksIHJpZ2h0KGZnYikpXG4gIH1cbn1cblxuLyoqXG4gKiBgcGFydGl0aW9uTWFwYCBjb21wb3NpdGlvbi5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbk1hcDxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZ1bmN0b3IyPEY+LFxuICBHOiBGaWx0ZXJhYmxlMkM8RywgRT5cbik6IDxBLCBCLCBDPihcbiAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuKSA9PiA8RkU+KGZhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQT4+KSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEI+PiwgS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEM+Pj5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25NYXA8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBGaWx0ZXJhYmxlMkM8RywgRT5cbik6IDxBLCBCLCBDPihcbiAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuKSA9PiAoZmE6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+KSA9PiBTZXBhcmF0ZWQ8S2luZDxGLCBLaW5kMjxHLCBFLCBCPj4sIEtpbmQ8RiwgS2luZDI8RywgRSwgQz4+PlxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbk1hcDxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPixcbiAgRzogRmlsdGVyYWJsZTE8Rz5cbik6IDxBLCBCLCBDPihcbiAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuKSA9PiAoZmE6IEtpbmQ8RiwgS2luZDxHLCBBPj4pID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQ8RywgQj4+LCBLaW5kPEYsIEtpbmQ8RywgQz4+PlxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbk1hcDxGLCBHPihcbiAgRjogRnVuY3RvcjxGPixcbiAgRzogRmlsdGVyYWJsZTxHPlxuKTogPEEsIEIsIEM+KGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz4pID0+IChmYTogSEtUPEYsIEhLVDxHLCBBPj4pID0+IFNlcGFyYXRlZDxIS1Q8RiwgSEtUPEcsIEI+PiwgSEtUPEYsIEhLVDxHLCBDPj4+XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uTWFwPEYsIEc+KFxuICBGOiBGdW5jdG9yPEY+LFxuICBHOiBGaWx0ZXJhYmxlPEc+XG4pOiA8QSwgQiwgQz4oZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPikgPT4gKGZhOiBIS1Q8RiwgSEtUPEcsIEE+PikgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQj4+LCBIS1Q8RiwgSEtUPEcsIEM+Pj4ge1xuICBjb25zdCBfZmlsdGVyTWFwID0gZmlsdGVyTWFwKEYsIEcpXG4gIHJldHVybiAoZikgPT4gKGZnYSkgPT5cbiAgICBzZXBhcmF0ZWQoXG4gICAgICBwaXBlKFxuICAgICAgICBmZ2EsXG4gICAgICAgIF9maWx0ZXJNYXAoKGEpID0+IGdldExlZnQoZihhKSkpXG4gICAgICApLFxuICAgICAgcGlwZShcbiAgICAgICAgZmdhLFxuICAgICAgICBfZmlsdGVyTWFwKChhKSA9PiBnZXRSaWdodChmKGEpKSlcbiAgICAgIClcbiAgICApXG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gdHNsaW50OmRpc2FibGU6IGRlcHJlY2F0aW9uXG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGVDb21wb3NpdGlvbjxGLCBHPiBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjxGLCBHPiwgQ29tcGFjdGFibGVDb21wb3NpdGlvbjxGLCBHPiB7XG4gIHJlYWRvbmx5IHBhcnRpdGlvbk1hcDogPEEsIEIsIEM+KFxuICAgIGZhOiBIS1Q8RiwgSEtUPEcsIEE+PixcbiAgICBmOiAoYTogQSkgPT4gRWl0aGVyPEIsIEM+XG4gICkgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQj4+LCBIS1Q8RiwgSEtUPEcsIEM+Pj5cbiAgcmVhZG9ubHkgcGFydGl0aW9uOiA8QT4oXG4gICAgZmE6IEhLVDxGLCBIS1Q8RywgQT4+LFxuICAgIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+XG4gICkgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQT4+LCBIS1Q8RiwgSEtUPEcsIEE+Pj5cbiAgcmVhZG9ubHkgZmlsdGVyTWFwOiA8QSwgQj4oZmE6IEhLVDxGLCBIS1Q8RywgQT4+LCBmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiBIS1Q8RiwgSEtUPEcsIEI+PlxuICByZWFkb25seSBmaWx0ZXI6IDxBPihmYTogSEtUPEYsIEhLVDxHLCBBPj4sIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+KSA9PiBIS1Q8RiwgSEtUPEcsIEE+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJhYmxlQ29tcG9zaXRpb24xMTxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+XG4gIGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMTE8RiwgRz4sXG4gICAgQ29tcGFjdGFibGVDb21wb3NpdGlvbjExPEYsIEc+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8QSwgQiwgQz4oXG4gICAgZmE6IEtpbmQ8RiwgS2luZDxHLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQ8RywgQj4+LCBLaW5kPEYsIEtpbmQ8RywgQz4+PlxuICByZWFkb25seSBwYXJ0aXRpb246IDxBPihcbiAgICBmYTogS2luZDxGLCBLaW5kPEcsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQ8RywgQT4+LCBLaW5kPEYsIEtpbmQ8RywgQT4+PlxuICByZWFkb25seSBmaWx0ZXJNYXA6IDxBLCBCPihmYTogS2luZDxGLCBLaW5kPEcsIEE+PiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDxGLCBLaW5kPEcsIEI+PlxuICByZWFkb25seSBmaWx0ZXI6IDxBPihmYTogS2luZDxGLCBLaW5kPEcsIEE+PiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pID0+IEtpbmQ8RiwgS2luZDxHLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZUNvbXBvc2l0aW9uMTI8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMj5cbiAgZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb24xMjxGLCBHPixcbiAgICBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMTI8RiwgRz4ge1xuICByZWFkb25seSBwYXJ0aXRpb25NYXA6IDxFLCBBLCBCLCBDPihcbiAgICBmYTogS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEI+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBDPj4+XG4gIHJlYWRvbmx5IHBhcnRpdGlvbjogPEUsIEE+KFxuICAgIGZhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEUsIEEsIEI+KGZhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBCPj5cbiAgcmVhZG9ubHkgZmlsdGVyOiA8RSwgQT4oZmE6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZUNvbXBvc2l0aW9uMTJDPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUzIsIEU+XG4gIGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMTJDPEYsIEcsIEU+LFxuICAgIENvbXBhY3RhYmxlQ29tcG9zaXRpb24xMkM8RiwgRywgRT4ge1xuICByZWFkb25seSBwYXJ0aXRpb25NYXA6IDxBLCBCLCBDPihcbiAgICBmYTogS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEI+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBDPj4+XG4gIHJlYWRvbmx5IHBhcnRpdGlvbjogPEE+KFxuICAgIGZhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBBPj4+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEEsIEI+KGZhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBCPj5cbiAgcmVhZG9ubHkgZmlsdGVyOiA8QT4oZmE6IEtpbmQ8RiwgS2luZDI8RywgRSwgQT4+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZUNvbXBvc2l0aW9uMjE8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUz5cbiAgZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb24yMTxGLCBHPixcbiAgICBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjE8RiwgRz4ge1xuICByZWFkb25seSBwYXJ0aXRpb25NYXA6IDxFLCBBLCBCLCBDPihcbiAgICBmYTogS2luZDI8RiwgRSwgS2luZDxHLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBFLCBLaW5kPEcsIEI+PiwgS2luZDI8RiwgRSwgS2luZDxHLCBDPj4+XG4gIHJlYWRvbmx5IHBhcnRpdGlvbjogPEUsIEE+KFxuICAgIGZhOiBLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PiwgS2luZDI8RiwgRSwgS2luZDxHLCBBPj4+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEUsIEEsIEI+KGZhOiBLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PiwgZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gS2luZDI8RiwgRSwgS2luZDxHLCBCPj5cbiAgcmVhZG9ubHkgZmlsdGVyOiA8RSwgQT4oZmE6IEtpbmQyPEYsIEUsIEtpbmQ8RywgQT4+LCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPikgPT4gS2luZDI8RiwgRSwgS2luZDxHLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZUNvbXBvc2l0aW9uMkMxPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMsIEU+XG4gIGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMjE8RiwgRz4sXG4gICAgQ29tcGFjdGFibGVDb21wb3NpdGlvbjIxPEYsIEc+IHtcbiAgcmVhZG9ubHkgcGFydGl0aW9uTWFwOiA8QSwgQiwgQz4oXG4gICAgZmE6IEtpbmQyPEYsIEUsIEtpbmQ8RywgQT4+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgS2luZDxHLCBCPj4sIEtpbmQyPEYsIEUsIEtpbmQ8RywgQz4+PlxuICByZWFkb25seSBwYXJ0aXRpb246IDxBPihcbiAgICBmYTogS2luZDI8RiwgRSwgS2luZDxHLCBBPj4sXG4gICAgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRSwgS2luZDxHLCBBPj4sIEtpbmQyPEYsIEUsIEtpbmQ8RywgQT4+PlxuICByZWFkb25seSBmaWx0ZXJNYXA6IDxBLCBCPihmYTogS2luZDI8RiwgRSwgS2luZDxHLCBBPj4sIGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IEtpbmQyPEYsIEUsIEtpbmQ8RywgQj4+XG4gIHJlYWRvbmx5IGZpbHRlcjogPEE+KGZhOiBLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pID0+IEtpbmQyPEYsIEUsIEtpbmQ8RywgQT4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGVDb21wb3NpdGlvbjIyPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMyPlxuICBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjIyPEYsIEc+LFxuICAgIENvbXBhY3RhYmxlQ29tcG9zaXRpb24yMjxGLCBHPiB7XG4gIHJlYWRvbmx5IHBhcnRpdGlvbk1hcDogPEZFLCBHRSwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+LFxuICAgIGY6IChhOiBBKSA9PiBFaXRoZXI8QiwgQz5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRkUsIEtpbmQyPEcsIEdFLCBCPj4sIEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQz4+PlxuICByZWFkb25seSBwYXJ0aXRpb246IDxGRSwgR0UsIEE+KFxuICAgIGZhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEE+PiwgS2luZDI8RiwgRkUsIEtpbmQyPEcsIEdFLCBBPj4+XG4gIHJlYWRvbmx5IGZpbHRlck1hcDogPEZFLCBHRSwgQSwgQj4oXG4gICAgZmE6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+LFxuICAgIGY6IChhOiBBKSA9PiBPcHRpb248Qj5cbiAgKSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEI+PlxuICByZWFkb25seSBmaWx0ZXI6IDxGRSwgR0UsIEE+KFxuICAgIGZhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlcmFibGVDb21wb3NpdGlvbjIyQzxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMiwgRT5cbiAgZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb24yMjxGLCBHPixcbiAgICBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjI8RiwgRz4ge1xuICByZWFkb25seSBwYXJ0aXRpb25NYXA6IDxGRSwgQSwgQiwgQz4oXG4gICAgZmE6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEVpdGhlcjxCLCBDPlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQj4+LCBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQz4+PlxuICByZWFkb25seSBwYXJ0aXRpb246IDxGRSwgQT4oXG4gICAgZmE6IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sXG4gICAgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEE+Pj5cbiAgcmVhZG9ubHkgZmlsdGVyTWFwOiA8RkUsIEEsIEI+KFxuICAgIGZhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQT4+LFxuICAgIGY6IChhOiBBKSA9PiBPcHRpb248Qj5cbiAgKSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQj4+XG4gIHJlYWRvbmx5IGZpbHRlcjogPEZFLCBBPihmYTogS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEE+PiwgcHJlZGljYXRlOiBQcmVkaWNhdGU8QT4pID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4yLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyYWJsZUNvbXBvc2l0aW9uMjNDPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMzLCBFPlxuICBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjIzPEYsIEc+LFxuICAgIENvbXBhY3RhYmxlQ29tcG9zaXRpb24yMzxGLCBHPiB7XG4gIHJlYWRvbmx5IHBhcnRpdGlvbk1hcDogPFIsIEZFLCBBLCBCLCBDPihcbiAgICBmYTogS2luZDI8RiwgRkUsIEtpbmQzPEcsIFIsIEUsIEE+PixcbiAgICBmOiAoYTogQSkgPT4gRWl0aGVyPEIsIEM+XG4gICkgPT4gU2VwYXJhdGVkPEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBCPj4sIEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBDPj4+XG4gIHJlYWRvbmx5IHBhcnRpdGlvbjogPFIsIEZFLCBBPihcbiAgICBmYTogS2luZDI8RiwgRkUsIEtpbmQzPEcsIFIsIEUsIEE+PixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBGRSwgS2luZDM8RywgUiwgRSwgQT4+LCBLaW5kMjxGLCBGRSwgS2luZDM8RywgUiwgRSwgQT4+PlxuICByZWFkb25seSBmaWx0ZXJNYXA6IDxSLCBGRSwgQSwgQj4oXG4gICAgZmE6IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IE9wdGlvbjxCPlxuICApID0+IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBCPj5cbiAgcmVhZG9ubHkgZmlsdGVyOiA8UiwgRkUsIEE+KFxuICAgIGZhOiBLaW5kMjxGLCBGRSwgS2luZDM8RywgUiwgRSwgQT4+LFxuICAgIHByZWRpY2F0ZTogUHJlZGljYXRlPEE+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQzPEcsIFIsIEUsIEE+PlxufVxuXG4vKipcbiAqIFVzZVxuICpcbiAqIC0gW2BmaWx0ZXJgXSgjZmlsdGVyKVxuICogLSBbYGZpbHRlck1hcGBdKCNmaWx0ZXJtYXApXG4gKiAtIFtgcGFydGl0aW9uYF0oI3BhcnRpdGlvbilcbiAqIC0gW2BwYXJ0aXRpb25NYXBgXSgjcGFydGl0aW9ubWFwKVxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyYWJsZUNvbXBvc2l0aW9uPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnVuY3RvcjI8Rj4sXG4gIEc6IEZpbHRlcmFibGUzQzxHLCBFPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMjNDPEYsIEcsIEU+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMjxGPixcbiAgRzogRmlsdGVyYWJsZTJDPEcsIEU+XG4pOiBGaWx0ZXJhYmxlQ29tcG9zaXRpb24yMkM8RiwgRywgRT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlcmFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IyPEY+LFxuICBHOiBGaWx0ZXJhYmxlMjxHPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMjI8RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlcmFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTLCBFPihcbiAgRjogRnVuY3RvcjJDPEYsIEU+LFxuICBHOiBGaWx0ZXJhYmxlMTxHPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMkMxPEYsIEcsIEU+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IyPEY+LFxuICBHOiBGaWx0ZXJhYmxlMTxHPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMjE8RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlcmFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjE8Rj4sXG4gIEc6IEZpbHRlcmFibGUyQzxHLCBFPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMTJDPEYsIEcsIEU+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBGaWx0ZXJhYmxlMjxHPlxuKTogRmlsdGVyYWJsZUNvbXBvc2l0aW9uMTI8RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlcmFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPixcbiAgRzogRmlsdGVyYWJsZTE8Rz5cbik6IEZpbHRlcmFibGVDb21wb3NpdGlvbjExPEYsIEc+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJhYmxlQ29tcG9zaXRpb248RiwgRz4oRjogRnVuY3RvcjxGPiwgRzogRmlsdGVyYWJsZTxHPik6IEZpbHRlcmFibGVDb21wb3NpdGlvbjxGLCBHPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyYWJsZUNvbXBvc2l0aW9uPEYsIEc+KEY6IEZ1bmN0b3I8Rj4sIEc6IEZpbHRlcmFibGU8Rz4pOiBGaWx0ZXJhYmxlQ29tcG9zaXRpb248RiwgRz4ge1xuICBjb25zdCBtYXAgPSBnZXRGdW5jdG9yQ29tcG9zaXRpb24oRiwgRykubWFwXG4gIGNvbnN0IF9jb21wYWN0ID0gY29tcGFjdChGLCBHKVxuICBjb25zdCBfc2VwYXJhdGUgPSBzZXBhcmF0ZShGLCBHLCBHKVxuICBjb25zdCBfZmlsdGVyID0gZmlsdGVyKEYsIEcpXG4gIGNvbnN0IF9maWx0ZXJNYXAgPSBmaWx0ZXJNYXAoRiwgRylcbiAgY29uc3QgX3BhcnRpdGlvbiA9IHBhcnRpdGlvbihGLCBHKVxuICBjb25zdCBfcGFydGl0aW9uTWFwID0gcGFydGl0aW9uTWFwKEYsIEcpXG4gIHJldHVybiB7XG4gICAgbWFwLFxuICAgIGNvbXBhY3Q6IF9jb21wYWN0LFxuICAgIHNlcGFyYXRlOiBfc2VwYXJhdGUsXG4gICAgZmlsdGVyOiAoZmdhLCBmKSA9PiBwaXBlKGZnYSwgX2ZpbHRlcihmKSksXG4gICAgZmlsdGVyTWFwOiAoZmdhLCBmKSA9PiBwaXBlKGZnYSwgX2ZpbHRlck1hcChmKSksXG4gICAgcGFydGl0aW9uOiAoZmdhLCBwKSA9PiBwaXBlKGZnYSwgX3BhcnRpdGlvbihwKSksXG4gICAgcGFydGl0aW9uTWFwOiAoZmdhLCBmKSA9PiBwaXBlKGZnYSwgX3BhcnRpdGlvbk1hcChmKSlcbiAgfVxufVxuIl19