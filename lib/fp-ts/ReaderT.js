"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ap = ap;
exports.chain = chain;
exports.fromNaturalTransformation = fromNaturalTransformation;
exports.fromReader = fromReader;
exports.getReaderM = getReaderM;
exports.map = map;
exports.of = of;

var _function = require("./function");

/**
 * @since 2.0.0
 */
function of(F) {
  return function (a) {
    return function () {
      return F.of(a);
    };
  };
}
/**
 * @since 2.10.0
 */


function map(F) {
  return function (f) {
    return function (fa) {
      return function (r) {
        return F.map(fa(r), f);
      };
    };
  };
}
/**
 * @since 2.10.0
 */


function ap(F) {
  return function (fa) {
    return function (fab) {
      return function (r) {
        return F.ap(fab(r), fa(r));
      };
    };
  };
}
/**
 * @since 2.10.0
 */


function chain(M) {
  return function (f) {
    return function (ma) {
      return function (r) {
        return M.chain(ma(r), function (a) {
          return f(a)(r);
        });
      };
    };
  };
}
/**
 * @since 2.10.0
 */


function fromReader(F) {
  return function (ma) {
    return (0, _function.flow)(ma, F.of);
  };
}
/**
 * @category constructors
 * @since 2.11.0
 */


function fromNaturalTransformation(nt) {
  return function (f) {
    return (0, _function.flow)(f, nt);
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @category model
 * @since 2.0.0
 * @deprecated
 */


/** @deprecated */

/* istanbul ignore next */
function getReaderM(M) {
  var _ap = ap(M);

  var _map = map(M);

  var _chain = chain(M);

  return {
    map: function map(fa, f) {
      return (0, _function.pipe)(fa, _map(f));
    },
    ap: function ap(fab, fa) {
      return (0, _function.pipe)(fab, _ap(fa));
    },
    of: of(M),
    chain: function chain(ma, f) {
      return (0, _function.pipe)(ma, _chain(f));
    },
    ask: function ask() {
      return M.of;
    },
    asks: function asks(f) {
      return (0, _function.flow)(f, M.of);
    },
    local: function local(ma, f) {
      return function (q) {
        return ma(f(q));
      };
    },
    fromReader: fromReader(M),
    fromM: function fromM(ma) {
      return function () {
        return ma;
      };
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9SZWFkZXJULnRzIl0sIm5hbWVzIjpbIm9mIiwiRiIsImEiLCJtYXAiLCJmIiwiZmEiLCJyIiwiYXAiLCJmYWIiLCJjaGFpbiIsIk0iLCJtYSIsImZyb21SZWFkZXIiLCJmcm9tTmF0dXJhbFRyYW5zZm9ybWF0aW9uIiwibnQiLCJnZXRSZWFkZXJNIiwiX2FwIiwiX21hcCIsIl9jaGFpbiIsImFzayIsImFza3MiLCJsb2NhbCIsInEiLCJmcm9tTSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUtBOztBQUxBO0FBQ0E7QUFDQTtBQTRCTyxTQUFTQSxFQUFULENBQWVDLENBQWYsRUFBb0U7QUFDekUsU0FBTyxVQUFDQyxDQUFEO0FBQUEsV0FBTztBQUFBLGFBQU1ELENBQUMsQ0FBQ0QsRUFBRixDQUFLRSxDQUFMLENBQU47QUFBQSxLQUFQO0FBQUEsR0FBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBOzs7QUFvQk8sU0FBU0MsR0FBVCxDQUFnQkYsQ0FBaEIsRUFBZ0g7QUFDckgsU0FBTyxVQUFDRyxDQUFEO0FBQUEsV0FBTyxVQUFDQyxFQUFEO0FBQUEsYUFBUSxVQUFDQyxDQUFEO0FBQUEsZUFBT0wsQ0FBQyxDQUFDRSxHQUFGLENBQU1FLEVBQUUsQ0FBQ0MsQ0FBRCxDQUFSLEVBQWFGLENBQWIsQ0FBUDtBQUFBLE9BQVI7QUFBQSxLQUFQO0FBQUEsR0FBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBOzs7QUFnQ08sU0FBU0csRUFBVCxDQUNMTixDQURLLEVBRWlHO0FBQ3RHLFNBQU8sVUFBQ0ksRUFBRDtBQUFBLFdBQVEsVUFBQ0csR0FBRDtBQUFBLGFBQVMsVUFBQ0YsQ0FBRDtBQUFBLGVBQU9MLENBQUMsQ0FBQ00sRUFBRixDQUFLQyxHQUFHLENBQUNGLENBQUQsQ0FBUixFQUFhRCxFQUFFLENBQUNDLENBQUQsQ0FBZixDQUFQO0FBQUEsT0FBVDtBQUFBLEtBQVI7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7OztBQThCTyxTQUFTRyxLQUFULENBQ0xDLENBREssRUFFK0Y7QUFDcEcsU0FBTyxVQUFDTixDQUFEO0FBQUEsV0FBTyxVQUFDTyxFQUFEO0FBQUEsYUFBUSxVQUFDTCxDQUFEO0FBQUEsZUFBT0ksQ0FBQyxDQUFDRCxLQUFGLENBQVFFLEVBQUUsQ0FBQ0wsQ0FBRCxDQUFWLEVBQWUsVUFBQ0osQ0FBRDtBQUFBLGlCQUFPRSxDQUFDLENBQUNGLENBQUQsQ0FBRCxDQUFLSSxDQUFMLENBQVA7QUFBQSxTQUFmLENBQVA7QUFBQSxPQUFSO0FBQUEsS0FBUDtBQUFBLEdBQVA7QUFDRDtBQUVEO0FBQ0E7QUFDQTs7O0FBZ0JPLFNBQVNNLFVBQVQsQ0FBdUJYLENBQXZCLEVBQXdGO0FBQzdGLFNBQU8sVUFBQ1UsRUFBRDtBQUFBLFdBQVEsb0JBQUtBLEVBQUwsRUFBU1YsQ0FBQyxDQUFDRCxFQUFYLENBQVI7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7O0FBbUJPLFNBQVNhLHlCQUFULENBQ0xDLEVBREssRUFFbUQ7QUFDeEQsU0FBTyxVQUFDVixDQUFEO0FBQUEsV0FBTyxvQkFBS0EsQ0FBTCxFQUFRVSxFQUFSLENBQVA7QUFBQSxHQUFQO0FBQ0QsQyxDQUVEO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQWtJQTs7QUFDQTtBQUNPLFNBQVNDLFVBQVQsQ0FBdUJMLENBQXZCLEVBQWdEO0FBQ3JELE1BQU1NLEdBQUcsR0FBR1QsRUFBRSxDQUFDRyxDQUFELENBQWQ7O0FBQ0EsTUFBTU8sSUFBSSxHQUFHZCxHQUFHLENBQUNPLENBQUQsQ0FBaEI7O0FBQ0EsTUFBTVEsTUFBTSxHQUFHVCxLQUFLLENBQUNDLENBQUQsQ0FBcEI7O0FBRUEsU0FBTztBQUNMUCxJQUFBQSxHQUFHLEVBQUUsYUFBQ0UsRUFBRCxFQUFLRCxDQUFMO0FBQUEsYUFBVyxvQkFBS0MsRUFBTCxFQUFTWSxJQUFJLENBQUNiLENBQUQsQ0FBYixDQUFYO0FBQUEsS0FEQTtBQUVMRyxJQUFBQSxFQUFFLEVBQUUsWUFBQ0MsR0FBRCxFQUFNSCxFQUFOO0FBQUEsYUFBYSxvQkFBS0csR0FBTCxFQUFVUSxHQUFHLENBQUNYLEVBQUQsQ0FBYixDQUFiO0FBQUEsS0FGQztBQUdMTCxJQUFBQSxFQUFFLEVBQUVBLEVBQUUsQ0FBQ1UsQ0FBRCxDQUhEO0FBSUxELElBQUFBLEtBQUssRUFBRSxlQUFDRSxFQUFELEVBQUtQLENBQUw7QUFBQSxhQUFXLG9CQUFLTyxFQUFMLEVBQVNPLE1BQU0sQ0FBQ2QsQ0FBRCxDQUFmLENBQVg7QUFBQSxLQUpGO0FBS0xlLElBQUFBLEdBQUcsRUFBRTtBQUFBLGFBQU1ULENBQUMsQ0FBQ1YsRUFBUjtBQUFBLEtBTEE7QUFNTG9CLElBQUFBLElBQUksRUFBRSxjQUFDaEIsQ0FBRDtBQUFBLGFBQU8sb0JBQUtBLENBQUwsRUFBUU0sQ0FBQyxDQUFDVixFQUFWLENBQVA7QUFBQSxLQU5EO0FBT0xxQixJQUFBQSxLQUFLLEVBQUUsZUFBQ1YsRUFBRCxFQUFLUCxDQUFMO0FBQUEsYUFBVyxVQUFDa0IsQ0FBRDtBQUFBLGVBQU9YLEVBQUUsQ0FBQ1AsQ0FBQyxDQUFDa0IsQ0FBRCxDQUFGLENBQVQ7QUFBQSxPQUFYO0FBQUEsS0FQRjtBQVFMVixJQUFBQSxVQUFVLEVBQUVBLFVBQVUsQ0FBQ0YsQ0FBRCxDQVJqQjtBQVNMYSxJQUFBQSxLQUFLLEVBQUUsZUFBQ1osRUFBRDtBQUFBLGFBQVE7QUFBQSxlQUFNQSxFQUFOO0FBQUEsT0FBUjtBQUFBO0FBVEYsR0FBUDtBQVdEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgQXBwbHksIEFwcGx5MSwgQXBwbHkyLCBBcHBseTJDLCBBcHBseTMsIEFwcGx5M0MsIEFwcGx5NCB9IGZyb20gJy4vQXBwbHknXG5pbXBvcnQgeyBDaGFpbiwgQ2hhaW4xLCBDaGFpbjIsIENoYWluMkMsIENoYWluMywgQ2hhaW4zQywgQ2hhaW40IH0gZnJvbSAnLi9DaGFpbidcbmltcG9ydCB7IGZsb3csIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJ1xuaW1wb3J0IHsgRnVuY3RvciwgRnVuY3RvcjEsIEZ1bmN0b3IyLCBGdW5jdG9yMkMsIEZ1bmN0b3IzLCBGdW5jdG9yM0MsIEZ1bmN0b3I0IH0gZnJvbSAnLi9GdW5jdG9yJ1xuaW1wb3J0IHsgSEtULCBLaW5kLCBLaW5kMiwgS2luZDMsIEtpbmQ0LCBVUklTLCBVUklTMiwgVVJJUzMsIFVSSVM0IH0gZnJvbSAnLi9IS1QnXG5pbXBvcnQgeyBNb25hZCwgTW9uYWQxLCBNb25hZDIsIE1vbmFkMkMsIE1vbmFkMyB9IGZyb20gJy4vTW9uYWQnXG5pbXBvcnQge1xuICBOYXR1cmFsVHJhbnNmb3JtYXRpb24yMixcbiAgTmF0dXJhbFRyYW5zZm9ybWF0aW9uMTIsXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjExLFxuICBOYXR1cmFsVHJhbnNmb3JtYXRpb24sXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjIzUixcbiAgTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjRTXG59IGZyb20gJy4vTmF0dXJhbFRyYW5zZm9ybWF0aW9uJ1xuaW1wb3J0IHsgUG9pbnRlZCwgUG9pbnRlZDEsIFBvaW50ZWQyLCBQb2ludGVkMkMsIFBvaW50ZWQzLCBQb2ludGVkM0MsIFBvaW50ZWQ0IH0gZnJvbSAnLi9Qb2ludGVkJ1xuaW1wb3J0IHsgUmVhZGVyIH0gZnJvbSAnLi9SZWFkZXInXG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Y8RiBleHRlbmRzIFVSSVM0PihGOiBQb2ludGVkNDxGPik6IDxBLCBSLCBTLCBGUiwgRkU+KGE6IEEpID0+IFJlYWRlcjxSLCBLaW5kNDxGLCBTLCBGUiwgRkUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIG9mPEYgZXh0ZW5kcyBVUklTMz4oRjogUG9pbnRlZDM8Rj4pOiA8QSwgUiwgRlIsIEZFPihhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBvZjxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBQb2ludGVkM0M8RiwgRkU+KTogPEEsIFIsIEZSPihhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBvZjxGIGV4dGVuZHMgVVJJUzI+KEY6IFBvaW50ZWQyPEY+KTogPEEsIFIsIEZFPihhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDI8RiwgRkUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIG9mPEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IFBvaW50ZWQyQzxGLCBGRT4pOiA8QSwgUj4oYTogQSkgPT4gUmVhZGVyPFIsIEtpbmQyPEYsIEZFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBvZjxGIGV4dGVuZHMgVVJJUz4oRjogUG9pbnRlZDE8Rj4pOiA8QSwgUj4oYTogQSkgPT4gUmVhZGVyPFIsIEtpbmQ8RiwgQT4+XG5leHBvcnQgZnVuY3Rpb24gb2Y8Rj4oRjogUG9pbnRlZDxGPik6IDxBLCBSPihhOiBBKSA9PiBSZWFkZXI8UiwgSEtUPEYsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIG9mPEY+KEY6IFBvaW50ZWQ8Rj4pOiA8QSwgUj4oYTogQSkgPT4gUmVhZGVyPFIsIEhLVDxGLCBBPj4ge1xuICByZXR1cm4gKGEpID0+ICgpID0+IEYub2YoYSlcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXA8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogRnVuY3RvcjQ8Rj5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gPFIsIFMsIEZSLCBGRT4oZmE6IFJlYWRlcjxSLCBLaW5kNDxGLCBTLCBGUiwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQ0PEYsIFMsIEZSLCBGRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IEZ1bmN0b3IzPEY+XG4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxSLCBGUiwgRkU+KGZhOiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj4pID0+IFJlYWRlcjxSLCBLaW5kMzxGLCBGUiwgRkUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzMsIEZFPihcbiAgRjogRnVuY3RvcjNDPEYsIEZFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8UiwgRlI+KGZhOiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj4pID0+IFJlYWRlcjxSLCBLaW5kMzxGLCBGUiwgRkUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIG1hcDxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8UiwgRkU+KGZhOiBSZWFkZXI8UiwgS2luZDI8RiwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQyPEYsIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8RiBleHRlbmRzIFVSSVMyLCBGRT4oXG4gIEY6IEZ1bmN0b3IyQzxGLCBGRT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gQikgPT4gPFI+KGZhOiBSZWFkZXI8UiwgS2luZDI8RiwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQyPEYsIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8RiBleHRlbmRzIFVSSVM+KFxuICBGOiBGdW5jdG9yMTxGPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBCKSA9PiA8Uj4oZmE6IFJlYWRlcjxSLCBLaW5kPEYsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQ8RiwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxSPihmYTogUmVhZGVyPFIsIEhLVDxGLCBBPj4pID0+IFJlYWRlcjxSLCBIS1Q8RiwgQj4+XG5leHBvcnQgZnVuY3Rpb24gbWFwPEY+KEY6IEZ1bmN0b3I8Rj4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEIpID0+IDxSPihmYTogUmVhZGVyPFIsIEhLVDxGLCBBPj4pID0+IFJlYWRlcjxSLCBIS1Q8RiwgQj4+IHtcbiAgcmV0dXJuIChmKSA9PiAoZmEpID0+IChyKSA9PiBGLm1hcChmYShyKSwgZilcbn1cblxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBBcHBseTQ8Rj5cbik6IDxSLCBTLCBGUiwgRkUsIEE+KFxuICBmYTogUmVhZGVyPFIsIEtpbmQ0PEYsIFMsIEZSLCBGRSwgQT4+XG4pID0+IDxCPihmYWI6IFJlYWRlcjxSLCBLaW5kNDxGLCBTLCBGUiwgRkUsIChhOiBBKSA9PiBCPj4pID0+IFJlYWRlcjxSLCBLaW5kNDxGLCBTLCBGUiwgRkUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYgZXh0ZW5kcyBVUklTMz4oXG4gIEY6IEFwcGx5MzxGPlxuKTogPFIsIEZSLCBGRSwgQT4oXG4gIGZhOiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj5cbikgPT4gPEI+KGZhYjogUmVhZGVyPFIsIEtpbmQzPEYsIEZSLCBGRSwgKGE6IEEpID0+IEI+PikgPT4gUmVhZGVyPFIsIEtpbmQzPEYsIEZSLCBGRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gYXA8RiBleHRlbmRzIFVSSVMzLCBGRT4oXG4gIEY6IEFwcGx5M0M8RiwgRkU+XG4pOiA8UiwgRlIsIEE+KFxuICBmYTogUmVhZGVyPFIsIEtpbmQzPEYsIEZSLCBGRSwgQT4+XG4pID0+IDxCPihmYWI6IFJlYWRlcjxSLCBLaW5kMzxGLCBGUiwgRkUsIChhOiBBKSA9PiBCPj4pID0+IFJlYWRlcjxSLCBLaW5kMzxGLCBGUiwgRkUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEFwcGx5MjxGPlxuKTogPFIsIEZFLCBBPihcbiAgZmE6IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgQT4+XG4pID0+IDxCPihmYWI6IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgKGE6IEEpID0+IEI+PikgPT4gUmVhZGVyPFIsIEtpbmQyPEYsIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogQXBwbHkyQzxGLCBGRT5cbik6IDxSLCBBPihcbiAgZmE6IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgQT4+XG4pID0+IDxCPihmYWI6IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgKGE6IEEpID0+IEI+PikgPT4gUmVhZGVyPFIsIEtpbmQyPEYsIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBhcDxGIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEFwcGx5MTxGPlxuKTogPFIsIEE+KGZhOiBSZWFkZXI8UiwgS2luZDxGLCBBPj4pID0+IDxCPihmYWI6IFJlYWRlcjxSLCBLaW5kPEYsIChhOiBBKSA9PiBCPj4pID0+IFJlYWRlcjxSLCBLaW5kPEYsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEY+KFxuICBGOiBBcHBseTxGPlxuKTogPFIsIEE+KGZhOiBSZWFkZXI8UiwgSEtUPEYsIEE+PikgPT4gPEI+KGZhYjogUmVhZGVyPFIsIEhLVDxGLCAoYTogQSkgPT4gQj4+KSA9PiBSZWFkZXI8UiwgSEtUPEYsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGFwPEY+KFxuICBGOiBBcHBseTxGPlxuKTogPFIsIEE+KGZhOiBSZWFkZXI8UiwgSEtUPEYsIEE+PikgPT4gPEI+KGZhYjogUmVhZGVyPFIsIEhLVDxGLCAoYTogQSkgPT4gQj4+KSA9PiBSZWFkZXI8UiwgSEtUPEYsIEI+PiB7XG4gIHJldHVybiAoZmEpID0+IChmYWIpID0+IChyKSA9PiBGLmFwKGZhYihyKSwgZmEocikpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVM0PihcbiAgTTogQ2hhaW40PE0+XG4pOiA8QSwgUiwgUywgRlIsIEZFLCBCPihcbiAgZjogKGE6IEEpID0+IFJlYWRlcjxSLCBLaW5kNDxNLCBTLCBGUiwgRkUsIEI+PlxuKSA9PiAobWE6IFJlYWRlcjxSLCBLaW5kNDxNLCBTLCBGUiwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQ0PE0sIFMsIEZSLCBGRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMzPihcbiAgTTogQ2hhaW4zPE0+XG4pOiA8QSwgUiwgRlIsIEZFLCBCPihcbiAgZjogKGE6IEEpID0+IFJlYWRlcjxSLCBLaW5kMzxNLCBGUiwgRkUsIEI+PlxuKSA9PiAobWE6IFJlYWRlcjxSLCBLaW5kMzxNLCBGUiwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQzPE0sIEZSLCBGRSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TSBleHRlbmRzIFVSSVMzLCBGRT4oXG4gIE06IENoYWluM0M8TSwgRkU+XG4pOiA8QSwgUiwgRlIsIEI+KFxuICBmOiAoYTogQSkgPT4gUmVhZGVyPFIsIEtpbmQzPE0sIEZSLCBGRSwgQj4+XG4pID0+IChtYTogUmVhZGVyPFIsIEtpbmQzPE0sIEZSLCBGRSwgQT4+KSA9PiBSZWFkZXI8UiwgS2luZDM8TSwgRlIsIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNIGV4dGVuZHMgVVJJUzI+KFxuICBNOiBDaGFpbjI8TT5cbik6IDxBLCBSLCBGRSwgQj4oXG4gIGY6IChhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDI8TSwgRkUsIEI+PlxuKSA9PiAobWE6IFJlYWRlcjxSLCBLaW5kMjxNLCBGRSwgQT4+KSA9PiBSZWFkZXI8UiwgS2luZDI8TSwgRkUsIEI+PlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluPE0gZXh0ZW5kcyBVUklTMiwgRkU+KFxuICBNOiBDaGFpbjJDPE0sIEZFPlxuKTogPEEsIFIsIEI+KGY6IChhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDI8TSwgRkUsIEI+PikgPT4gKG1hOiBSZWFkZXI8UiwgS2luZDI8TSwgRkUsIEE+PikgPT4gUmVhZGVyPFIsIEtpbmQyPE0sIEZFLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNIGV4dGVuZHMgVVJJUz4oXG4gIE06IENoYWluMTxNPlxuKTogPEEsIFIsIEI+KGY6IChhOiBBKSA9PiBSZWFkZXI8UiwgS2luZDxNLCBCPj4pID0+IChtYTogUmVhZGVyPFIsIEtpbmQ8TSwgQT4+KSA9PiBSZWFkZXI8UiwgS2luZDxNLCBCPj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxNPihcbiAgTTogQ2hhaW48TT5cbik6IDxBLCBSLCBCPihmOiAoYTogQSkgPT4gUmVhZGVyPFIsIEhLVDxNLCBCPj4pID0+IChtYTogUmVhZGVyPFIsIEhLVDxNLCBBPj4pID0+IFJlYWRlcjxSLCBIS1Q8TSwgQj4+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW48TT4oXG4gIE06IENoYWluPE0+XG4pOiA8QSwgUiwgQj4oZjogKGE6IEEpID0+IFJlYWRlcjxSLCBIS1Q8TSwgQj4+KSA9PiAobWE6IFJlYWRlcjxSLCBIS1Q8TSwgQT4+KSA9PiBSZWFkZXI8UiwgSEtUPE0sIEI+PiB7XG4gIHJldHVybiAoZikgPT4gKG1hKSA9PiAocikgPT4gTS5jaGFpbihtYShyKSwgKGEpID0+IGYoYSkocikpXG59XG5cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBQb2ludGVkNDxGPlxuKTogPFIsIEEsIFMsIEZSLCBGRT4obWE6IFJlYWRlcjxSLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQ0PEYsIFMsIEZSLCBGRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBQb2ludGVkMzxGPlxuKTogPFIsIEEsIEZSLCBGRT4obWE6IFJlYWRlcjxSLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQzPEYsIEZSLCBGRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGIGV4dGVuZHMgVVJJUzMsIEZFPihcbiAgRjogUG9pbnRlZDNDPEYsIEZFPlxuKTogPFIsIEEsIEZSPihtYTogUmVhZGVyPFIsIEE+KSA9PiBSZWFkZXI8UiwgS2luZDM8RiwgRlIsIEZFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUmVhZGVyPEYgZXh0ZW5kcyBVUklTMj4oRjogUG9pbnRlZDI8Rj4pOiA8UiwgQSwgRkU+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGIGV4dGVuZHMgVVJJUzIsIEZFPihcbiAgRjogUG9pbnRlZDJDPEYsIEZFPlxuKTogPFIsIEE+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlcjxSLCBLaW5kMjxGLCBGRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGIGV4dGVuZHMgVVJJUz4oRjogUG9pbnRlZDE8Rj4pOiA8UiwgQT4obWE6IFJlYWRlcjxSLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQ8RiwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGPihGOiBQb2ludGVkPEY+KTogPFIsIEE+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlcjxSLCBIS1Q8RiwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlYWRlcjxGPihGOiBQb2ludGVkPEY+KTogPFIsIEE+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlcjxSLCBIS1Q8RiwgQT4+IHtcbiAgcmV0dXJuIChtYSkgPT4gZmxvdyhtYSwgRi5vZilcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTmF0dXJhbFRyYW5zZm9ybWF0aW9uPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVM0PihcbiAgbnQ6IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjI0UzxGLCBHPlxuKTogPFIsIFMsIEEsIEU+KGY6IChyOiBSKSA9PiBLaW5kMjxGLCBTLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQ0PEcsIFMsIFIsIEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OYXR1cmFsVHJhbnNmb3JtYXRpb248RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzM+KFxuICBudDogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjNSPEYsIEc+XG4pOiA8UiwgQSwgRT4oZjogKHI6IFIpID0+IEtpbmQyPEYsIFIsIEE+KSA9PiBSZWFkZXI8UiwgS2luZDM8RywgUiwgRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMj4oXG4gIG50OiBOYXR1cmFsVHJhbnNmb3JtYXRpb24yMjxGLCBHPlxuKTogPFIsIEUsIEE+KGY6IChyOiBSKSA9PiBLaW5kMjxGLCBFLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQyPEcsIEUsIEE+PlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21OYXR1cmFsVHJhbnNmb3JtYXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMj4oXG4gIG50OiBOYXR1cmFsVHJhbnNmb3JtYXRpb24xMjxGLCBHPlxuKTogPFIsIEEsIEU+KGY6IChyOiBSKSA9PiBLaW5kPEYsIEE+KSA9PiBSZWFkZXI8UiwgS2luZDI8RywgRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+KFxuICBudDogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMTE8RiwgRz5cbik6IDxSLCBBPihmOiAocjogUikgPT4gS2luZDxGLCBBPikgPT4gUmVhZGVyPFIsIEtpbmQ8RywgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGLCBHPihcbiAgbnQ6IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGLCBHPlxuKTogPFIsIEE+KGY6IChyOiBSKSA9PiBIS1Q8RiwgQT4pID0+IFJlYWRlcjxSLCBIS1Q8RywgQT4+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGLCBHPihcbiAgbnQ6IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjxGLCBHPlxuKTogPFIsIEE+KGY6IChyOiBSKSA9PiBIS1Q8RiwgQT4pID0+IFJlYWRlcjxSLCBIS1Q8RywgQT4+IHtcbiAgcmV0dXJuIChmKSA9PiBmbG93KGYsIG50KVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIHRzbGludDpkaXNhYmxlOiBkZXByZWNhdGlvblxuXG4vKipcbiAqIEBjYXRlZ29yeSBtb2RlbFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRlclQ8TSwgUiwgQT4ge1xuICAocjogUik6IEhLVDxNLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkZXJNPE0+IHtcbiAgcmVhZG9ubHkgbWFwOiA8UiwgQSwgQj4obWE6IFJlYWRlclQ8TSwgUiwgQT4sIGY6IChhOiBBKSA9PiBCKSA9PiBSZWFkZXJUPE0sIFIsIEI+XG4gIHJlYWRvbmx5IG9mOiA8UiwgQT4oYTogQSkgPT4gUmVhZGVyVDxNLCBSLCBBPlxuICByZWFkb25seSBhcDogPFIsIEEsIEI+KG1hYjogUmVhZGVyVDxNLCBSLCAoYTogQSkgPT4gQj4sIG1hOiBSZWFkZXJUPE0sIFIsIEE+KSA9PiBSZWFkZXJUPE0sIFIsIEI+XG4gIHJlYWRvbmx5IGNoYWluOiA8UiwgQSwgQj4obWE6IFJlYWRlclQ8TSwgUiwgQT4sIGY6IChhOiBBKSA9PiBSZWFkZXJUPE0sIFIsIEI+KSA9PiBSZWFkZXJUPE0sIFIsIEI+XG4gIHJlYWRvbmx5IGFzazogPFI+KCkgPT4gUmVhZGVyVDxNLCBSLCBSPlxuICByZWFkb25seSBhc2tzOiA8UiwgQT4oZjogKHI6IFIpID0+IEEpID0+IFJlYWRlclQ8TSwgUiwgQT5cbiAgcmVhZG9ubHkgbG9jYWw6IDxSMSwgQSwgUjI+KG1hOiBSZWFkZXJUPE0sIFIxLCBBPiwgZjogKGQ6IFIyKSA9PiBSMSkgPT4gUmVhZGVyVDxNLCBSMiwgQT5cbiAgcmVhZG9ubHkgZnJvbVJlYWRlcjogPFIsIEE+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlclQ8TSwgUiwgQT5cbiAgcmVhZG9ubHkgZnJvbU06IDxSLCBBPihtYTogSEtUPE0sIEE+KSA9PiBSZWFkZXJUPE0sIFIsIEE+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IG1vZGVsXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZGVyVDE8TSBleHRlbmRzIFVSSVMsIFIsIEE+IHtcbiAgKHI6IFIpOiBLaW5kPE0sIEE+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRlck0xPE0gZXh0ZW5kcyBVUklTPiB7XG4gIHJlYWRvbmx5IG1hcDogPFIsIEEsIEI+KG1hOiBSZWFkZXJUMTxNLCBSLCBBPiwgZjogKGE6IEEpID0+IEIpID0+IFJlYWRlclQxPE0sIFIsIEI+XG4gIHJlYWRvbmx5IG9mOiA8UiwgQT4oYTogQSkgPT4gUmVhZGVyVDE8TSwgUiwgQT5cbiAgcmVhZG9ubHkgYXA6IDxSLCBBLCBCPihtYWI6IFJlYWRlclQxPE0sIFIsIChhOiBBKSA9PiBCPiwgbWE6IFJlYWRlclQxPE0sIFIsIEE+KSA9PiBSZWFkZXJUMTxNLCBSLCBCPlxuICByZWFkb25seSBjaGFpbjogPFIsIEEsIEI+KG1hOiBSZWFkZXJUMTxNLCBSLCBBPiwgZjogKGE6IEEpID0+IFJlYWRlclQxPE0sIFIsIEI+KSA9PiBSZWFkZXJUMTxNLCBSLCBCPlxuICByZWFkb25seSBhc2s6IDxSPigpID0+IFJlYWRlclQxPE0sIFIsIFI+XG4gIHJlYWRvbmx5IGFza3M6IDxSLCBBPihmOiAocjogUikgPT4gQSkgPT4gUmVhZGVyVDE8TSwgUiwgQT5cbiAgcmVhZG9ubHkgbG9jYWw6IDxSMSwgQSwgUjI+KG1hOiBSZWFkZXJUMTxNLCBSMSwgQT4sIGY6IChkOiBSMikgPT4gUjEpID0+IFJlYWRlclQxPE0sIFIyLCBBPlxuICByZWFkb25seSBmcm9tUmVhZGVyOiA8UiwgQT4obWE6IFJlYWRlcjxSLCBBPikgPT4gUmVhZGVyVDE8TSwgUiwgQT5cbiAgcmVhZG9ubHkgZnJvbU06IDxSLCBBPihtYTogS2luZDxNLCBBPikgPT4gUmVhZGVyVDE8TSwgUiwgQT5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgbW9kZWxcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkZXJUMjxNIGV4dGVuZHMgVVJJUzIsIFIsIEUsIEE+IHtcbiAgKHI6IFIpOiBLaW5kMjxNLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkZXJNMjxNIGV4dGVuZHMgVVJJUzI+IHtcbiAgcmVhZG9ubHkgbWFwOiA8UiwgRSwgQSwgQj4obWE6IFJlYWRlclQyPE0sIFIsIEUsIEE+LCBmOiAoYTogQSkgPT4gQikgPT4gUmVhZGVyVDI8TSwgUiwgRSwgQj5cbiAgcmVhZG9ubHkgb2Y6IDxSLCBFLCBBPihhOiBBKSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBBPlxuICByZWFkb25seSBhcDogPFIsIEUsIEEsIEI+KG1hYjogUmVhZGVyVDI8TSwgUiwgRSwgKGE6IEEpID0+IEI+LCBtYTogUmVhZGVyVDI8TSwgUiwgRSwgQT4pID0+IFJlYWRlclQyPE0sIFIsIEUsIEI+XG4gIHJlYWRvbmx5IGNoYWluOiA8UiwgRSwgQSwgQj4obWE6IFJlYWRlclQyPE0sIFIsIEUsIEE+LCBmOiAoYTogQSkgPT4gUmVhZGVyVDI8TSwgUiwgRSwgQj4pID0+IFJlYWRlclQyPE0sIFIsIEUsIEI+XG4gIHJlYWRvbmx5IGFzazogPFIsIEU+KCkgPT4gUmVhZGVyVDI8TSwgUiwgRSwgUj5cbiAgcmVhZG9ubHkgYXNrczogPFIsIEUsIEE+KGY6IChyOiBSKSA9PiBBKSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBBPlxuICByZWFkb25seSBsb2NhbDogPFIxLCBFLCBBLCBSMj4obWE6IFJlYWRlclQyPE0sIFIxLCBFLCBBPiwgZjogKGQ6IFIyKSA9PiBSMSkgPT4gUmVhZGVyVDI8TSwgUjIsIEUsIEE+XG4gIHJlYWRvbmx5IGZyb21SZWFkZXI6IDxSLCBFLCBBPihtYTogUmVhZGVyPFIsIEE+KSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBBPlxuICByZWFkb25seSBmcm9tTTogPFIsIEUsIEE+KG1hOiBLaW5kMjxNLCBFLCBBPikgPT4gUmVhZGVyVDI8TSwgUiwgRSwgQT5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4yLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZGVyTTJDPE0gZXh0ZW5kcyBVUklTMiwgRT4ge1xuICByZWFkb25seSBtYXA6IDxSLCBBLCBCPihtYTogUmVhZGVyVDI8TSwgUiwgRSwgQT4sIGY6IChhOiBBKSA9PiBCKSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBCPlxuICByZWFkb25seSBvZjogPFIsIEE+KGE6IEEpID0+IFJlYWRlclQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IGFwOiA8UiwgQSwgQj4obWFiOiBSZWFkZXJUMjxNLCBSLCBFLCAoYTogQSkgPT4gQj4sIG1hOiBSZWFkZXJUMjxNLCBSLCBFLCBBPikgPT4gUmVhZGVyVDI8TSwgUiwgRSwgQj5cbiAgcmVhZG9ubHkgY2hhaW46IDxSLCBBLCBCPihtYTogUmVhZGVyVDI8TSwgUiwgRSwgQT4sIGY6IChhOiBBKSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBCPikgPT4gUmVhZGVyVDI8TSwgUiwgRSwgQj5cbiAgcmVhZG9ubHkgYXNrOiA8Uj4oKSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBSPlxuICByZWFkb25seSBhc2tzOiA8UiwgQT4oZjogKHI6IFIpID0+IEEpID0+IFJlYWRlclQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IGxvY2FsOiA8UjEsIEEsIFIyPihtYTogUmVhZGVyVDI8TSwgUjEsIEUsIEE+LCBmOiAoZDogUjIpID0+IFIxKSA9PiBSZWFkZXJUMjxNLCBSMiwgRSwgQT5cbiAgcmVhZG9ubHkgZnJvbVJlYWRlcjogPFIsIEE+KG1hOiBSZWFkZXI8UiwgQT4pID0+IFJlYWRlclQyPE0sIFIsIEUsIEE+XG4gIHJlYWRvbmx5IGZyb21NOiA8UiwgQT4obWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBSZWFkZXJUMjxNLCBSLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkZXJUMzxNIGV4dGVuZHMgVVJJUzMsIFIsIFUsIEUsIEE+IHtcbiAgKHI6IFIpOiBLaW5kMzxNLCBVLCBFLCBBPlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkZXJNMzxNIGV4dGVuZHMgVVJJUzM+IHtcbiAgcmVhZG9ubHkgbWFwOiA8UiwgVSwgRSwgQSwgQj4obWE6IFJlYWRlclQzPE0sIFIsIFUsIEUsIEE+LCBmOiAoYTogQSkgPT4gQikgPT4gUmVhZGVyVDM8TSwgUiwgVSwgRSwgQj5cbiAgcmVhZG9ubHkgb2Y6IDxSLCBVLCBFLCBBPihhOiBBKSA9PiBSZWFkZXJUMzxNLCBSLCBVLCBFLCBBPlxuICByZWFkb25seSBhcDogPFIsIFUsIEUsIEEsIEI+KFxuICAgIG1hYjogUmVhZGVyVDM8TSwgUiwgVSwgRSwgKGE6IEEpID0+IEI+LFxuICAgIG1hOiBSZWFkZXJUMzxNLCBSLCBVLCBFLCBBPlxuICApID0+IFJlYWRlclQzPE0sIFIsIFUsIEUsIEI+XG4gIHJlYWRvbmx5IGNoYWluOiA8UiwgVSwgRSwgQSwgQj4oXG4gICAgbWE6IFJlYWRlclQzPE0sIFIsIFUsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBSZWFkZXJUMzxNLCBSLCBVLCBFLCBCPlxuICApID0+IFJlYWRlclQzPE0sIFIsIFUsIEUsIEI+XG4gIHJlYWRvbmx5IGFzazogPFIsIFUsIEU+KCkgPT4gUmVhZGVyVDM8TSwgUiwgVSwgRSwgUj5cbiAgcmVhZG9ubHkgYXNrczogPFIsIFUsIEUsIEE+KGY6IChyOiBSKSA9PiBBKSA9PiBSZWFkZXJUMzxNLCBSLCBVLCBFLCBBPlxuICByZWFkb25seSBsb2NhbDogPFIxLCBVLCBFLCBBLCBSMj4obWE6IFJlYWRlclQzPE0sIFIxLCBVLCBFLCBBPiwgZjogKGQ6IFIyKSA9PiBSMSkgPT4gUmVhZGVyVDM8TSwgUjIsIFUsIEUsIEE+XG4gIHJlYWRvbmx5IGZyb21SZWFkZXI6IDxSLCBVLCBFLCBBPihtYTogUmVhZGVyPFIsIEE+KSA9PiBSZWFkZXJUMzxNLCBSLCBVLCBFLCBBPlxuICByZWFkb25seSBmcm9tTTogPFIsIFUsIEUsIEE+KG1hOiBLaW5kMzxNLCBVLCBFLCBBPikgPT4gUmVhZGVyVDM8TSwgUiwgVSwgRSwgQT5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFkZXJNPE0gZXh0ZW5kcyBVUklTMz4oTTogTW9uYWQzPE0+KTogUmVhZGVyTTM8TT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRlck08TSBleHRlbmRzIFVSSVMyPihNOiBNb25hZDI8TT4pOiBSZWFkZXJNMjxNPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhZGVyTTxNIGV4dGVuZHMgVVJJUzIsIEU+KE06IE1vbmFkMkM8TSwgRT4pOiBSZWFkZXJNMkM8TSwgRT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRlck08TSBleHRlbmRzIFVSSVM+KE06IE1vbmFkMTxNPik6IFJlYWRlck0xPE0+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFkZXJNPE0+KE06IE1vbmFkPE0+KTogUmVhZGVyTTxNPlxuLyoqIEBkZXByZWNhdGVkICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRlck08TT4oTTogTW9uYWQ8TT4pOiBSZWFkZXJNPE0+IHtcbiAgY29uc3QgX2FwID0gYXAoTSlcbiAgY29uc3QgX21hcCA9IG1hcChNKVxuICBjb25zdCBfY2hhaW4gPSBjaGFpbihNKVxuXG4gIHJldHVybiB7XG4gICAgbWFwOiAoZmEsIGYpID0+IHBpcGUoZmEsIF9tYXAoZikpLFxuICAgIGFwOiAoZmFiLCBmYSkgPT4gcGlwZShmYWIsIF9hcChmYSkpLFxuICAgIG9mOiBvZihNKSxcbiAgICBjaGFpbjogKG1hLCBmKSA9PiBwaXBlKG1hLCBfY2hhaW4oZikpLFxuICAgIGFzazogKCkgPT4gTS5vZixcbiAgICBhc2tzOiAoZikgPT4gZmxvdyhmLCBNLm9mKSxcbiAgICBsb2NhbDogKG1hLCBmKSA9PiAocSkgPT4gbWEoZihxKSksXG4gICAgZnJvbVJlYWRlcjogZnJvbVJlYWRlcihNKSxcbiAgICBmcm9tTTogKG1hKSA9PiAoKSA9PiBtYVxuICB9XG59XG4iXX0=