"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.compact = compact;
exports.getCompactableComposition = getCompactableComposition;
exports.separate = separate;

var _function = require("./function");

var _Functor = require("./Functor");

var _Option = require("./Option");

var S = _interopRequireWildcard(require("./Separated"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * `Compactable` represents data structures which can be _compacted_/_filtered_. This is a generalization of
 * `catOptions` as a new function `compact`. `compact` has relations with `Functor`, `Applicative`,
 * `Monad`, `Alternative`, and `Traversable` in that we can use these classes to provide the ability to
 * operate on a data type by eliminating intermediate `None`s. This is useful for representing the filtering out of
 * values, or failure.
 *
 * Adapted from https://github.com/LiamGoodacre/purescript-filterable/blob/master/src/Data/Compactable.purs
 *
 * @since 2.0.0
 */
function compact(F, G) {
  return function (fga) {
    return F.map(fga, G.compact);
  };
}
/**
 * `separate` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function separate(F, C, G) {
  var _compact = compact(F, C);

  var _map = (0, _Functor.map)(F, G);

  return function (fge) {
    return S.separated(_compact((0, _function.pipe)(fge, _map(_Option.getLeft))), _compact((0, _function.pipe)(fge, _map(_Option.getRight))));
  };
} // -------------------------------------------------------------------------------------
// deprecated
// -------------------------------------------------------------------------------------
// tslint:disable: deprecation

/**
 * @since 2.0.0
 * @deprecated
 */


/** @deprecated */
function getCompactableComposition(F, G) {
  var map = (0, _Functor.getFunctorComposition)(F, G).map;
  return {
    map: map,
    compact: compact(F, G),
    separate: separate(F, G, G)
  };
}
/**
 * Use [`Separated`](./Separated.ts.html#separated) instead.
 *
 * @since 2.0.0
 * @deprecated
 */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9Db21wYWN0YWJsZS50cyJdLCJuYW1lcyI6WyJjb21wYWN0IiwiRiIsIkciLCJmZ2EiLCJtYXAiLCJzZXBhcmF0ZSIsIkMiLCJfY29tcGFjdCIsIl9tYXAiLCJmZ2UiLCJTIiwic2VwYXJhdGVkIiwiZ2V0TGVmdCIsImdldFJpZ2h0IiwiZ2V0Q29tcGFjdGFibGVDb21wb3NpdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFZQTs7QUFDQTs7QUFvQkE7O0FBQ0E7Ozs7OztBQWxDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcUlPLFNBQVNBLE9BQVQsQ0FDTEMsQ0FESyxFQUVMQyxDQUZLLEVBR29EO0FBQ3pELFNBQU8sVUFBQ0MsR0FBRDtBQUFBLFdBQVNGLENBQUMsQ0FBQ0csR0FBRixDQUFNRCxHQUFOLEVBQVdELENBQUMsQ0FBQ0YsT0FBYixDQUFUO0FBQUEsR0FBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUF1Qk8sU0FBU0ssUUFBVCxDQUNMSixDQURLLEVBRUxLLENBRkssRUFHTEosQ0FISyxFQUkyRjtBQUNoRyxNQUFNSyxRQUFRLEdBQUdQLE9BQU8sQ0FBQ0MsQ0FBRCxFQUFJSyxDQUFKLENBQXhCOztBQUNBLE1BQU1FLElBQUksR0FBRyxrQkFBSVAsQ0FBSixFQUFPQyxDQUFQLENBQWI7O0FBQ0EsU0FBTyxVQUFDTyxHQUFEO0FBQUEsV0FBU0MsQ0FBQyxDQUFDQyxTQUFGLENBQVlKLFFBQVEsQ0FBQyxvQkFBS0UsR0FBTCxFQUFVRCxJQUFJLENBQUNJLGVBQUQsQ0FBZCxDQUFELENBQXBCLEVBQWdETCxRQUFRLENBQUMsb0JBQUtFLEdBQUwsRUFBVUQsSUFBSSxDQUFDSyxnQkFBRCxDQUFkLENBQUQsQ0FBeEQsQ0FBVDtBQUFBLEdBQVA7QUFDRCxDLENBRUQ7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQW1LQTtBQUNPLFNBQVNDLHlCQUFULENBQ0xiLENBREssRUFFTEMsQ0FGSyxFQUd5QjtBQUM5QixNQUFNRSxHQUFHLEdBQUcsb0NBQXNCSCxDQUF0QixFQUF5QkMsQ0FBekIsRUFBNEJFLEdBQXhDO0FBQ0EsU0FBTztBQUNMQSxJQUFBQSxHQUFHLEVBQUhBLEdBREs7QUFFTEosSUFBQUEsT0FBTyxFQUFFQSxPQUFPLENBQUNDLENBQUQsRUFBSUMsQ0FBSixDQUZYO0FBR0xHLElBQUFBLFFBQVEsRUFBRUEsUUFBUSxDQUFDSixDQUFELEVBQUlDLENBQUosRUFBT0EsQ0FBUDtBQUhiLEdBQVA7QUFLRDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogYENvbXBhY3RhYmxlYCByZXByZXNlbnRzIGRhdGEgc3RydWN0dXJlcyB3aGljaCBjYW4gYmUgX2NvbXBhY3RlZF8vX2ZpbHRlcmVkXy4gVGhpcyBpcyBhIGdlbmVyYWxpemF0aW9uIG9mXG4gKiBgY2F0T3B0aW9uc2AgYXMgYSBuZXcgZnVuY3Rpb24gYGNvbXBhY3RgLiBgY29tcGFjdGAgaGFzIHJlbGF0aW9ucyB3aXRoIGBGdW5jdG9yYCwgYEFwcGxpY2F0aXZlYCxcbiAqIGBNb25hZGAsIGBBbHRlcm5hdGl2ZWAsIGFuZCBgVHJhdmVyc2FibGVgIGluIHRoYXQgd2UgY2FuIHVzZSB0aGVzZSBjbGFzc2VzIHRvIHByb3ZpZGUgdGhlIGFiaWxpdHkgdG9cbiAqIG9wZXJhdGUgb24gYSBkYXRhIHR5cGUgYnkgZWxpbWluYXRpbmcgaW50ZXJtZWRpYXRlIGBOb25lYHMuIFRoaXMgaXMgdXNlZnVsIGZvciByZXByZXNlbnRpbmcgdGhlIGZpbHRlcmluZyBvdXQgb2ZcbiAqIHZhbHVlcywgb3IgZmFpbHVyZS5cbiAqXG4gKiBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0xpYW1Hb29kYWNyZS9wdXJlc2NyaXB0LWZpbHRlcmFibGUvYmxvYi9tYXN0ZXIvc3JjL0RhdGEvQ29tcGFjdGFibGUucHVyc1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5pbXBvcnQgeyBFaXRoZXIgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJ1xuaW1wb3J0IHtcbiAgRnVuY3RvcixcbiAgRnVuY3RvcjEsXG4gIEZ1bmN0b3IyLFxuICBGdW5jdG9yMkMsXG4gIEZ1bmN0b3IzQyxcbiAgRnVuY3RvckNvbXBvc2l0aW9uLFxuICBGdW5jdG9yQ29tcG9zaXRpb24xMSxcbiAgRnVuY3RvckNvbXBvc2l0aW9uMTIsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjEyQyxcbiAgRnVuY3RvckNvbXBvc2l0aW9uMjEsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjIyLFxuICBGdW5jdG9yQ29tcG9zaXRpb24yMkMsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjIzLFxuICBGdW5jdG9yQ29tcG9zaXRpb24yM0MsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbjJDMSxcbiAgZ2V0RnVuY3RvckNvbXBvc2l0aW9uLFxuICBtYXBcbn0gZnJvbSAnLi9GdW5jdG9yJ1xuaW1wb3J0IHsgSEtULCBLaW5kLCBLaW5kMiwgS2luZDMsIEtpbmQ0LCBVUklTLCBVUklTMiwgVVJJUzMsIFVSSVM0IH0gZnJvbSAnLi9IS1QnXG5pbXBvcnQgeyBnZXRMZWZ0LCBnZXRSaWdodCwgT3B0aW9uIH0gZnJvbSAnLi9PcHRpb24nXG5pbXBvcnQgKiBhcyBTIGZyb20gJy4vU2VwYXJhdGVkJ1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBtb2RlbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlPEY+IHtcbiAgcmVhZG9ubHkgVVJJOiBGXG4gIC8qKlxuICAgKiBDb21wYWN0cyBhIGRhdGEgc3RydWN0dXJlIHVud3JhcHBpbmcgaW5uZXIgT3B0aW9uXG4gICAqL1xuICByZWFkb25seSBjb21wYWN0OiA8QT4oZmE6IEhLVDxGLCBPcHRpb248QT4+KSA9PiBIS1Q8RiwgQT5cbiAgLyoqXG4gICAqIFNlcGFyYXRlcyBhIGRhdGEgc3RydWN0dXJlIG1vdmluZyBpbm5lciBMZWZ0IHRvIHRoZSBsZWZ0IHNpZGUgYW5kIGlubmVyIFJpZ2h0IHRvIHRoZSByaWdodCBzaWRlIG9mIFNlcGFyYXRlZFxuICAgKi9cbiAgcmVhZG9ubHkgc2VwYXJhdGU6IDxBLCBCPihmYTogSEtUPEYsIEVpdGhlcjxBLCBCPj4pID0+IFMuU2VwYXJhdGVkPEhLVDxGLCBBPiwgSEtUPEYsIEI+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlMTxGIGV4dGVuZHMgVVJJUz4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgY29tcGFjdDogPEE+KGZhOiBLaW5kPEYsIE9wdGlvbjxBPj4pID0+IEtpbmQ8RiwgQT5cbiAgcmVhZG9ubHkgc2VwYXJhdGU6IDxBLCBCPihmYTogS2luZDxGLCBFaXRoZXI8QSwgQj4+KSA9PiBTLlNlcGFyYXRlZDxLaW5kPEYsIEE+LCBLaW5kPEYsIEI+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlMjxGIGV4dGVuZHMgVVJJUzI+IHtcbiAgcmVhZG9ubHkgVVJJOiBGXG4gIHJlYWRvbmx5IGNvbXBhY3Q6IDxFLCBBPihmYTogS2luZDI8RiwgRSwgT3B0aW9uPEE+PikgPT4gS2luZDI8RiwgRSwgQT5cbiAgcmVhZG9ubHkgc2VwYXJhdGU6IDxFLCBBLCBCPihmYTogS2luZDI8RiwgRSwgRWl0aGVyPEEsIEI+PikgPT4gUy5TZXBhcmF0ZWQ8S2luZDI8RiwgRSwgQT4sIEtpbmQyPEYsIEUsIEI+PlxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlMkM8RiBleHRlbmRzIFVSSVMyLCBFPiB7XG4gIHJlYWRvbmx5IFVSSTogRlxuICByZWFkb25seSBfRTogRVxuICByZWFkb25seSBjb21wYWN0OiA8QT4oZmE6IEtpbmQyPEYsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQyPEYsIEUsIEE+XG4gIHJlYWRvbmx5IHNlcGFyYXRlOiA8QSwgQj4oZmE6IEtpbmQyPEYsIEUsIEVpdGhlcjxBLCBCPj4pID0+IFMuU2VwYXJhdGVkPEtpbmQyPEYsIEUsIEE+LCBLaW5kMjxGLCBFLCBCPj5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0YWJsZTM8RiBleHRlbmRzIFVSSVMzPiB7XG4gIHJlYWRvbmx5IFVSSTogRlxuICByZWFkb25seSBjb21wYWN0OiA8UiwgRSwgQT4oZmE6IEtpbmQzPEYsIFIsIEUsIE9wdGlvbjxBPj4pID0+IEtpbmQzPEYsIFIsIEUsIEE+XG4gIHJlYWRvbmx5IHNlcGFyYXRlOiA8UiwgRSwgQSwgQj4oZmE6IEtpbmQzPEYsIFIsIEUsIEVpdGhlcjxBLCBCPj4pID0+IFMuU2VwYXJhdGVkPEtpbmQzPEYsIFIsIEUsIEE+LCBLaW5kMzxGLCBSLCBFLCBCPj5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4yLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0YWJsZTNDPEYgZXh0ZW5kcyBVUklTMywgRT4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgX0U6IEVcbiAgcmVhZG9ubHkgY29tcGFjdDogPFIsIEE+KGZhOiBLaW5kMzxGLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kMzxGLCBSLCBFLCBBPlxuICByZWFkb25seSBzZXBhcmF0ZTogPFIsIEEsIEI+KGZhOiBLaW5kMzxGLCBSLCBFLCBFaXRoZXI8QSwgQj4+KSA9PiBTLlNlcGFyYXRlZDxLaW5kMzxGLCBSLCBFLCBBPiwgS2luZDM8RiwgUiwgRSwgQj4+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGFjdGFibGU0PEYgZXh0ZW5kcyBVUklTND4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgY29tcGFjdDogPFMsIFIsIEUsIEE+KGZhOiBLaW5kNDxGLCBTLCBSLCBFLCBPcHRpb248QT4+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBBPlxuICByZWFkb25seSBzZXBhcmF0ZTogPFMsIFIsIEUsIEEsIEI+KFxuICAgIGZhOiBLaW5kNDxGLCBTLCBSLCBFLCBFaXRoZXI8QSwgQj4+XG4gICkgPT4gUy5TZXBhcmF0ZWQ8S2luZDQ8RiwgUywgUiwgRSwgQT4sIEtpbmQ0PEYsIFMsIFIsIEUsIEI+PlxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIGBjb21wYWN0YCBjb21wb3NpdGlvbi5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhY3Q8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMjxGPixcbiAgRzogQ29tcGFjdGFibGUyQzxHLCBFPlxuKTogPEZFLCBBPihmYTogS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIE9wdGlvbjxBPj4+KSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgQT4+XG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdDxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjE8Rj4sXG4gIEc6IENvbXBhY3RhYmxlMkM8RywgRT5cbik6IDxBPihmYTogS2luZDxGLCBLaW5kMjxHLCBFLCBPcHRpb248QT4+PikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYWN0PEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBDb21wYWN0YWJsZTE8Rz5cbik6IDxBPihmYTogS2luZDxGLCBLaW5kPEcsIE9wdGlvbjxBPj4+KSA9PiBLaW5kPEYsIEtpbmQ8RywgQT4+XG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdDxGLCBHPihGOiBGdW5jdG9yPEY+LCBHOiBDb21wYWN0YWJsZTxHPik6IDxBPihmYTogSEtUPEYsIEhLVDxHLCBPcHRpb248QT4+PikgPT4gSEtUPEYsIEhLVDxHLCBBPj5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYWN0PEYsIEc+KFxuICBGOiBGdW5jdG9yPEY+LFxuICBHOiBDb21wYWN0YWJsZTxHPlxuKTogPEE+KGZhOiBIS1Q8RiwgSEtUPEcsIE9wdGlvbjxBPj4+KSA9PiBIS1Q8RiwgSEtUPEcsIEE+PiB7XG4gIHJldHVybiAoZmdhKSA9PiBGLm1hcChmZ2EsIEcuY29tcGFjdClcbn1cblxuLyoqXG4gKiBgc2VwYXJhdGVgIGNvbXBvc2l0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGU8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGdW5jdG9yMjxGPixcbiAgQzogQ29tcGFjdGFibGUyQzxHLCBFPixcbiAgRzogRnVuY3RvcjI8Rz5cbik6IDxGRSwgQSwgQj4oXG4gIGZnZTogS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEVpdGhlcjxBLCBCPj4+XG4pID0+IFMuU2VwYXJhdGVkPEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj4sIEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBCPj4+XG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGU8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBDOiBDb21wYWN0YWJsZTJDPEcsIEU+LFxuICBHOiBGdW5jdG9yMjxHPlxuKTogPEEsIEI+KGZnZTogS2luZDxGLCBLaW5kMjxHLCBFLCBFaXRoZXI8QSwgQj4+PikgPT4gUy5TZXBhcmF0ZWQ8S2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sIEtpbmQ8RiwgS2luZDI8RywgRSwgQj4+PlxuZXhwb3J0IGZ1bmN0aW9uIHNlcGFyYXRlPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBDOiBDb21wYWN0YWJsZTE8Rz4sXG4gIEc6IEZ1bmN0b3IxPEc+XG4pOiA8QSwgQj4oZmdlOiBLaW5kPEYsIEtpbmQ8RywgRWl0aGVyPEEsIEI+Pj4pID0+IFMuU2VwYXJhdGVkPEtpbmQ8RiwgS2luZDxHLCBBPj4sIEtpbmQ8RiwgS2luZDxHLCBCPj4+XG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGU8RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEM6IENvbXBhY3RhYmxlPEc+LFxuICBHOiBGdW5jdG9yPEc+XG4pOiA8QSwgQj4oZmdlOiBIS1Q8RiwgSEtUPEcsIEVpdGhlcjxBLCBCPj4+KSA9PiBTLlNlcGFyYXRlZDxIS1Q8RiwgSEtUPEcsIEE+PiwgSEtUPEYsIEhLVDxHLCBCPj4+XG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGU8RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEM6IENvbXBhY3RhYmxlPEc+LFxuICBHOiBGdW5jdG9yPEc+XG4pOiA8QSwgQj4oZmdlOiBIS1Q8RiwgSEtUPEcsIEVpdGhlcjxBLCBCPj4+KSA9PiBTLlNlcGFyYXRlZDxIS1Q8RiwgSEtUPEcsIEE+PiwgSEtUPEYsIEhLVDxHLCBCPj4+IHtcbiAgY29uc3QgX2NvbXBhY3QgPSBjb21wYWN0KEYsIEMpXG4gIGNvbnN0IF9tYXAgPSBtYXAoRiwgRylcbiAgcmV0dXJuIChmZ2UpID0+IFMuc2VwYXJhdGVkKF9jb21wYWN0KHBpcGUoZmdlLCBfbWFwKGdldExlZnQpKSksIF9jb21wYWN0KHBpcGUoZmdlLCBfbWFwKGdldFJpZ2h0KSkpKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIHRzbGludDpkaXNhYmxlOiBkZXByZWNhdGlvblxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiwgRz4gZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb248RiwgRz4ge1xuICByZWFkb25seSBjb21wYWN0OiA8QT4oZmdhOiBIS1Q8RiwgSEtUPEcsIE9wdGlvbjxBPj4+KSA9PiBIS1Q8RiwgSEtUPEcsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEEsIEI+KGZnZTogSEtUPEYsIEhLVDxHLCBFaXRoZXI8QSwgQj4+PikgPT4gU2VwYXJhdGVkPEhLVDxGLCBIS1Q8RywgQT4+LCBIS1Q8RiwgSEtUPEcsIEI+Pj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMTE8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTPiBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjExPEYsIEc+IHtcbiAgcmVhZG9ubHkgY29tcGFjdDogPEE+KGZnYTogS2luZDxGLCBLaW5kPEcsIE9wdGlvbjxBPj4+KSA9PiBLaW5kPEYsIEtpbmQ8RywgQT4+XG4gIHJlYWRvbmx5IHNlcGFyYXRlOiA8QSwgQj4oZmdlOiBLaW5kPEYsIEtpbmQ8RywgRWl0aGVyPEEsIEI+Pj4pID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQ8RywgQT4+LCBLaW5kPEYsIEtpbmQ8RywgQj4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlQ29tcG9zaXRpb24xMjxGIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVMyPiBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjEyPEYsIEc+IHtcbiAgcmVhZG9ubHkgY29tcGFjdDogPEUsIEE+KGZnYTogS2luZDxGLCBLaW5kMjxHLCBFLCBPcHRpb248QT4+PikgPT4gS2luZDxGLCBLaW5kMjxHLCBFLCBBPj5cbiAgcmVhZG9ubHkgc2VwYXJhdGU6IDxFLCBBLCBCPihcbiAgICBmZ2U6IEtpbmQ8RiwgS2luZDI8RywgRSwgRWl0aGVyPEEsIEI+Pj5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDxGLCBLaW5kMjxHLCBFLCBBPj4sIEtpbmQ8RiwgS2luZDI8RywgRSwgQj4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlQ29tcG9zaXRpb24xMkM8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMiwgRT4gZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb24xMkM8RiwgRywgRT4ge1xuICByZWFkb25seSBjb21wYWN0OiA8QT4oZmdhOiBLaW5kPEYsIEtpbmQyPEcsIEUsIE9wdGlvbjxBPj4+KSA9PiBLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEEsIEI+KFxuICAgIGZnZTogS2luZDxGLCBLaW5kMjxHLCBFLCBFaXRoZXI8QSwgQj4+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kPEYsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDxGLCBLaW5kMjxHLCBFLCBCPj4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGFjdGFibGVDb21wb3NpdGlvbjIxPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVM+IGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMjE8RiwgRz4ge1xuICByZWFkb25seSBjb21wYWN0OiA8RkUsIEE+KGZnYTogS2luZDI8RiwgRkUsIEtpbmQ8RywgT3B0aW9uPEE+Pj4pID0+IEtpbmQyPEYsIEZFLCBLaW5kPEcsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEZFLCBBLCBCPihcbiAgICBmZ2U6IEtpbmQyPEYsIEZFLCBLaW5kPEcsIEVpdGhlcjxBLCBCPj4+XG4gICkgPT4gU2VwYXJhdGVkPEtpbmQyPEYsIEZFLCBLaW5kPEcsIEE+PiwgS2luZDI8RiwgRkUsIEtpbmQ8RywgQj4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlQ29tcG9zaXRpb24yQzE8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUywgRT4gZXh0ZW5kcyBGdW5jdG9yQ29tcG9zaXRpb24yQzE8RiwgRywgRT4ge1xuICByZWFkb25seSBjb21wYWN0OiA8QT4oZmdhOiBLaW5kMjxGLCBFLCBLaW5kPEcsIE9wdGlvbjxBPj4+KSA9PiBLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEEsIEI+KFxuICAgIGZnZTogS2luZDI8RiwgRSwgS2luZDxHLCBFaXRoZXI8QSwgQj4+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBFLCBLaW5kPEcsIEE+PiwgS2luZDI8RiwgRSwgS2luZDxHLCBCPj4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGFjdGFibGVDb21wb3NpdGlvbjIyPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMyPiBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjIyPEYsIEc+IHtcbiAgcmVhZG9ubHkgY29tcGFjdDogPEZFLCBHRSwgQT4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIE9wdGlvbjxBPj4+KSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEZFLCBHRSwgQSwgQj4oXG4gICAgZmdlOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEVpdGhlcjxBLCBCPj4+XG4gICkgPT4gU2VwYXJhdGVkPEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBHRSwgQT4+LCBLaW5kMjxGLCBGRSwgS2luZDI8RywgR0UsIEI+Pj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjJDPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMyLCBFPiBleHRlbmRzIEZ1bmN0b3JDb21wb3NpdGlvbjIyQzxGLCBHLCBFPiB7XG4gIHJlYWRvbmx5IGNvbXBhY3Q6IDxGRSwgQT4oZmdhOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgT3B0aW9uPEE+Pj4pID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxHLCBFLCBBPj5cbiAgcmVhZG9ubHkgc2VwYXJhdGU6IDxGRSwgQSwgQj4oXG4gICAgZmdlOiBLaW5kMjxGLCBGRSwgS2luZDI8RywgRSwgRWl0aGVyPEEsIEI+Pj5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEE+PiwgS2luZDI8RiwgRkUsIEtpbmQyPEcsIEUsIEI+Pj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4yLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjM8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzM+IGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMjM8RiwgRz4ge1xuICByZWFkb25seSBjb21wYWN0OiA8UiwgRkUsIEdFLCBBPihmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBHRSwgT3B0aW9uPEE+Pj4pID0+IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBHRSwgQT4+XG4gIHJlYWRvbmx5IHNlcGFyYXRlOiA8UiwgRkUsIEdFLCBBLCBCPihcbiAgICBmZ2U6IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBHRSwgRWl0aGVyPEEsIEI+Pj5cbiAgKSA9PiBTZXBhcmF0ZWQ8S2luZDI8RiwgRkUsIEtpbmQzPEcsIFIsIEdFLCBBPj4sIEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBHRSwgQj4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjIuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RhYmxlQ29tcG9zaXRpb24yM0M8RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzMsIEU+IGV4dGVuZHMgRnVuY3RvckNvbXBvc2l0aW9uMjNDPEYsIEcsIEU+IHtcbiAgcmVhZG9ubHkgY29tcGFjdDogPEZFLCBSLCBBPihmZ2E6IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBPcHRpb248QT4+PikgPT4gS2luZDI8RiwgRkUsIEtpbmQzPEcsIFIsIEUsIEE+PlxuICByZWFkb25seSBzZXBhcmF0ZTogPEZFLCBSLCBBLCBCPihcbiAgICBmZ2U6IEtpbmQyPEYsIEZFLCBLaW5kMzxHLCBSLCBFLCBFaXRoZXI8QSwgQj4+PlxuICApID0+IFNlcGFyYXRlZDxLaW5kMjxGLCBGRSwgS2luZDM8RywgUiwgRSwgQT4+LCBLaW5kMjxGLCBGRSwgS2luZDM8RywgUiwgRSwgQj4+PlxufVxuXG4vKipcbiAqIFVzZSBbYGNvbXBhY3RgXSgjY29tcGFjdCkgYW5kIFtgc2VwYXJhdGVgXSgjc2VwYXJhdGUpIGluc3RlYWQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcGFjdGFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTMywgRT4oXG4gIEY6IEZ1bmN0b3IyPEY+LFxuICBHOiBDb21wYWN0YWJsZTNDPEcsIEU+ICYgRnVuY3RvcjNDPEcsIEU+XG4pOiBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjNDPEYsIEcsIEU+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wYWN0YWJsZUNvbXBvc2l0aW9uPEYgZXh0ZW5kcyBVUklTMiwgRyBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnVuY3RvcjI8Rj4sXG4gIEc6IENvbXBhY3RhYmxlMkM8RywgRT4gJiBGdW5jdG9yMkM8RywgRT5cbik6IENvbXBhY3RhYmxlQ29tcG9zaXRpb24yMkM8RiwgRywgRT5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMyLCBHIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGdW5jdG9yMjxGPixcbiAgRzogQ29tcGFjdGFibGUyPEc+ICYgRnVuY3RvcjI8Rz5cbik6IENvbXBhY3RhYmxlQ29tcG9zaXRpb24yMjxGLCBHPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcGFjdGFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTLCBFPihcbiAgRjogRnVuY3RvcjJDPEYsIEU+LFxuICBHOiBDb21wYWN0YWJsZTE8Rz4gJiBGdW5jdG9yMTxHPlxuKTogQ29tcGFjdGFibGVDb21wb3NpdGlvbjJDMTxGLCBHLCBFPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcGFjdGFibGVDb21wb3NpdGlvbjxGIGV4dGVuZHMgVVJJUzIsIEcgZXh0ZW5kcyBVUklTPihcbiAgRjogRnVuY3RvcjI8Rj4sXG4gIEc6IENvbXBhY3RhYmxlMTxHPiAmIEZ1bmN0b3IxPEc+XG4pOiBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMjE8RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBDb21wYWN0YWJsZTJDPEcsIEU+ICYgRnVuY3RvcjJDPEcsIEU+XG4pOiBDb21wYWN0YWJsZUNvbXBvc2l0aW9uMTI8RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBDb21wYWN0YWJsZTI8Rz4gJiBGdW5jdG9yMjxHPlxuKTogQ29tcGFjdGFibGVDb21wb3NpdGlvbjEyPEYsIEc+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wYWN0YWJsZUNvbXBvc2l0aW9uPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZ1bmN0b3IxPEY+LFxuICBHOiBDb21wYWN0YWJsZTE8Rz4gJiBGdW5jdG9yMTxHPlxuKTogQ29tcGFjdGFibGVDb21wb3NpdGlvbjExPEYsIEc+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wYWN0YWJsZUNvbXBvc2l0aW9uPEYsIEc+KFxuICBGOiBGdW5jdG9yPEY+LFxuICBHOiBDb21wYWN0YWJsZTxHPiAmIEZ1bmN0b3I8Rz5cbik6IENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiwgRz5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBhY3RhYmxlQ29tcG9zaXRpb248RiwgRz4oXG4gIEY6IEZ1bmN0b3I8Rj4sXG4gIEc6IENvbXBhY3RhYmxlPEc+ICYgRnVuY3RvcjxHPlxuKTogQ29tcGFjdGFibGVDb21wb3NpdGlvbjxGLCBHPiB7XG4gIGNvbnN0IG1hcCA9IGdldEZ1bmN0b3JDb21wb3NpdGlvbihGLCBHKS5tYXBcbiAgcmV0dXJuIHtcbiAgICBtYXAsXG4gICAgY29tcGFjdDogY29tcGFjdChGLCBHKSxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUoRiwgRywgRylcbiAgfVxufVxuXG4vKipcbiAqIFVzZSBbYFNlcGFyYXRlZGBdKC4vU2VwYXJhdGVkLnRzLmh0bWwjc2VwYXJhdGVkKSBpbnN0ZWFkLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXBhcmF0ZWQ8QSwgQj4ge1xuICByZWFkb25seSBsZWZ0OiBBXG4gIHJlYWRvbmx5IHJpZ2h0OiBCXG59XG4iXX0=