"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.chainEitherK = chainEitherK;
exports.chainOptionK = chainOptionK;
exports.filterOrElse = filterOrElse;
exports.fromEitherK = fromEitherK;
exports.fromOption = fromOption;
exports.fromOptionK = fromOptionK;
exports.fromPredicate = fromPredicate;

var _function = require("./function");

var _ = _interopRequireWildcard(require("./internal"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * The `FromEither` type class represents those data types which support errors.
 *
 * @since 2.10.0
 */
function fromOption(F) {
  return function (onNone) {
    return function (ma) {
      return F.fromEither(_.isNone(ma) ? _.left(onNone()) : _.right(ma.value));
    };
  };
}
/**
 * @category constructors
 * @since 2.10.0
 */


function fromPredicate(F) {
  return function (predicate, onFalse) {
    return function (a) {
      return F.fromEither(predicate(a) ? _.right(a) : _.left(onFalse(a)));
    };
  };
} // -------------------------------------------------------------------------------------
// combinators
// -------------------------------------------------------------------------------------

/**
 * @category combinators
 * @since 2.10.0
 */


function fromOptionK(F) {
  var fromOptionF = fromOption(F);
  return function (onNone) {
    var from = fromOptionF(onNone);
    return function (f) {
      return (0, _function.flow)(f, from);
    };
  };
}
/**
 * @category combinators
 * @since 2.10.0
 */


function chainOptionK(F, M) {
  var fromOptionKF = fromOptionK(F);
  return function (onNone) {
    var from = fromOptionKF(onNone);
    return function (f) {
      return function (ma) {
        return M.chain(ma, from(f));
      };
    };
  };
}
/**
 * @category combinators
 * @since 2.10.0
 */


function fromEitherK(F) {
  return function (f) {
    return (0, _function.flow)(f, F.fromEither);
  };
}
/**
 * @category combinators
 * @since 2.10.0
 */


function chainEitherK(F, M) {
  var fromEitherKF = fromEitherK(F);
  return function (f) {
    return function (ma) {
      return M.chain(ma, fromEitherKF(f));
    };
  };
}
/**
 * @category combinators
 * @since 2.10.0
 */


function filterOrElse(F, M) {
  return function (predicate, onFalse) {
    return function (ma) {
      return M.chain(ma, function (a) {
        return F.fromEither(predicate(a) ? _.right(a) : _.left(onFalse(a)));
      });
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9Gcm9tRWl0aGVyLnRzIl0sIm5hbWVzIjpbImZyb21PcHRpb24iLCJGIiwib25Ob25lIiwibWEiLCJmcm9tRWl0aGVyIiwiXyIsImlzTm9uZSIsImxlZnQiLCJyaWdodCIsInZhbHVlIiwiZnJvbVByZWRpY2F0ZSIsInByZWRpY2F0ZSIsIm9uRmFsc2UiLCJhIiwiZnJvbU9wdGlvbksiLCJmcm9tT3B0aW9uRiIsImZyb20iLCJmIiwiY2hhaW5PcHRpb25LIiwiTSIsImZyb21PcHRpb25LRiIsImNoYWluIiwiZnJvbUVpdGhlcksiLCJjaGFpbkVpdGhlcksiLCJmcm9tRWl0aGVyS0YiLCJmaWx0ZXJPckVsc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQVFBOztBQUVBOzs7Ozs7QUFWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbUhPLFNBQVNBLFVBQVQsQ0FBdUJDLENBQXZCLEVBQXNHO0FBQzNHLFNBQU8sVUFBQ0MsTUFBRDtBQUFBLFdBQVksVUFBQ0MsRUFBRDtBQUFBLGFBQVFGLENBQUMsQ0FBQ0csVUFBRixDQUFhQyxDQUFDLENBQUNDLE1BQUYsQ0FBU0gsRUFBVCxJQUFlRSxDQUFDLENBQUNFLElBQUYsQ0FBT0wsTUFBTSxFQUFiLENBQWYsR0FBa0NHLENBQUMsQ0FBQ0csS0FBRixDQUFRTCxFQUFFLENBQUNNLEtBQVgsQ0FBL0MsQ0FBUjtBQUFBLEtBQVo7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7O0FBMkNPLFNBQVNDLGFBQVQsQ0FDTFQsQ0FESyxFQU1MO0FBQ0EsU0FBTyxVQUFPVSxTQUFQLEVBQWdDQyxPQUFoQztBQUFBLFdBQXlELFVBQUNDLENBQUQ7QUFBQSxhQUM5RFosQ0FBQyxDQUFDRyxVQUFGLENBQWFPLFNBQVMsQ0FBQ0UsQ0FBRCxDQUFULEdBQWVSLENBQUMsQ0FBQ0csS0FBRixDQUFRSyxDQUFSLENBQWYsR0FBNEJSLENBQUMsQ0FBQ0UsSUFBRixDQUFPSyxPQUFPLENBQUNDLENBQUQsQ0FBZCxDQUF6QyxDQUQ4RDtBQUFBLEtBQXpEO0FBQUEsR0FBUDtBQUVELEMsQ0FFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQTZCTyxTQUFTQyxXQUFULENBQ0xiLENBREssRUFJNkY7QUFDbEcsTUFBTWMsV0FBVyxHQUFHZixVQUFVLENBQUNDLENBQUQsQ0FBOUI7QUFDQSxTQUFPLFVBQUNDLE1BQUQsRUFBWTtBQUNqQixRQUFNYyxJQUFJLEdBQUdELFdBQVcsQ0FBQ2IsTUFBRCxDQUF4QjtBQUNBLFdBQU8sVUFBQ2UsQ0FBRDtBQUFBLGFBQU8sb0JBQUtBLENBQUwsRUFBUUQsSUFBUixDQUFQO0FBQUEsS0FBUDtBQUNELEdBSEQ7QUFJRDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUF5Qk8sU0FBU0UsWUFBVCxDQUNMakIsQ0FESyxFQUVMa0IsQ0FGSyxFQUc2RjtBQUNsRyxNQUFNQyxZQUFZLEdBQUdOLFdBQVcsQ0FBQ2IsQ0FBRCxDQUFoQztBQUNBLFNBQU8sVUFBQ0MsTUFBRCxFQUFZO0FBQ2pCLFFBQU1jLElBQUksR0FBR0ksWUFBWSxDQUFDbEIsTUFBRCxDQUF6QjtBQUNBLFdBQU8sVUFBQ2UsQ0FBRDtBQUFBLGFBQU8sVUFBQ2QsRUFBRDtBQUFBLGVBQVFnQixDQUFDLENBQUNFLEtBQUYsQ0FBUWxCLEVBQVIsRUFBWWEsSUFBSSxDQUFDQyxDQUFELENBQWhCLENBQVI7QUFBQSxPQUFQO0FBQUEsS0FBUDtBQUNELEdBSEQ7QUFJRDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFzQk8sU0FBU0ssV0FBVCxDQUNMckIsQ0FESyxFQUVpRztBQUN0RyxTQUFPLFVBQUNnQixDQUFEO0FBQUEsV0FBTyxvQkFBS0EsQ0FBTCxFQUFRaEIsQ0FBQyxDQUFDRyxVQUFWLENBQVA7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7O0FBNkJPLFNBQVNtQixZQUFULENBQ0x0QixDQURLLEVBRUxrQixDQUZLLEVBRzJFO0FBQ2hGLE1BQU1LLFlBQVksR0FBR0YsV0FBVyxDQUFDckIsQ0FBRCxDQUFoQztBQUNBLFNBQU8sVUFBQ2dCLENBQUQ7QUFBQSxXQUFPLFVBQUNkLEVBQUQ7QUFBQSxhQUFRZ0IsQ0FBQyxDQUFDRSxLQUFGLENBQVFsQixFQUFSLEVBQVlxQixZQUFZLENBQUNQLENBQUQsQ0FBeEIsQ0FBUjtBQUFBLEtBQVA7QUFBQSxHQUFQO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7O0FBdURPLFNBQVNRLFlBQVQsQ0FDTHhCLENBREssRUFFTGtCLENBRkssRUFPTDtBQUNBLFNBQU8sVUFBT1IsU0FBUCxFQUFnQ0MsT0FBaEM7QUFBQSxXQUF5RCxVQUFDVCxFQUFEO0FBQUEsYUFDOURnQixDQUFDLENBQUNFLEtBQUYsQ0FBUWxCLEVBQVIsRUFBWSxVQUFDVSxDQUFEO0FBQUEsZUFBT1osQ0FBQyxDQUFDRyxVQUFGLENBQWFPLFNBQVMsQ0FBQ0UsQ0FBRCxDQUFULEdBQWVSLENBQUMsQ0FBQ0csS0FBRixDQUFRSyxDQUFSLENBQWYsR0FBNEJSLENBQUMsQ0FBQ0UsSUFBRixDQUFPSyxPQUFPLENBQUNDLENBQUQsQ0FBZCxDQUF6QyxDQUFQO0FBQUEsT0FBWixDQUQ4RDtBQUFBLEtBQXpEO0FBQUEsR0FBUDtBQUVEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgYEZyb21FaXRoZXJgIHR5cGUgY2xhc3MgcmVwcmVzZW50cyB0aG9zZSBkYXRhIHR5cGVzIHdoaWNoIHN1cHBvcnQgZXJyb3JzLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuXG5pbXBvcnQgeyBDaGFpbiwgQ2hhaW4xLCBDaGFpbjIsIENoYWluMkMsIENoYWluMywgQ2hhaW4zQywgQ2hhaW40IH0gZnJvbSAnLi9DaGFpbidcbmltcG9ydCB7IEVpdGhlciwgVVJJIGFzIEVVUkkgfSBmcm9tICcuL0VpdGhlcidcbmltcG9ydCB7IGZsb3csIExhenkgfSBmcm9tICcuL2Z1bmN0aW9uJ1xuaW1wb3J0IHsgSEtUMiwgS2luZCwgS2luZDIsIEtpbmQzLCBLaW5kNCwgVVJJUywgVVJJUzIsIFVSSVMzLCBVUklTNCB9IGZyb20gJy4vSEtUJ1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJ1xuaW1wb3J0IHtcbiAgTmF0dXJhbFRyYW5zZm9ybWF0aW9uMTJDLFxuICBOYXR1cmFsVHJhbnNmb3JtYXRpb24xM0MsXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjE0QyxcbiAgTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjEsXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjIyLFxuICBOYXR1cmFsVHJhbnNmb3JtYXRpb24yMkMsXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjIzLFxuICBOYXR1cmFsVHJhbnNmb3JtYXRpb24yM0MsXG4gIE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjI0XG59IGZyb20gJy4vTmF0dXJhbFRyYW5zZm9ybWF0aW9uJ1xuaW1wb3J0IHsgT3B0aW9uLCBVUkkgYXMgT1VSSSB9IGZyb20gJy4vT3B0aW9uJ1xuaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnLi9QcmVkaWNhdGUnXG5pbXBvcnQgeyBSZWZpbmVtZW50IH0gZnJvbSAnLi9SZWZpbmVtZW50J1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBtb2RlbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGNsYXNzZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGcm9tRWl0aGVyPEY+IHtcbiAgcmVhZG9ubHkgVVJJOiBGXG4gIHJlYWRvbmx5IGZyb21FaXRoZXI6IDxFLCBBPihlOiBFaXRoZXI8RSwgQT4pID0+IEhLVDI8RiwgRSwgQT5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRnJvbUVpdGhlcjE8RiBleHRlbmRzIFVSSVM+IHtcbiAgcmVhZG9ubHkgVVJJOiBGXG4gIHJlYWRvbmx5IGZyb21FaXRoZXI6IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjIxPEVVUkksIEY+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZyb21FaXRoZXIyPEYgZXh0ZW5kcyBVUklTMj4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgZnJvbUVpdGhlcjogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjI8RVVSSSwgRj5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRnJvbUVpdGhlcjJDPEYgZXh0ZW5kcyBVUklTMiwgRT4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgX0U6IEVcbiAgcmVhZG9ubHkgZnJvbUVpdGhlcjogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjJDPEVVUkksIEYsIEU+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZyb21FaXRoZXIzPEYgZXh0ZW5kcyBVUklTMz4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgZnJvbUVpdGhlcjogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjM8RVVSSSwgRj5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRnJvbUVpdGhlcjNDPEYgZXh0ZW5kcyBVUklTMywgRT4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgX0U6IEVcbiAgcmVhZG9ubHkgZnJvbUVpdGhlcjogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjNDPEVVUkksIEYsIEU+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZyb21FaXRoZXI0PEYgZXh0ZW5kcyBVUklTND4ge1xuICByZWFkb25seSBVUkk6IEZcbiAgcmVhZG9ubHkgZnJvbUVpdGhlcjogTmF0dXJhbFRyYW5zZm9ybWF0aW9uMjQ8RVVSSSwgRj5cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbjxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBGcm9tRWl0aGVyNDxGPlxuKTogPEU+KG9uTm9uZTogTGF6eTxFPikgPT4gTmF0dXJhbFRyYW5zZm9ybWF0aW9uMTRDPE9VUkksIEYsIEU+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbjxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGcm9tRWl0aGVyMzxGPlxuKTogPEU+KG9uTm9uZTogTGF6eTxFPikgPT4gTmF0dXJhbFRyYW5zZm9ybWF0aW9uMTNDPE9VUkksIEYsIEU+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbjxGIGV4dGVuZHMgVVJJUzMsIEU+KFxuICBGOiBGcm9tRWl0aGVyM0M8RiwgRT5cbik6IChvbk5vbmU6IExhenk8RT4pID0+IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjEzQzxPVVJJLCBGLCBFPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb248RiBleHRlbmRzIFVSSVMyPihcbiAgRjogRnJvbUVpdGhlcjI8Rj5cbik6IDxFPihvbk5vbmU6IExhenk8RT4pID0+IE5hdHVyYWxUcmFuc2Zvcm1hdGlvbjEyQzxPVVJJLCBGLCBFPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb248RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnJvbUVpdGhlcjJDPEYsIEU+XG4pOiAob25Ob25lOiBMYXp5PEU+KSA9PiBOYXR1cmFsVHJhbnNmb3JtYXRpb24xMkM8T1VSSSwgRiwgRT5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uPEY+KEY6IEZyb21FaXRoZXI8Rj4pOiA8RT4ob25Ob25lOiBMYXp5PEU+KSA9PiA8QT4obWE6IE9wdGlvbjxBPikgPT4gSEtUMjxGLCBFLCBBPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb248Rj4oRjogRnJvbUVpdGhlcjxGPik6IDxFPihvbk5vbmU6IExhenk8RT4pID0+IDxBPihtYTogT3B0aW9uPEE+KSA9PiBIS1QyPEYsIEUsIEE+IHtcbiAgcmV0dXJuIChvbk5vbmUpID0+IChtYSkgPT4gRi5mcm9tRWl0aGVyKF8uaXNOb25lKG1hKSA/IF8ubGVmdChvbk5vbmUoKSkgOiBfLnJpZ2h0KG1hLnZhbHVlKSlcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlPEYgZXh0ZW5kcyBVUklTND4oXG4gIEY6IEZyb21FaXRoZXI0PEY+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8UywgUj4oYTogQSkgPT4gS2luZDQ8RiwgUywgUiwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxTLCBSLCBCIGV4dGVuZHMgQT4oYjogQikgPT4gS2luZDQ8RiwgUywgUiwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxTLCBSPihhOiBBKSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGU8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnJvbUVpdGhlcjM8Rj5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBLCBFPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxSPihhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFIsIEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFI+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIEE+XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGIGV4dGVuZHMgVVJJUzMsIEU+KFxuICBGOiBGcm9tRWl0aGVyM0M8RiwgRT5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxSPihhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFIsIEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFI+KGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIEE+XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZTxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGcm9tRWl0aGVyMjxGPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEEsIEU+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogKGE6IEEpID0+IEtpbmQyPEYsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8QiBleHRlbmRzIEE+KGI6IEIpID0+IEtpbmQyPEYsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAoYTogQSkgPT4gS2luZDI8RiwgRSwgQT5cbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlPEYgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZyb21FaXRoZXIyQzxGLCBFPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEE+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogKGE6IEEpID0+IEtpbmQyPEYsIEUsIEI+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8QiBleHRlbmRzIEE+KGI6IEIpID0+IEtpbmQyPEYsIEUsIEI+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAoYTogQSkgPT4gS2luZDI8RiwgRSwgQT5cbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlPEY+KFxuICBGOiBGcm9tRWl0aGVyPEY+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAoYTogQSkgPT4gSEtUMjxGLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPEIgZXh0ZW5kcyBBPihiOiBCKSA9PiBIS1QyPEYsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAoYTogQSkgPT4gSEtUMjxGLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGU8Rj4oXG4gIEY6IEZyb21FaXRoZXI8Rj5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBLCBFPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IChhOiBBKSA9PiBIS1QyPEYsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8QiBleHRlbmRzIEE+KGI6IEIpID0+IEhLVDI8RiwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IChhOiBBKSA9PiBIS1QyPEYsIEUsIEE+XG59IHtcbiAgcmV0dXJuIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpID0+IChhOiBBKSA9PlxuICAgIEYuZnJvbUVpdGhlcihwcmVkaWNhdGUoYSkgPyBfLnJpZ2h0KGEpIDogXy5sZWZ0KG9uRmFsc2UoYSkpKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVM0PihcbiAgRjogRnJvbUVpdGhlcjQ8Rj5cbik6IDxFPihcbiAgb25Ob25lOiBMYXp5PEU+XG4pID0+IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IE9wdGlvbjxCPikgPT4gPFMsIFI+KC4uLmE6IEEpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVMzPihcbiAgRjogRnJvbUVpdGhlcjM8Rj5cbik6IDxFPihcbiAgb25Ob25lOiBMYXp5PEU+XG4pID0+IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IE9wdGlvbjxCPikgPT4gPFI+KC4uLmE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gZnJvbU9wdGlvbks8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnJvbUVpdGhlcjNDPEYsIEU+XG4pOiAoXG4gIG9uTm9uZTogTGF6eTxFPlxuKSA9PiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj4pID0+IDxSPiguLi5hOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb25LPEYgZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZyb21FaXRoZXIyPEY+XG4pOiA8RT4oXG4gIG9uTm9uZTogTGF6eTxFPlxuKSA9PiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj4pID0+ICguLi5hOiBBKSA9PiBLaW5kMjxGLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb25LPEYgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZyb21FaXRoZXIyQzxGLCBFPlxuKTogKG9uTm9uZTogTGF6eTxFPikgPT4gPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihmOiAoLi4uYTogQSkgPT4gT3B0aW9uPEI+KSA9PiAoLi4uYTogQSkgPT4gS2luZDI8RiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uSzxGPihcbiAgRjogRnJvbUVpdGhlcjxGPlxuKTogPEU+KFxuICBvbk5vbmU6IExhenk8RT5cbikgPT4gPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBCPihmOiAoLi4uYTogQSkgPT4gT3B0aW9uPEI+KSA9PiAoLi4uYTogQSkgPT4gSEtUMjxGLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PcHRpb25LPEY+KFxuICBGOiBGcm9tRWl0aGVyPEY+XG4pOiA8RT4oXG4gIG9uTm9uZTogTGF6eTxFPlxuKSA9PiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBPcHRpb248Qj4pID0+ICguLi5hOiBBKSA9PiBIS1QyPEYsIEUsIEI+IHtcbiAgY29uc3QgZnJvbU9wdGlvbkYgPSBmcm9tT3B0aW9uKEYpXG4gIHJldHVybiAob25Ob25lKSA9PiB7XG4gICAgY29uc3QgZnJvbSA9IGZyb21PcHRpb25GKG9uTm9uZSlcbiAgICByZXR1cm4gKGYpID0+IGZsb3coZiwgZnJvbSlcbiAgfVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhaW5PcHRpb25LPEYgZXh0ZW5kcyBVUklTND4oXG4gIEY6IEZyb21FaXRoZXI0PEY+LFxuICBNOiBDaGFpbjQ8Rj5cbik6IDxFPihvbk5vbmU6IExhenk8RT4pID0+IDxBLCBCPihmOiAoYTogQSkgPT4gT3B0aW9uPEI+KSA9PiA8UywgUj4obWE6IEtpbmQ0PEYsIFMsIFIsIEUsIEE+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSzxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGcm9tRWl0aGVyMzxGPixcbiAgTTogQ2hhaW4zPEY+XG4pOiA8RT4ob25Ob25lOiBMYXp5PEU+KSA9PiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gPFI+KG1hOiBLaW5kMzxGLCBSLCBFLCBBPikgPT4gS2luZDM8RiwgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8RiBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnJvbUVpdGhlcjNDPEYsIEU+LFxuICBNOiBDaGFpbjNDPEYsIEU+XG4pOiAob25Ob25lOiBMYXp5PEU+KSA9PiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gPFI+KG1hOiBLaW5kMzxGLCBSLCBFLCBBPikgPT4gS2luZDM8RiwgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdGlvbks8RiBleHRlbmRzIFVSSVMyPihcbiAgRjogRnJvbUVpdGhlcjI8Rj4sXG4gIE06IENoYWluMjxGPlxuKTogPEU+KG9uTm9uZTogTGF6eTxFPikgPT4gPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChtYTogS2luZDI8RiwgRSwgQT4pID0+IEtpbmQyPEYsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5PcHRpb25LPEYgZXh0ZW5kcyBVUklTMiwgRT4oXG4gIEY6IEZyb21FaXRoZXIyQzxGLCBFPixcbiAgTTogQ2hhaW4yQzxGLCBFPlxuKTogKG9uTm9uZTogTGF6eTxFPikgPT4gPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChtYTogS2luZDI8RiwgRSwgQT4pID0+IEtpbmQyPEYsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5PcHRpb25LPEY+KFxuICBGOiBGcm9tRWl0aGVyPEY+LFxuICBNOiBDaGFpbjxGPlxuKTogPEU+KG9uTm9uZTogTGF6eTxFPikgPT4gPEEsIEI+KGY6IChhOiBBKSA9PiBPcHRpb248Qj4pID0+IChtYTogSEtUMjxGLCBFLCBBPikgPT4gSEtUMjxGLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSzxGIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGcm9tRWl0aGVyMjxGPixcbiAgTTogQ2hhaW4yPEY+XG4pOiA8RT4ob25Ob25lOiBMYXp5PEU+KSA9PiA8QSwgQj4oZjogKGE6IEEpID0+IE9wdGlvbjxCPikgPT4gKG1hOiBLaW5kMjxGLCBFLCBBPikgPT4gS2luZDI8RiwgRSwgQj4ge1xuICBjb25zdCBmcm9tT3B0aW9uS0YgPSBmcm9tT3B0aW9uSyhGKVxuICByZXR1cm4gKG9uTm9uZSkgPT4ge1xuICAgIGNvbnN0IGZyb20gPSBmcm9tT3B0aW9uS0Yob25Ob25lKVxuICAgIHJldHVybiAoZikgPT4gKG1hKSA9PiBNLmNoYWluKG1hLCBmcm9tKGYpKVxuICB9XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVySzxGIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBGcm9tRWl0aGVyNDxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBFLCBCPihmOiAoLi4uYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiA8UywgUj4oLi4uYTogQSkgPT4gS2luZDQ8RiwgUywgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVySzxGIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGcm9tRWl0aGVyMzxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBFLCBCPihmOiAoLi4uYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiA8Uj4oLi4uYTogQSkgPT4gS2luZDM8RiwgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVySzxGIGV4dGVuZHMgVVJJUzMsIEU+KFxuICBGOiBGcm9tRWl0aGVyM0M8RiwgRT5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IEVpdGhlcjxFLCBCPikgPT4gPFI+KC4uLmE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcks8RiBleHRlbmRzIFVSSVMyPihcbiAgRjogRnJvbUVpdGhlcjI8Rj5cbik6IDxBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgRSwgQj4oZjogKC4uLmE6IEEpID0+IEVpdGhlcjxFLCBCPikgPT4gKC4uLmE6IEEpID0+IEtpbmQyPEYsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVpdGhlcks8RiBleHRlbmRzIFVSSVMyLCBFPihcbiAgRjogRnJvbUVpdGhlcjJDPEYsIEU+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEI+KGY6ICguLi5hOiBBKSA9PiBFaXRoZXI8RSwgQj4pID0+ICguLi5hOiBBKSA9PiBLaW5kMjxGLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXJLPEYgZXh0ZW5kcyBVUklTPihcbiAgRjogRnJvbUVpdGhlcjE8Rj5cbik6IDxFLCBBIGV4dGVuZHMgUmVhZG9ubHlBcnJheTx1bmtub3duPiwgQj4oZjogKC4uLmE6IEEpID0+IEVpdGhlcjxFLCBCPikgPT4gKC4uLmE6IEEpID0+IEtpbmQ8RiwgQj5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRWl0aGVySzxGPihcbiAgRjogRnJvbUVpdGhlcjxGPlxuKTogPEEgZXh0ZW5kcyBSZWFkb25seUFycmF5PHVua25vd24+LCBFLCBCPihmOiAoLi4uYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiAoLi4uYTogQSkgPT4gSEtUMjxGLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXJLPEY+KFxuICBGOiBGcm9tRWl0aGVyPEY+XG4pOiA8QSBleHRlbmRzIFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sIEUsIEI+KGY6ICguLi5hOiBBKSA9PiBFaXRoZXI8RSwgQj4pID0+ICguLi5hOiBBKSA9PiBIS1QyPEYsIEUsIEI+IHtcbiAgcmV0dXJuIChmKSA9PiBmbG93KGYsIEYuZnJvbUVpdGhlcilcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoYWluRWl0aGVySzxNIGV4dGVuZHMgVVJJUzQ+KFxuICBGOiBGcm9tRWl0aGVyNDxNPixcbiAgTTogQ2hhaW40PE0+XG4pOiA8QSwgRSwgQj4oZjogKGE6IEEpID0+IEVpdGhlcjxFLCBCPikgPT4gPFMsIFI+KG1hOiBLaW5kNDxNLCBTLCBSLCBFLCBBPikgPT4gS2luZDQ8TSwgUywgUiwgRSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkVpdGhlcks8TSBleHRlbmRzIFVSSVMzPihcbiAgRjogRnJvbUVpdGhlcjM8TT4sXG4gIE06IENoYWluMzxNPlxuKTogPEEsIEUsIEI+KGY6IChhOiBBKSA9PiBFaXRoZXI8RSwgQj4pID0+IDxSPihtYTogS2luZDM8TSwgUiwgRSwgQT4pID0+IEtpbmQzPE0sIFIsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5FaXRoZXJLPE0gZXh0ZW5kcyBVUklTMywgRT4oXG4gIEY6IEZyb21FaXRoZXIzQzxNLCBFPixcbiAgTTogQ2hhaW4zQzxNLCBFPlxuKTogPEEsIEI+KGY6IChhOiBBKSA9PiBFaXRoZXI8RSwgQj4pID0+IDxSPihtYTogS2luZDM8TSwgUiwgRSwgQT4pID0+IEtpbmQzPE0sIFIsIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5FaXRoZXJLPE0gZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZyb21FaXRoZXIyPE0+LFxuICBNOiBDaGFpbjI8TT5cbik6IDxBLCBFLCBCPihmOiAoYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluRWl0aGVySzxNIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGcm9tRWl0aGVyMkM8TSwgRT4sXG4gIE06IENoYWluMkM8TSwgRT5cbik6IDxBLCBCPihmOiAoYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBCPlxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluRWl0aGVySzxNIGV4dGVuZHMgVVJJUz4oXG4gIEY6IEZyb21FaXRoZXIxPE0+LFxuICBNOiBDaGFpbjE8TT5cbik6IDxFLCBBLCBCPihmOiAoYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiAobWE6IEtpbmQ8TSwgQT4pID0+IEtpbmQ8TSwgQj5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkVpdGhlcks8TT4oXG4gIEY6IEZyb21FaXRoZXI8TT4sXG4gIE06IENoYWluPE0+XG4pOiA8QSwgRSwgQj4oZjogKGE6IEEpID0+IEVpdGhlcjxFLCBCPikgPT4gKG1hOiBIS1QyPE0sIEUsIEE+KSA9PiBIS1QyPE0sIEUsIEI+XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5FaXRoZXJLPE0gZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZyb21FaXRoZXIyPE0+LFxuICBNOiBDaGFpbjI8TT5cbik6IDxBLCBFLCBCPihmOiAoYTogQSkgPT4gRWl0aGVyPEUsIEI+KSA9PiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBCPiB7XG4gIGNvbnN0IGZyb21FaXRoZXJLRiA9IGZyb21FaXRoZXJLKEYpXG4gIHJldHVybiAoZikgPT4gKG1hKSA9PiBNLmNoYWluKG1hLCBmcm9tRWl0aGVyS0YoZikpXG59XG5cbi8qKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJPckVsc2U8TSBleHRlbmRzIFVSSVM0PihcbiAgRjogRnJvbUVpdGhlcjQ8TT4sXG4gIE06IENoYWluNDxNPlxuKToge1xuICA8QSwgQiBleHRlbmRzIEEsIEU+KHJlZmluZW1lbnQ6IFJlZmluZW1lbnQ8QSwgQj4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFMsIFI+KFxuICAgIG1hOiBLaW5kNDxNLCBTLCBSLCBFLCBBPlxuICApID0+IEtpbmQ0PE0sIFMsIFIsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8UywgUiwgQiBleHRlbmRzIEE+KFxuICAgIG1iOiBLaW5kNDxNLCBTLCBSLCBFLCBCPlxuICApID0+IEtpbmQ0PE0sIFMsIFIsIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8UywgUj4obWE6IEtpbmQ0PE0sIFMsIFIsIEUsIEE+KSA9PiBLaW5kNDxNLCBTLCBSLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZTxNIGV4dGVuZHMgVVJJUzM+KFxuICBGOiBGcm9tRWl0aGVyMzxNPixcbiAgTTogQ2hhaW4zPE0+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8Uj4oXG4gICAgbWE6IEtpbmQzPE0sIFIsIEUsIEE+XG4gICkgPT4gS2luZDM8TSwgUiwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxSLCBCIGV4dGVuZHMgQT4obWI6IEtpbmQzPE0sIFIsIEUsIEI+KSA9PiBLaW5kMzxNLCBSLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFI+KG1hOiBLaW5kMzxNLCBSLCBFLCBBPikgPT4gS2luZDM8TSwgUiwgRSwgQT5cbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJPckVsc2U8TSBleHRlbmRzIFVSSVMzLCBFPihcbiAgRjogRnJvbUVpdGhlcjNDPE0sIEU+LFxuICBNOiBDaGFpbjNDPE0sIEU+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8Uj4obWE6IEtpbmQzPE0sIFIsIEUsIEE+KSA9PiBLaW5kMzxNLCBSLCBFLCBCPlxuICA8QT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPFIsIEIgZXh0ZW5kcyBBPihtYjogS2luZDM8TSwgUiwgRSwgQj4pID0+IEtpbmQzPE0sIFIsIEUsIEI+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8Uj4obWE6IEtpbmQzPE0sIFIsIEUsIEE+KSA9PiBLaW5kMzxNLCBSLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZTxNIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGcm9tRWl0aGVyMjxNPixcbiAgTTogQ2hhaW4yPE0+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPEIgZXh0ZW5kcyBBPihtYjogS2luZDI8TSwgRSwgQj4pID0+IEtpbmQyPE0sIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZTxNIGV4dGVuZHMgVVJJUzIsIEU+KFxuICBGOiBGcm9tRWl0aGVyMkM8TSwgRT4sXG4gIE06IENoYWluMkM8TSwgRT5cbik6IHtcbiAgPEEsIEIgZXh0ZW5kcyBBPihyZWZpbmVtZW50OiBSZWZpbmVtZW50PEEsIEI+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IChtYTogS2luZDI8TSwgRSwgQT4pID0+IEtpbmQyPE0sIEUsIEI+XG4gIDxBPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiA8QiBleHRlbmRzIEE+KG1iOiBLaW5kMjxNLCBFLCBCPikgPT4gS2luZDI8TSwgRSwgQj5cbiAgPEE+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IChtYTogS2luZDI8TSwgRSwgQT4pID0+IEtpbmQyPE0sIEUsIEE+XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyT3JFbHNlPE0gZXh0ZW5kcyBVUklTMj4oXG4gIEY6IEZyb21FaXRoZXI8TT4sXG4gIE06IENoYWluPE0+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAobWE6IEhLVDI8TSwgRSwgQT4pID0+IEhLVDI8TSwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IDxCIGV4dGVuZHMgQT4obWI6IEhLVDI8TSwgRSwgQj4pID0+IEhLVDI8TSwgRSwgQj5cbiAgPEEsIEU+KHByZWRpY2F0ZTogUHJlZGljYXRlPEE+LCBvbkZhbHNlOiAoYTogQSkgPT4gRSk6IChtYTogSEtUMjxNLCBFLCBBPikgPT4gSEtUMjxNLCBFLCBBPlxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZTxNIGV4dGVuZHMgVVJJUzI+KFxuICBGOiBGcm9tRWl0aGVyMjxNPixcbiAgTTogQ2hhaW4yPE0+XG4pOiB7XG4gIDxBLCBCIGV4dGVuZHMgQSwgRT4ocmVmaW5lbWVudDogUmVmaW5lbWVudDxBLCBCPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBCPlxuICA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKTogPEIgZXh0ZW5kcyBBPihtYjogS2luZDI8TSwgRSwgQj4pID0+IEtpbmQyPE0sIEUsIEI+XG4gIDxBLCBFPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxBPiwgb25GYWxzZTogKGE6IEEpID0+IEUpOiAobWE6IEtpbmQyPE0sIEUsIEE+KSA9PiBLaW5kMjxNLCBFLCBBPlxufSB7XG4gIHJldHVybiA8QSwgRT4ocHJlZGljYXRlOiBQcmVkaWNhdGU8QT4sIG9uRmFsc2U6IChhOiBBKSA9PiBFKSA9PiAobWE6IEtpbmQyPE0sIEUsIEE+KTogS2luZDI8TSwgRSwgQT4gPT5cbiAgICBNLmNoYWluKG1hLCAoYSkgPT4gRi5mcm9tRWl0aGVyKHByZWRpY2F0ZShhKSA/IF8ucmlnaHQoYSkgOiBfLmxlZnQob25GYWxzZShhKSkpKVxufVxuIl19