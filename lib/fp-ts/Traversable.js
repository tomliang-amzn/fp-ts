"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getTraversableComposition = getTraversableComposition;
exports.sequence = sequence;
exports.traverse = traverse;

var _Foldable = require("./Foldable");

var _function = require("./function");

var _Functor = require("./Functor");

/**
 * `Traversable` represents data structures which can be _traversed_ accumulating results and effects in some
 * `Applicative` functor.
 *
 * - `traverse` runs an action for every element in a data structure, and accumulates the results.
 * - `sequence` runs the actions _contained_ in a data structure, and accumulates the results.
 *
 * The `traverse` and `sequence` functions should be compatible in the following sense:
 *
 * - `traverse(A)(xs, f) <-> sequence(A)(A.map(xs, f))`
 * - `sequence(A)(xs) <-> traverse(A)(xs, identity)`
 *
 * where `A` is an `Applicative` instance
 *
 * `Traversable` instances should also be compatible with the corresponding `Foldable` instances, in the following sense:
 *
 * ```ts
 * import { getApplicative, make } from 'fp-ts/Const'
 *
 * const A = getApplicative(M)
 *
 * foldMap(M)(xs, f) = traverse(A)(xs, a => make(f(a)))
 * ```
 *
 * where `M` is a `Monoid` instance
 *
 * @since 2.0.0
 */
function traverse(T, G) {
  return function (F) {
    var traverseT = T.traverse(F);
    var traverseG = G.traverse(F);
    return function (f) {
      return function (fga) {
        return traverseT(fga, function (ga) {
          return traverseG(ga, f);
        });
      };
    };
  };
}
/**
 * `sequence` composition.
 *
 * @category combinators
 * @since 2.10.0
 */


function sequence(T, G) {
  return function (F) {
    var sequenceT = T.sequence(F);
    var sequenceG = G.sequence(F);
    return function (fgha) {
      return sequenceT(T.map(fgha, sequenceG));
    };
  };
} //
// pipeable `Traverse`
//

/**
 * @since 2.6.3
 */


/** @deprecated */
function getTraversableComposition(F, G) {
  var map = (0, _Functor.getFunctorComposition)(F, G).map;
  var FC = (0, _Foldable.getFoldableComposition)(F, G);

  var _traverse = traverse(F, G);

  var _sequence = sequence(F, G);

  return {
    map: map,
    reduce: FC.reduce,
    foldMap: FC.foldMap,
    reduceRight: FC.reduceRight,
    traverse: function traverse(H) {
      var traverseH = _traverse(H);

      return function (fga, f) {
        return (0, _function.pipe)(fga, traverseH(f));
      };
    },
    sequence: function sequence(H) {
      var sequenceH = _sequence(H);

      return function (fgha) {
        return (0, _function.pipe)(fgha, sequenceH);
      };
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mcC10cy9UcmF2ZXJzYWJsZS50cyJdLCJuYW1lcyI6WyJ0cmF2ZXJzZSIsIlQiLCJHIiwiRiIsInRyYXZlcnNlVCIsInRyYXZlcnNlRyIsImYiLCJmZ2EiLCJnYSIsInNlcXVlbmNlIiwic2VxdWVuY2VUIiwic2VxdWVuY2VHIiwiZmdoYSIsIm1hcCIsImdldFRyYXZlcnNhYmxlQ29tcG9zaXRpb24iLCJGQyIsIl90cmF2ZXJzZSIsIl9zZXF1ZW5jZSIsInJlZHVjZSIsImZvbGRNYXAiLCJyZWR1Y2VSaWdodCIsIkgiLCJ0cmF2ZXJzZUgiLCJzZXF1ZW5jZUgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQXFDQTs7QUFVQTs7QUFDQTs7QUFoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFzVk8sU0FBU0EsUUFBVCxDQUNMQyxDQURLLEVBRUxDLENBRkssRUFHOEc7QUFDbkgsU0FBTyxVQUFDQyxDQUFELEVBQU87QUFDWixRQUFNQyxTQUFTLEdBQUdILENBQUMsQ0FBQ0QsUUFBRixDQUFXRyxDQUFYLENBQWxCO0FBQ0EsUUFBTUUsU0FBUyxHQUFHSCxDQUFDLENBQUNGLFFBQUYsQ0FBV0csQ0FBWCxDQUFsQjtBQUNBLFdBQU8sVUFBQ0csQ0FBRDtBQUFBLGFBQU8sVUFBQ0MsR0FBRDtBQUFBLGVBQVNILFNBQVMsQ0FBQ0csR0FBRCxFQUFNLFVBQUNDLEVBQUQ7QUFBQSxpQkFBUUgsU0FBUyxDQUFDRyxFQUFELEVBQUtGLENBQUwsQ0FBakI7QUFBQSxTQUFOLENBQWxCO0FBQUEsT0FBUDtBQUFBLEtBQVA7QUFDRCxHQUpEO0FBS0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVlPLFNBQVNHLFFBQVQsQ0FDTFIsQ0FESyxFQUVMQyxDQUZLLEVBR3dGO0FBQzdGLFNBQU8sVUFBQ0MsQ0FBRCxFQUFPO0FBQ1osUUFBTU8sU0FBUyxHQUFHVCxDQUFDLENBQUNRLFFBQUYsQ0FBV04sQ0FBWCxDQUFsQjtBQUNBLFFBQU1RLFNBQVMsR0FBR1QsQ0FBQyxDQUFDTyxRQUFGLENBQVdOLENBQVgsQ0FBbEI7QUFDQSxXQUFPLFVBQUNTLElBQUQ7QUFBQSxhQUFVRixTQUFTLENBQUNULENBQUMsQ0FBQ1ksR0FBRixDQUFNRCxJQUFOLEVBQVlELFNBQVosQ0FBRCxDQUFuQjtBQUFBLEtBQVA7QUFDRCxHQUpEO0FBS0QsQyxDQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQTJIQTtBQUNPLFNBQVNHLHlCQUFULENBQXlDWCxDQUF6QyxFQUE0REQsQ0FBNUQsRUFBNkc7QUFDbEgsTUFBTVcsR0FBRyxHQUFHLG9DQUFzQlYsQ0FBdEIsRUFBeUJELENBQXpCLEVBQTRCVyxHQUF4QztBQUNBLE1BQU1FLEVBQUUsR0FBRyxzQ0FBdUJaLENBQXZCLEVBQTBCRCxDQUExQixDQUFYOztBQUNBLE1BQU1jLFNBQVMsR0FBR2hCLFFBQVEsQ0FBQ0csQ0FBRCxFQUFJRCxDQUFKLENBQTFCOztBQUNBLE1BQU1lLFNBQVMsR0FBR1IsUUFBUSxDQUFDTixDQUFELEVBQUlELENBQUosQ0FBMUI7O0FBQ0EsU0FBTztBQUNMVyxJQUFBQSxHQUFHLEVBQUhBLEdBREs7QUFFTEssSUFBQUEsTUFBTSxFQUFFSCxFQUFFLENBQUNHLE1BRk47QUFHTEMsSUFBQUEsT0FBTyxFQUFFSixFQUFFLENBQUNJLE9BSFA7QUFJTEMsSUFBQUEsV0FBVyxFQUFFTCxFQUFFLENBQUNLLFdBSlg7QUFLTHBCLElBQUFBLFFBQVEsRUFBRSxrQkFBQ3FCLENBQUQsRUFBTztBQUNmLFVBQU1DLFNBQVMsR0FBR04sU0FBUyxDQUFDSyxDQUFELENBQTNCOztBQUNBLGFBQU8sVUFBQ2QsR0FBRCxFQUFNRCxDQUFOO0FBQUEsZUFBWSxvQkFBS0MsR0FBTCxFQUFVZSxTQUFTLENBQUNoQixDQUFELENBQW5CLENBQVo7QUFBQSxPQUFQO0FBQ0QsS0FSSTtBQVNMRyxJQUFBQSxRQUFRLEVBQUUsa0JBQUNZLENBQUQsRUFBTztBQUNmLFVBQU1FLFNBQVMsR0FBR04sU0FBUyxDQUFDSSxDQUFELENBQTNCOztBQUNBLGFBQU8sVUFBQ1QsSUFBRDtBQUFBLGVBQVUsb0JBQUtBLElBQUwsRUFBV1csU0FBWCxDQUFWO0FBQUEsT0FBUDtBQUNEO0FBWkksR0FBUDtBQWNEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBgVHJhdmVyc2FibGVgIHJlcHJlc2VudHMgZGF0YSBzdHJ1Y3R1cmVzIHdoaWNoIGNhbiBiZSBfdHJhdmVyc2VkXyBhY2N1bXVsYXRpbmcgcmVzdWx0cyBhbmQgZWZmZWN0cyBpbiBzb21lXG4gKiBgQXBwbGljYXRpdmVgIGZ1bmN0b3IuXG4gKlxuICogLSBgdHJhdmVyc2VgIHJ1bnMgYW4gYWN0aW9uIGZvciBldmVyeSBlbGVtZW50IGluIGEgZGF0YSBzdHJ1Y3R1cmUsIGFuZCBhY2N1bXVsYXRlcyB0aGUgcmVzdWx0cy5cbiAqIC0gYHNlcXVlbmNlYCBydW5zIHRoZSBhY3Rpb25zIF9jb250YWluZWRfIGluIGEgZGF0YSBzdHJ1Y3R1cmUsIGFuZCBhY2N1bXVsYXRlcyB0aGUgcmVzdWx0cy5cbiAqXG4gKiBUaGUgYHRyYXZlcnNlYCBhbmQgYHNlcXVlbmNlYCBmdW5jdGlvbnMgc2hvdWxkIGJlIGNvbXBhdGlibGUgaW4gdGhlIGZvbGxvd2luZyBzZW5zZTpcbiAqXG4gKiAtIGB0cmF2ZXJzZShBKSh4cywgZikgPC0+IHNlcXVlbmNlKEEpKEEubWFwKHhzLCBmKSlgXG4gKiAtIGBzZXF1ZW5jZShBKSh4cykgPC0+IHRyYXZlcnNlKEEpKHhzLCBpZGVudGl0eSlgXG4gKlxuICogd2hlcmUgYEFgIGlzIGFuIGBBcHBsaWNhdGl2ZWAgaW5zdGFuY2VcbiAqXG4gKiBgVHJhdmVyc2FibGVgIGluc3RhbmNlcyBzaG91bGQgYWxzbyBiZSBjb21wYXRpYmxlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgYEZvbGRhYmxlYCBpbnN0YW5jZXMsIGluIHRoZSBmb2xsb3dpbmcgc2Vuc2U6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGdldEFwcGxpY2F0aXZlLCBtYWtlIH0gZnJvbSAnZnAtdHMvQ29uc3QnXG4gKlxuICogY29uc3QgQSA9IGdldEFwcGxpY2F0aXZlKE0pXG4gKlxuICogZm9sZE1hcChNKSh4cywgZikgPSB0cmF2ZXJzZShBKSh4cywgYSA9PiBtYWtlKGYoYSkpKVxuICogYGBgXG4gKlxuICogd2hlcmUgYE1gIGlzIGEgYE1vbm9pZGAgaW5zdGFuY2VcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHtcbiAgQXBwbGljYXRpdmUsXG4gIEFwcGxpY2F0aXZlMSxcbiAgQXBwbGljYXRpdmUyLFxuICBBcHBsaWNhdGl2ZTJDLFxuICBBcHBsaWNhdGl2ZTMsXG4gIEFwcGxpY2F0aXZlM0MsXG4gIEFwcGxpY2F0aXZlNFxufSBmcm9tICcuL0FwcGxpY2F0aXZlJ1xuaW1wb3J0IHtcbiAgRm9sZGFibGUsXG4gIEZvbGRhYmxlMSxcbiAgRm9sZGFibGUyLFxuICBGb2xkYWJsZTJDLFxuICBGb2xkYWJsZTMsXG4gIEZvbGRhYmxlQ29tcG9zaXRpb24sXG4gIEZvbGRhYmxlQ29tcG9zaXRpb24xMSxcbiAgZ2V0Rm9sZGFibGVDb21wb3NpdGlvblxufSBmcm9tICcuL0ZvbGRhYmxlJ1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nXG5pbXBvcnQge1xuICBGdW5jdG9yLFxuICBGdW5jdG9yMSxcbiAgRnVuY3RvcjIsXG4gIEZ1bmN0b3IyQyxcbiAgRnVuY3RvcjMsXG4gIEZ1bmN0b3JDb21wb3NpdGlvbixcbiAgRnVuY3RvckNvbXBvc2l0aW9uMTEsXG4gIGdldEZ1bmN0b3JDb21wb3NpdGlvblxufSBmcm9tICcuL0Z1bmN0b3InXG5pbXBvcnQgeyBIS1QsIEtpbmQsIEtpbmQyLCBLaW5kMywgS2luZDQsIFVSSVMsIFVSSVMyLCBVUklTMywgVVJJUzQgfSBmcm9tICcuL0hLVCdcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbW9kZWxcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmF2ZXJzYWJsZTxUPiBleHRlbmRzIEZ1bmN0b3I8VD4sIEZvbGRhYmxlPFQ+IHtcbiAgLyoqXG4gICAqIFJ1bnMgYW4gYWN0aW9uIGZvciBldmVyeSBlbGVtZW50IGluIGEgZGF0YSBzdHJ1Y3R1cmUgYW5kIGFjY3VtdWxhdGVzIHRoZSByZXN1bHRzXG4gICAqL1xuICByZWFkb25seSB0cmF2ZXJzZTogVHJhdmVyc2U8VD5cbiAgcmVhZG9ubHkgc2VxdWVuY2U6IFNlcXVlbmNlPFQ+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2FibGUxPFQgZXh0ZW5kcyBVUklTPiBleHRlbmRzIEZ1bmN0b3IxPFQ+LCBGb2xkYWJsZTE8VD4ge1xuICByZWFkb25seSB0cmF2ZXJzZTogVHJhdmVyc2UxPFQ+XG4gIHJlYWRvbmx5IHNlcXVlbmNlOiBTZXF1ZW5jZTE8VD5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmF2ZXJzYWJsZTI8VCBleHRlbmRzIFVSSVMyPiBleHRlbmRzIEZ1bmN0b3IyPFQ+LCBGb2xkYWJsZTI8VD4ge1xuICByZWFkb25seSB0cmF2ZXJzZTogVHJhdmVyc2UyPFQ+XG4gIHJlYWRvbmx5IHNlcXVlbmNlOiBTZXF1ZW5jZTI8VD5cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBjbGFzc2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmF2ZXJzYWJsZTJDPFQgZXh0ZW5kcyBVUklTMiwgVEw+IGV4dGVuZHMgRnVuY3RvcjJDPFQsIFRMPiwgRm9sZGFibGUyQzxULCBUTD4ge1xuICByZWFkb25seSB0cmF2ZXJzZTogVHJhdmVyc2UyQzxULCBUTD5cbiAgcmVhZG9ubHkgc2VxdWVuY2U6IFNlcXVlbmNlMkM8VCwgVEw+XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgY2xhc3Nlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2FibGUzPFQgZXh0ZW5kcyBVUklTMz4gZXh0ZW5kcyBGdW5jdG9yMzxUPiwgRm9sZGFibGUzPFQ+IHtcbiAgcmVhZG9ubHkgdHJhdmVyc2U6IFRyYXZlcnNlMzxUPlxuICByZWFkb25seSBzZXF1ZW5jZTogU2VxdWVuY2UzPFQ+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2U8VD4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8QSwgUywgUiwgRSwgQj4oXG4gICAgdGE6IEhLVDxULCBBPixcbiAgICBmOiAoYTogQSkgPT4gS2luZDQ8RiwgUywgUiwgRSwgQj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBIS1Q8VCwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzM+KEY6IEFwcGxpY2F0aXZlMzxGPik6IDxBLCBSLCBFLCBCPihcbiAgICB0YTogSEtUPFQsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICApID0+IEtpbmQzPEYsIFIsIEUsIEhLVDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMywgRT4oRjogQXBwbGljYXRpdmUzQzxGLCBFPik6IDxBLCBSLCBCPihcbiAgICB0YTogSEtUPFQsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICApID0+IEtpbmQzPEYsIFIsIEUsIEhLVDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMj4oRjogQXBwbGljYXRpdmUyPEY+KTogPEEsIEUsIEI+KHRhOiBIS1Q8VCwgQT4sIGY6IChhOiBBKSA9PiBLaW5kMjxGLCBFLCBCPikgPT4gS2luZDI8RiwgRSwgSEtUPFQsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMyLCBFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEU+KTogPEEsIEI+KFxuICAgIHRhOiBIS1Q8VCwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQyPEYsIEUsIEI+XG4gICkgPT4gS2luZDI8RiwgRSwgSEtUPFQsIEI+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxBLCBCPih0YTogSEtUPFQsIEE+LCBmOiAoYTogQSkgPT4gS2luZDxGLCBCPikgPT4gS2luZDxGLCBIS1Q8VCwgQj4+XG4gIDxGPihGOiBBcHBsaWNhdGl2ZTxGPik6IDxBLCBCPih0YTogSEtUPFQsIEE+LCBmOiAoYTogQSkgPT4gSEtUPEYsIEI+KSA9PiBIS1Q8RiwgSEtUPFQsIEI+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlcnNlMTxUIGV4dGVuZHMgVVJJUz4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8QSwgUywgUiwgRSwgQj4oXG4gICAgdGE6IEtpbmQ8VCwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQ0PEYsIFMsIFIsIEUsIEI+XG4gICkgPT4gS2luZDQ8RiwgUywgUiwgRSwgS2luZDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMz4oRjogQXBwbGljYXRpdmUzPEY+KTogPEEsIFIsIEUsIEI+KFxuICAgIHRhOiBLaW5kPFQsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBSLCBFLCBCPlxuICApID0+IEtpbmQzPEYsIFIsIEUsIEtpbmQ8VCwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzMsIEU+KEY6IEFwcGxpY2F0aXZlM0M8RiwgRT4pOiA8QSwgUiwgQj4oXG4gICAgdGE6IEtpbmQ8VCwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEYsIFIsIEUsIEI+XG4gICkgPT4gS2luZDM8RiwgUiwgRSwgS2luZDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMj4oRjogQXBwbGljYXRpdmUyPEY+KTogPEEsIEUsIEI+KFxuICAgIHRhOiBLaW5kPFQsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMjxGLCBFLCBCPlxuICApID0+IEtpbmQyPEYsIEUsIEtpbmQ8VCwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEU+KEY6IEFwcGxpY2F0aXZlMkM8RiwgRT4pOiA8QSwgQj4oXG4gICAgdGE6IEtpbmQ8VCwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQyPEYsIEUsIEI+XG4gICkgPT4gS2luZDI8RiwgRSwgS2luZDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTPihGOiBBcHBsaWNhdGl2ZTE8Rj4pOiA8QSwgQj4odGE6IEtpbmQ8VCwgQT4sIGY6IChhOiBBKSA9PiBLaW5kPEYsIEI+KSA9PiBLaW5kPEYsIEtpbmQ8VCwgQj4+XG4gIDxGPihGOiBBcHBsaWNhdGl2ZTxGPik6IDxBLCBCPih0YTogS2luZDxULCBBPiwgZjogKGE6IEEpID0+IEhLVDxGLCBCPikgPT4gSEtUPEYsIEtpbmQ8VCwgQj4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2UyPFQgZXh0ZW5kcyBVUklTMj4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8VEUsIEEsIFMsIFIsIEZFLCBCPihcbiAgICB0YTogS2luZDI8VCwgVEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgQj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgS2luZDI8VCwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMzPihGOiBBcHBsaWNhdGl2ZTM8Rj4pOiA8VEUsIEEsIFIsIEZFLCBCPihcbiAgICB0YTogS2luZDI8VCwgVEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBSLCBGRSwgQj5cbiAgKSA9PiBLaW5kMzxGLCBSLCBGRSwgS2luZDI8VCwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMzLCBGRT4oRjogQXBwbGljYXRpdmUzQzxGLCBGRT4pOiA8VEUsIEEsIFIsIEI+KFxuICAgIHRhOiBLaW5kMjxULCBURSwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEYsIFIsIEZFLCBCPlxuICApID0+IEtpbmQzPEYsIFIsIEZFLCBLaW5kMjxULCBURSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxURSwgQSwgRkUsIEI+KFxuICAgIHRhOiBLaW5kMjxULCBURSwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQyPEYsIEZFLCBCPlxuICApID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxULCBURSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEZFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEZFPik6IDxURSwgQSwgQj4oXG4gICAgdGE6IEtpbmQyPFQsIFRFLCBBPixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQyPFQsIFRFLCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTPihGOiBBcHBsaWNhdGl2ZTE8Rj4pOiA8RSwgQSwgQj4oXG4gICAgdGE6IEtpbmQyPFQsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kPEYsIEI+XG4gICkgPT4gS2luZDxGLCBLaW5kMjxULCBFLCBCPj5cbiAgPEY+KEY6IEFwcGxpY2F0aXZlPEY+KTogPEUsIEEsIEI+KHRhOiBLaW5kMjxULCBFLCBBPiwgZjogKGE6IEEpID0+IEhLVDxGLCBCPikgPT4gSEtUPEYsIEtpbmQyPFQsIEUsIEI+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlcnNlMkM8VCBleHRlbmRzIFVSSVMyLCBFPiB7XG4gIDxGIGV4dGVuZHMgVVJJUzQ+KEY6IEFwcGxpY2F0aXZlNDxGPik6IDxBLCBTLCBSLCBGRSwgQj4oXG4gICAgdGE6IEtpbmQyPFQsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgQj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgS2luZDI8VCwgRSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzM+KEY6IEFwcGxpY2F0aXZlMzxGPik6IDxBLCBSLCBGRSwgQj4oXG4gICAgdGE6IEtpbmQyPFQsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBSLCBGRSwgQj5cbiAgKSA9PiBLaW5kMzxGLCBSLCBGRSwgS2luZDI8VCwgRSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBBcHBsaWNhdGl2ZTNDPEYsIEZFPik6IDxBLCBSLCBCPihcbiAgICB0YTogS2luZDI8VCwgRSwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEYsIFIsIEZFLCBCPlxuICApID0+IEtpbmQzPEYsIFIsIEZFLCBLaW5kMjxULCBFLCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMj4oRjogQXBwbGljYXRpdmUyPEY+KTogPEEsIEZFLCBCPihcbiAgICB0YTogS2luZDI8VCwgRSwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQyPEYsIEZFLCBCPlxuICApID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxULCBFLCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IEFwcGxpY2F0aXZlMkM8RiwgRkU+KTogPEEsIEI+KFxuICAgIHRhOiBLaW5kMjxULCBFLCBBPixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQyPFQsIEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxBLCBCPih0YTogS2luZDI8VCwgRSwgQT4sIGY6IChhOiBBKSA9PiBLaW5kPEYsIEI+KSA9PiBLaW5kPEYsIEtpbmQyPFQsIEUsIEI+PlxuICA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pOiA8QSwgQj4odGE6IEtpbmQyPFQsIEUsIEE+LCBmOiAoYTogQSkgPT4gSEtUPEYsIEI+KSA9PiBIS1Q8RiwgS2luZDI8VCwgRSwgQj4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2UzPFQgZXh0ZW5kcyBVUklTMz4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8VFIsIFRFLCBBLCBTLCBGUiwgRkUsIEI+KFxuICAgIHRhOiBLaW5kMzxULCBUUiwgVEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kNDxGLCBTLCBGUiwgRkUsIEI+XG4gICkgPT4gS2luZDQ8RiwgUywgRlIsIEZFLCBLaW5kMzxULCBUUiwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMzPihGOiBBcHBsaWNhdGl2ZTM8Rj4pOiA8VFIsIFRFLCBBLCBGUiwgRkUsIEI+KFxuICAgIHRhOiBLaW5kMzxULCBUUiwgVEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBGUiwgRkUsIEI+XG4gICkgPT4gS2luZDM8RiwgRlIsIEZFLCBLaW5kMzxULCBUUiwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMzLCBGRT4oRjogQXBwbGljYXRpdmUzQzxGLCBGRT4pOiA8VFIsIFRFLCBBLCBGUiwgQj4oXG4gICAgdGE6IEtpbmQzPFQsIFRSLCBURSwgQT4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEYsIEZSLCBGRSwgQj5cbiAgKSA9PiBLaW5kMzxGLCBGUiwgRkUsIEtpbmQzPFQsIFRSLCBURSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxUUiwgQSwgVEUsIEZFLCBCPihcbiAgICB0YTogS2luZDM8VCwgVFIsIFRFLCBBPixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQzPFQsIFRSLCBURSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEZFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEZFPik6IDxSLCBURSwgQSwgQj4oXG4gICAgdGE6IEtpbmQzPFQsIFIsIFRFLCBBPixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQzPFQsIFIsIFRFLCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTPihGOiBBcHBsaWNhdGl2ZTE8Rj4pOiA8UiwgRSwgQSwgQj4oXG4gICAgdGE6IEtpbmQzPFQsIFIsIEUsIEE+LFxuICAgIGY6IChhOiBBKSA9PiBLaW5kPEYsIEI+XG4gICkgPT4gS2luZDxGLCBLaW5kMzxULCBSLCBFLCBCPj5cbiAgPEY+KEY6IEFwcGxpY2F0aXZlPEY+KTogPFIsIEUsIEEsIEI+KHRhOiBLaW5kMzxULCBSLCBFLCBBPiwgZjogKGE6IEEpID0+IEhLVDxGLCBCPikgPT4gSEtUPEYsIEtpbmQzPFQsIFIsIEUsIEI+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlcXVlbmNlPFQ+IHtcbiAgPEYgZXh0ZW5kcyBVUklTND4oRjogQXBwbGljYXRpdmU0PEY+KTogPFMsIFIsIEUsIEE+KHRhOiBIS1Q8VCwgS2luZDQ8RiwgUywgUiwgRSwgQT4+KSA9PiBLaW5kNDxGLCBTLCBSLCBFLCBIS1Q8VCwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzM+KEY6IEFwcGxpY2F0aXZlMzxGPik6IDxSLCBFLCBBPih0YTogSEtUPFQsIEtpbmQzPEYsIFIsIEUsIEE+PikgPT4gS2luZDM8RiwgUiwgRSwgSEtUPFQsIEE+PlxuICA8RiBleHRlbmRzIFVSSVMzLCBFPihGOiBBcHBsaWNhdGl2ZTNDPEYsIEU+KTogPFIsIEE+KHRhOiBIS1Q8VCwgS2luZDM8RiwgUiwgRSwgQT4+KSA9PiBLaW5kMzxGLCBSLCBFLCBIS1Q8VCwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxFLCBBPih0YTogSEtUPFQsIEtpbmQyPEYsIEUsIEE+PikgPT4gS2luZDI8RiwgRSwgSEtUPFQsIEE+PlxuICA8RiBleHRlbmRzIFVSSVMyLCBFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEU+KTogPEE+KHRhOiBIS1Q8VCwgS2luZDI8RiwgRSwgQT4+KSA9PiBLaW5kMjxGLCBFLCBIS1Q8VCwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUz4oRjogQXBwbGljYXRpdmUxPEY+KTogPEE+KHRhOiBIS1Q8VCwgS2luZDxGLCBBPj4pID0+IEtpbmQ8RiwgSEtUPFQsIEE+PlxuICA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pOiA8QT4odGE6IEhLVDxULCBIS1Q8RiwgQT4+KSA9PiBIS1Q8RiwgSEtUPFQsIEE+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlcXVlbmNlMTxUIGV4dGVuZHMgVVJJUz4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8UywgUiwgRSwgQT4oXG4gICAgdGE6IEtpbmQ8VCwgS2luZDQ8RiwgUywgUiwgRSwgQT4+XG4gICkgPT4gS2luZDQ8RiwgUywgUiwgRSwgS2luZDxULCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMz4oRjogQXBwbGljYXRpdmUzPEY+KTogPFIsIEUsIEE+KHRhOiBLaW5kPFQsIEtpbmQzPEYsIFIsIEUsIEE+PikgPT4gS2luZDM8RiwgUiwgRSwgS2luZDxULCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMywgRT4oRjogQXBwbGljYXRpdmUzQzxGLCBFPik6IDxSLCBBPih0YTogS2luZDxULCBLaW5kMzxGLCBSLCBFLCBBPj4pID0+IEtpbmQzPEYsIFIsIEUsIEtpbmQ8VCwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxFLCBBPih0YTogS2luZDxULCBLaW5kMjxGLCBFLCBBPj4pID0+IEtpbmQyPEYsIEUsIEtpbmQ8VCwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEU+KEY6IEFwcGxpY2F0aXZlMkM8RiwgRT4pOiA8QT4odGE6IEtpbmQ8VCwgS2luZDI8RiwgRSwgQT4+KSA9PiBLaW5kMjxGLCBFLCBLaW5kPFQsIEE+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxBPih0YTogS2luZDxULCBLaW5kPEYsIEE+PikgPT4gS2luZDxGLCBLaW5kPFQsIEE+PlxuICA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pOiA8QT4odGE6IEtpbmQ8VCwgSEtUPEYsIEE+PikgPT4gSEtUPEYsIEtpbmQ8VCwgQT4+XG59XG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VxdWVuY2UyPFQgZXh0ZW5kcyBVUklTMj4ge1xuICA8RiBleHRlbmRzIFVSSVM0PihGOiBBcHBsaWNhdGl2ZTQ8Rj4pOiA8VEUsIFMsIFIsIEZFLCBBPihcbiAgICB0YTogS2luZDI8VCwgVEUsIEtpbmQ0PEYsIFMsIFIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgS2luZDI8VCwgVEUsIEE+PlxuICA8RiBleHRlbmRzIFVSSVMzPihGOiBBcHBsaWNhdGl2ZTM8Rj4pOiA8VEUsIFIsIEZFLCBBPihcbiAgICB0YTogS2luZDI8VCwgVEUsIEtpbmQzPEYsIFIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kMzxGLCBSLCBGRSwgS2luZDI8VCwgVEUsIEE+PlxuICA8RiBleHRlbmRzIFVSSVMzLCBGRT4oRjogQXBwbGljYXRpdmUzQzxGLCBGRT4pOiA8VEUsIFIsIEE+KFxuICAgIHRhOiBLaW5kMjxULCBURSwgS2luZDM8RiwgUiwgRkUsIEE+PlxuICApID0+IEtpbmQzPEYsIFIsIEZFLCBLaW5kMjxULCBURSwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxURSwgRkUsIEE+KHRhOiBLaW5kMjxULCBURSwgS2luZDI8RiwgRkUsIEE+PikgPT4gS2luZDI8RiwgRkUsIEtpbmQyPFQsIFRFLCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IEFwcGxpY2F0aXZlMkM8RiwgRkU+KTogPFRFLCBBPihcbiAgICB0YTogS2luZDI8VCwgVEUsIEtpbmQyPEYsIEZFLCBBPj5cbiAgKSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8VCwgVEUsIEE+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxFLCBBPih0YTogS2luZDI8VCwgRSwgS2luZDxGLCBBPj4pID0+IEtpbmQ8RiwgS2luZDI8VCwgRSwgQT4+XG4gIDxGPihGOiBBcHBsaWNhdGl2ZTxGPik6IDxFLCBBPih0YTogS2luZDI8VCwgRSwgSEtUPEYsIEE+PikgPT4gSEtUPEYsIEtpbmQyPFQsIEUsIEE+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlcXVlbmNlMkM8VCBleHRlbmRzIFVSSVMyLCBFPiB7XG4gIDxGIGV4dGVuZHMgVVJJUzQ+KEY6IEFwcGxpY2F0aXZlNDxGPik6IDxTLCBSLCBGRSwgQT4oXG4gICAgdGE6IEtpbmQyPFQsIEUsIEtpbmQ0PEYsIFMsIFIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBSLCBGRSwgS2luZDI8VCwgRSwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzM+KEY6IEFwcGxpY2F0aXZlMzxGPik6IDxSLCBGRSwgQT4oXG4gICAgdGE6IEtpbmQyPFQsIEUsIEtpbmQzPEYsIFIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kMzxGLCBSLCBGRSwgS2luZDI8VCwgRSwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBBcHBsaWNhdGl2ZTNDPEYsIEZFPik6IDxSLCBBPihcbiAgICB0YTogS2luZDI8VCwgRSwgS2luZDM8RiwgUiwgRkUsIEE+PlxuICApID0+IEtpbmQzPEYsIFIsIEZFLCBLaW5kMjxULCBFLCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMj4oRjogQXBwbGljYXRpdmUyPEY+KTogPEZFLCBBPih0YTogS2luZDI8VCwgRSwgS2luZDI8RiwgRkUsIEE+PikgPT4gS2luZDI8RiwgRkUsIEtpbmQyPFQsIEUsIEE+PlxuICA8RiBleHRlbmRzIFVSSVMyLCBGRT4oRjogQXBwbGljYXRpdmUyQzxGLCBGRT4pOiA8QT4odGE6IEtpbmQyPFQsIEUsIEtpbmQyPEYsIEZFLCBBPj4pID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxULCBFLCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTPihGOiBBcHBsaWNhdGl2ZTE8Rj4pOiA8QT4odGE6IEtpbmQyPFQsIEUsIEtpbmQ8RiwgQT4+KSA9PiBLaW5kPEYsIEtpbmQyPFQsIEUsIEE+PlxuICA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pOiA8QT4odGE6IEtpbmQyPFQsIEUsIEhLVDxGLCBBPj4pID0+IEhLVDxGLCBLaW5kMjxULCBFLCBBPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXF1ZW5jZTM8VCBleHRlbmRzIFVSSVMzPiB7XG4gIDxGIGV4dGVuZHMgVVJJUzQ+KEY6IEFwcGxpY2F0aXZlNDxGPik6IDxUUiwgVEUsIFMsIEZSLCBGRSwgQT4oXG4gICAgdGE6IEtpbmQzPFQsIFRSLCBURSwgS2luZDQ8RiwgUywgRlIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kNDxGLCBTLCBGUiwgRkUsIEtpbmQzPFQsIFRSLCBURSwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzM+KEY6IEFwcGxpY2F0aXZlMzxGPik6IDxUUiwgVEUsIEZSLCBGRSwgQT4oXG4gICAgdGE6IEtpbmQzPFQsIFRSLCBURSwgS2luZDM8RiwgRlIsIEZFLCBBPj5cbiAgKSA9PiBLaW5kMzxGLCBGUiwgRkUsIEtpbmQzPFQsIFRSLCBURSwgQT4+XG4gIDxGIGV4dGVuZHMgVVJJUzMsIEZFPihGOiBBcHBsaWNhdGl2ZTNDPEYsIEZFPik6IDxUUiwgVEUsIEZSLCBBPihcbiAgICB0YTogS2luZDM8VCwgVFIsIFRFLCBLaW5kMzxGLCBGUiwgRkUsIEE+PlxuICApID0+IEtpbmQzPEYsIEZSLCBGRSwgS2luZDM8VCwgVFIsIFRFLCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMj4oRjogQXBwbGljYXRpdmUyPEY+KTogPFIsIFRFLCBGRSwgQT4oXG4gICAgdGE6IEtpbmQzPFQsIFIsIFRFLCBLaW5kMjxGLCBGRSwgQT4+XG4gICkgPT4gS2luZDI8RiwgRkUsIEtpbmQzPFQsIFIsIFRFLCBBPj5cbiAgPEYgZXh0ZW5kcyBVUklTMiwgRkU+KEY6IEFwcGxpY2F0aXZlMkM8RiwgRkU+KTogPFIsIFRFLCBBPihcbiAgICB0YTogS2luZDM8VCwgUiwgVEUsIEtpbmQyPEYsIEZFLCBBPj5cbiAgKSA9PiBLaW5kMjxGLCBGRSwgS2luZDM8VCwgUiwgVEUsIEE+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxSLCBFLCBBPih0YTogS2luZDM8VCwgUiwgRSwgS2luZDxGLCBBPj4pID0+IEtpbmQ8RiwgS2luZDM8VCwgUiwgRSwgQT4+XG4gIDxGPihGOiBBcHBsaWNhdGl2ZTxGPik6IDxSLCBFLCBBPih0YTogS2luZDM8VCwgUiwgRSwgSEtUPEYsIEE+PikgPT4gSEtUPEYsIEtpbmQzPFQsIFIsIEUsIEE+PlxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIGB0cmF2ZXJzZWAgY29tcG9zaXRpb24uXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZTxUIGV4dGVuZHMgVVJJUywgRyBleHRlbmRzIFVSSVM+KFxuICBUOiBUcmF2ZXJzYWJsZTE8VD4sXG4gIEc6IFRyYXZlcnNhYmxlMTxHPlxuKToge1xuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxBLCBCPihcbiAgICBmOiAoYTogQSkgPT4gS2luZDxGLCBCPlxuICApID0+ICh0Z2E6IEtpbmQ8VCwgS2luZDxHLCBBPj4pID0+IEtpbmQ8RiwgS2luZDxULCBLaW5kPEcsIEI+Pj5cbiAgPEY+KEY6IEFwcGxpY2F0aXZlPEY+KTogPEEsIEI+KGY6IChhOiBBKSA9PiBIS1Q8RiwgQj4pID0+ICh0Z2E6IEtpbmQ8VCwgS2luZDxHLCBBPj4pID0+IEhLVDxGLCBLaW5kPFQsIEtpbmQ8RywgQj4+PlxufVxuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlPFQsIEc+KFxuICBUOiBUcmF2ZXJzYWJsZTxUPixcbiAgRzogVHJhdmVyc2FibGU8Rz5cbik6IDxGPihGOiBBcHBsaWNhdGl2ZTxGPikgPT4gPEEsIEI+KGY6IChhOiBBKSA9PiBIS1Q8RiwgQj4pID0+ICh0Z2E6IEhLVDxULCBIS1Q8RywgQT4+KSA9PiBIS1Q8RiwgSEtUPFQsIEhLVDxHLCBCPj4+XG5leHBvcnQgZnVuY3Rpb24gdHJhdmVyc2U8VCwgRz4oXG4gIFQ6IFRyYXZlcnNhYmxlPFQ+LFxuICBHOiBUcmF2ZXJzYWJsZTxHPlxuKTogPEY+KEY6IEFwcGxpY2F0aXZlPEY+KSA9PiA8QSwgQj4oZjogKGE6IEEpID0+IEhLVDxGLCBCPikgPT4gKHRnYTogSEtUPFQsIEhLVDxHLCBBPj4pID0+IEhLVDxGLCBIS1Q8VCwgSEtUPEcsIEI+Pj4ge1xuICByZXR1cm4gKEYpID0+IHtcbiAgICBjb25zdCB0cmF2ZXJzZVQgPSBULnRyYXZlcnNlKEYpXG4gICAgY29uc3QgdHJhdmVyc2VHID0gRy50cmF2ZXJzZShGKVxuICAgIHJldHVybiAoZikgPT4gKGZnYSkgPT4gdHJhdmVyc2VUKGZnYSwgKGdhKSA9PiB0cmF2ZXJzZUcoZ2EsIGYpKVxuICB9XG59XG5cbi8qKlxuICogYHNlcXVlbmNlYCBjb21wb3NpdGlvbi5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcXVlbmNlPFQgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz4oXG4gIFQ6IFRyYXZlcnNhYmxlMTxUPixcbiAgRzogVHJhdmVyc2FibGUxPEc+XG4pOiB7XG4gIDxGIGV4dGVuZHMgVVJJUz4oRjogQXBwbGljYXRpdmUxPEY+KTogPEE+KHRnZmE6IEtpbmQ8VCwgS2luZDxHLCBLaW5kPEYsIEE+Pj4pID0+IEtpbmQ8RiwgS2luZDxULCBLaW5kPEcsIEE+Pj5cbiAgPEY+KEY6IEFwcGxpY2F0aXZlPEY+KTogPEE+KHRnZmE6IEhLVDxULCBIS1Q8RywgSEtUPEYsIEE+Pj4pID0+IEhLVDxGLCBIS1Q8VCwgSEtUPEcsIEE+Pj5cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXF1ZW5jZTxULCBHPihcbiAgVDogVHJhdmVyc2FibGU8VD4sXG4gIEc6IFRyYXZlcnNhYmxlPEc+XG4pOiA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pID0+IDxBPih0Z2ZhOiBIS1Q8VCwgSEtUPEcsIEhLVDxGLCBBPj4+KSA9PiBIS1Q8RiwgSEtUPFQsIEhLVDxHLCBBPj4+XG5leHBvcnQgZnVuY3Rpb24gc2VxdWVuY2U8VCwgRz4oXG4gIFQ6IFRyYXZlcnNhYmxlPFQ+LFxuICBHOiBUcmF2ZXJzYWJsZTxHPlxuKTogPEY+KEY6IEFwcGxpY2F0aXZlPEY+KSA9PiA8QT4odGdmYTogSEtUPFQsIEhLVDxHLCBIS1Q8RiwgQT4+PikgPT4gSEtUPEYsIEhLVDxULCBIS1Q8RywgQT4+PiB7XG4gIHJldHVybiAoRikgPT4ge1xuICAgIGNvbnN0IHNlcXVlbmNlVCA9IFQuc2VxdWVuY2UoRilcbiAgICBjb25zdCBzZXF1ZW5jZUcgPSBHLnNlcXVlbmNlKEYpXG4gICAgcmV0dXJuIChmZ2hhKSA9PiBzZXF1ZW5jZVQoVC5tYXAoZmdoYSwgc2VxdWVuY2VHKSlcbiAgfVxufVxuXG4vL1xuLy8gcGlwZWFibGUgYFRyYXZlcnNlYFxuLy9cblxuLyoqXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaXBlYWJsZVRyYXZlcnNlMTxUIGV4dGVuZHMgVVJJUz4ge1xuICA8RiBleHRlbmRzIFVSSVMzPihGOiBBcHBsaWNhdGl2ZTM8Rj4pOiA8QSwgRlIsIEZFLCBCPihcbiAgICBmOiAoYTogQSkgPT4gS2luZDM8RiwgRlIsIEZFLCBCPlxuICApID0+ICh0YTogS2luZDxULCBBPikgPT4gS2luZDM8RiwgRlIsIEZFLCBLaW5kPFQsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMzLCBGRT4oRjogQXBwbGljYXRpdmUzQzxGLCBGRT4pOiA8QSwgRlIsIEI+KFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMzxGLCBGUiwgRkUsIEI+XG4gICkgPT4gKHRhOiBLaW5kPFQsIEE+KSA9PiBLaW5kMzxGLCBGUiwgRkUsIEtpbmQ8VCwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzI+KEY6IEFwcGxpY2F0aXZlMjxGPik6IDxBLCBGRSwgQj4oXG4gICAgZjogKGE6IEEpID0+IEtpbmQyPEYsIEZFLCBCPlxuICApID0+ICh0YTogS2luZDxULCBBPikgPT4gS2luZDI8RiwgRkUsIEtpbmQ8VCwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEZFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEZFPik6IDxBLCBCPihcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gKHRhOiBLaW5kPFQsIEE+KSA9PiBLaW5kMjxGLCBGRSwgS2luZDxULCBCPj5cbiAgPEYgZXh0ZW5kcyBVUklTPihGOiBBcHBsaWNhdGl2ZTE8Rj4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEtpbmQ8RiwgQj4pID0+ICh0YTogS2luZDxULCBBPikgPT4gS2luZDxGLCBLaW5kPFQsIEI+PlxuICA8Rj4oRjogQXBwbGljYXRpdmU8Rj4pOiA8QSwgQj4oZjogKGE6IEEpID0+IEhLVDxGLCBCPikgPT4gKHRhOiBLaW5kPFQsIEE+KSA9PiBIS1Q8RiwgS2luZDxULCBCPj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaXBlYWJsZVRyYXZlcnNlMjxUIGV4dGVuZHMgVVJJUzI+IHtcbiAgPEYgZXh0ZW5kcyBVUklTMz4oRjogQXBwbGljYXRpdmUzPEY+KTogPEEsIEZSLCBGRSwgQj4oXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEYsIEZSLCBGRSwgQj5cbiAgKSA9PiA8VEU+KHRhOiBLaW5kMjxULCBURSwgQT4pID0+IEtpbmQzPEYsIEZSLCBGRSwgS2luZDI8VCwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVMyPihGOiBBcHBsaWNhdGl2ZTI8Rj4pOiA8QSwgRkUsIEI+KFxuICAgIGY6IChhOiBBKSA9PiBLaW5kMjxGLCBGRSwgQj5cbiAgKSA9PiA8VEU+KHRhOiBLaW5kMjxULCBURSwgQT4pID0+IEtpbmQyPEYsIEZFLCBLaW5kMjxULCBURSwgQj4+XG4gIDxGIGV4dGVuZHMgVVJJUzIsIEZFPihGOiBBcHBsaWNhdGl2ZTJDPEYsIEZFPik6IDxBLCBCPihcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8RiwgRkUsIEI+XG4gICkgPT4gPFRFPih0YTogS2luZDI8VCwgVEUsIEE+KSA9PiBLaW5kMjxGLCBGRSwgS2luZDI8VCwgVEUsIEI+PlxuICA8RiBleHRlbmRzIFVSSVM+KEY6IEFwcGxpY2F0aXZlMTxGPik6IDxBLCBCPihcbiAgICBmOiAoYTogQSkgPT4gS2luZDxGLCBCPlxuICApID0+IDxURT4odGE6IEtpbmQyPFQsIFRFLCBBPikgPT4gS2luZDxGLCBLaW5kMjxULCBURSwgQj4+XG4gIDxGPihGOiBBcHBsaWNhdGl2ZTxGPik6IDxBLCBCPihmOiAoYTogQSkgPT4gSEtUPEYsIEI+KSA9PiA8VEU+KHRhOiBLaW5kMjxULCBURSwgQT4pID0+IEhLVDxGLCBLaW5kMjxULCBURSwgQj4+XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gdHNsaW50OmRpc2FibGU6IGRlcHJlY2F0aW9uXG5cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlcnNhYmxlQ29tcG9zaXRpb248RiwgRz4gZXh0ZW5kcyBGb2xkYWJsZUNvbXBvc2l0aW9uPEYsIEc+LCBGdW5jdG9yQ29tcG9zaXRpb248RiwgRz4ge1xuICByZWFkb25seSB0cmF2ZXJzZTogPEg+KFxuICAgIEg6IEFwcGxpY2F0aXZlPEg+XG4gICkgPT4gPEEsIEI+KGZnYTogSEtUPEYsIEhLVDxHLCBBPj4sIGY6IChhOiBBKSA9PiBIS1Q8SCwgQj4pID0+IEhLVDxILCBIS1Q8RiwgSEtUPEcsIEI+Pj5cbiAgcmVhZG9ubHkgc2VxdWVuY2U6IDxIPihIOiBBcHBsaWNhdGl2ZTxIPikgPT4gPEE+KGZnYTogSEtUPEYsIEhLVDxHLCBIS1Q8SCwgQT4+PikgPT4gSEtUPEgsIEhLVDxGLCBIS1Q8RywgQT4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmF2ZXJzZUNvbXBvc2l0aW9uMTE8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTPiB7XG4gIDxIIGV4dGVuZHMgVVJJUzM+KEg6IEFwcGxpY2F0aXZlMzxIPik6IDxSLCBFLCBBLCBCPihcbiAgICBmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQzPEgsIFIsIEUsIEI+XG4gICkgPT4gS2luZDM8SCwgUiwgRSwgS2luZDxGLCBLaW5kPEcsIEI+Pj5cbiAgPEggZXh0ZW5kcyBVUklTMj4oSDogQXBwbGljYXRpdmUyPEg+KTogPEUsIEEsIEI+KFxuICAgIGZnYTogS2luZDxGLCBLaW5kPEcsIEE+PixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8SCwgRSwgQj5cbiAgKSA9PiBLaW5kMjxILCBFLCBLaW5kPEYsIEtpbmQ8RywgQj4+PlxuICA8SCBleHRlbmRzIFVSSVMyLCBFPihIOiBBcHBsaWNhdGl2ZTJDPEgsIEU+KTogPEEsIEI+KFxuICAgIGZnYTogS2luZDxGLCBLaW5kPEcsIEE+PixcbiAgICBmOiAoYTogQSkgPT4gS2luZDI8SCwgRSwgQj5cbiAgKSA9PiBLaW5kMjxILCBFLCBLaW5kPEYsIEtpbmQ8RywgQj4+PlxuICA8SCBleHRlbmRzIFVSSVM+KEg6IEFwcGxpY2F0aXZlMTxIPik6IDxBLCBCPihcbiAgICBmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj4sXG4gICAgZjogKGE6IEEpID0+IEtpbmQ8SCwgQj5cbiAgKSA9PiBLaW5kPEgsIEtpbmQ8RiwgS2luZDxHLCBCPj4+XG4gIDxIPihIOiBBcHBsaWNhdGl2ZTxIPik6IDxBLCBCPihmZ2E6IEtpbmQ8RiwgS2luZDxHLCBBPj4sIGY6IChhOiBBKSA9PiBIS1Q8SCwgQj4pID0+IEhLVDxILCBLaW5kPEYsIEtpbmQ8RywgQj4+PlxufVxuXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXF1ZW5jZUNvbXBvc2l0aW9uMTE8RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTPiB7XG4gIDxIIGV4dGVuZHMgVVJJUzM+KEg6IEFwcGxpY2F0aXZlMzxIPik6IDxSLCBFLCBBPihcbiAgICBmZ2E6IEtpbmQ8RiwgS2luZDxHLCBLaW5kMzxILCBSLCBFLCBBPj4+XG4gICkgPT4gS2luZDM8SCwgUiwgRSwgS2luZDxGLCBLaW5kPEcsIEE+Pj5cbiAgPEggZXh0ZW5kcyBVUklTMj4oSDogQXBwbGljYXRpdmUyPEg+KTogPEUsIEE+KFxuICAgIGZnYTogS2luZDxGLCBLaW5kPEcsIEtpbmQyPEgsIEUsIEE+Pj5cbiAgKSA9PiBLaW5kMjxILCBFLCBLaW5kPEYsIEtpbmQ8RywgQT4+PlxuICA8SCBleHRlbmRzIFVSSVMyLCBFPihIOiBBcHBsaWNhdGl2ZTJDPEgsIEU+KTogPEE+KFxuICAgIGZnYTogS2luZDxGLCBLaW5kPEcsIEtpbmQyPEgsIEUsIEE+Pj5cbiAgKSA9PiBLaW5kMjxILCBFLCBLaW5kPEYsIEtpbmQ8RywgQT4+PlxuICA8SCBleHRlbmRzIFVSSVM+KEg6IEFwcGxpY2F0aXZlMTxIPik6IDxBPihmZ2E6IEtpbmQ8RiwgS2luZDxHLCBLaW5kPEgsIEE+Pj4pID0+IEtpbmQ8SCwgS2luZDxGLCBLaW5kPEcsIEE+Pj5cbiAgPEg+KEg6IEFwcGxpY2F0aXZlPEg+KTogPEE+KGZnYTogS2luZDxGLCBLaW5kPEcsIEhLVDxILCBBPj4+KSA9PiBIS1Q8SCwgS2luZDxGLCBLaW5kPEcsIEE+Pj5cbn1cblxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhdmVyc2FibGVDb21wb3NpdGlvbjExPEYgZXh0ZW5kcyBVUklTLCBHIGV4dGVuZHMgVVJJUz5cbiAgZXh0ZW5kcyBGb2xkYWJsZUNvbXBvc2l0aW9uMTE8RiwgRz4sXG4gICAgRnVuY3RvckNvbXBvc2l0aW9uMTE8RiwgRz4ge1xuICByZWFkb25seSB0cmF2ZXJzZTogVHJhdmVyc2VDb21wb3NpdGlvbjExPEYsIEc+XG4gIHJlYWRvbmx5IHNlcXVlbmNlOiBTZXF1ZW5jZUNvbXBvc2l0aW9uMTE8RiwgRz5cbn1cblxuLyoqXG4gKiBVc2VcbiAqIC0gW2B0cmF2ZXJzZWBdKCN0cmF2ZXJzZSlcbiAqIC0gW2BzZXF1ZW5jZWBdKCNzZXF1ZW5jZSlcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYXZlcnNhYmxlQ29tcG9zaXRpb248RiBleHRlbmRzIFVSSVMsIEcgZXh0ZW5kcyBVUklTPihcbiAgRjogVHJhdmVyc2FibGUxPEY+LFxuICBHOiBUcmF2ZXJzYWJsZTE8Rz5cbik6IFRyYXZlcnNhYmxlQ29tcG9zaXRpb24xMTxGLCBHPlxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhdmVyc2FibGVDb21wb3NpdGlvbjxGLCBHPihGOiBUcmF2ZXJzYWJsZTxGPiwgRzogVHJhdmVyc2FibGU8Rz4pOiBUcmF2ZXJzYWJsZUNvbXBvc2l0aW9uPEYsIEc+XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmF2ZXJzYWJsZUNvbXBvc2l0aW9uPEYsIEc+KEY6IFRyYXZlcnNhYmxlPEY+LCBHOiBUcmF2ZXJzYWJsZTxHPik6IFRyYXZlcnNhYmxlQ29tcG9zaXRpb248RiwgRz4ge1xuICBjb25zdCBtYXAgPSBnZXRGdW5jdG9yQ29tcG9zaXRpb24oRiwgRykubWFwXG4gIGNvbnN0IEZDID0gZ2V0Rm9sZGFibGVDb21wb3NpdGlvbihGLCBHKVxuICBjb25zdCBfdHJhdmVyc2UgPSB0cmF2ZXJzZShGLCBHKVxuICBjb25zdCBfc2VxdWVuY2UgPSBzZXF1ZW5jZShGLCBHKVxuICByZXR1cm4ge1xuICAgIG1hcCxcbiAgICByZWR1Y2U6IEZDLnJlZHVjZSxcbiAgICBmb2xkTWFwOiBGQy5mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBGQy5yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogKEgpID0+IHtcbiAgICAgIGNvbnN0IHRyYXZlcnNlSCA9IF90cmF2ZXJzZShIKVxuICAgICAgcmV0dXJuIChmZ2EsIGYpID0+IHBpcGUoZmdhLCB0cmF2ZXJzZUgoZikpXG4gICAgfSxcbiAgICBzZXF1ZW5jZTogKEgpID0+IHtcbiAgICAgIGNvbnN0IHNlcXVlbmNlSCA9IF9zZXF1ZW5jZShIKVxuICAgICAgcmV0dXJuIChmZ2hhKSA9PiBwaXBlKGZnaGEsIHNlcXVlbmNlSClcbiAgICB9XG4gIH1cbn1cbiJdfQ==